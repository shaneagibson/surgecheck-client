function onDeviceReady(){require(["./app"],function(e){setTimeout(function(){e.start()},1e3)})}function handleOpenURL(e){require(["./app"],function(t){t.customUrl=e.substring("epsilon://".length,e.length)})}define("config",["require"],function(){var e={google:{project_number:830376253222,analytics_key:"UA-XXXX-YY"},pushapps:{app_token:"e6d5f5bd-5032-4172-be19-d7b41d67f1ef"},server:{scheme:"http",host:"192.168.1.105",port:8090},app_store:{android:{name:"Google Play",url:""},ios:{name:"App Store",url:""},browser:{name:"App Store",url:"http://mystore.com/app/123"}},jumio:{app_key:"",app_secret:""},braintree:{cse_key:"MIIBCgKCAQEAquZ3hNSxJAsuTnvu2Oov6gQhWizd+jY+dcMt4BkLZC/p5atg5OqCLHQaiAYPQsh3dI3Zw8WHgG1yvUrZd/syF0xF2U2DM5TBjmfENS1iG5mYVMzvWws61vVdxsLno4J/IEDwZ7PRuufi8O2baJFcngxIamGBKCIu4louvQPSX/NpA2huxjpviBlkWKPyC+LkSHiqq5hVu3q5MXz6jja0mHZT8s5tutoj/2E/Z6erNa7R4aMZdj64MaMXg+tdFeMpYabC48JH4zN6Q4taDZ5N8JUuSAqZdBaMu7chmjwrrvjpMjcInOn0tuw+9BlxUI3dvOfmSsU7Y9s107JwtTUHIQIDAQAB"},mock:!0,version:"0.0.2"};return e}),define("util/push-notification",["require","./../config"],function(e){var t=e("./../config"),n={register:function(){return i().then(o).then(s)},unregister:function(){return r().then(a)}},i=function(){return new RSVP.Promise(function(e,n){PushNotification.registerDevice(t.google.project_number,t.pushapps.app_token,function(t){console.log("pushapps - PUSH TOKEN: "+t),e()},n)})},r=function(){return new RSVP.Promise(function(e,t){PushNotification.unRegisterDevice(e,t)})},o=function(){return new RSVP.Promise(function(e,t){PushNotification.getDeviceId(e,t)})},s=function(e){console.log("pushapps - DEVICE ID: "+e),localStorage.setItem("deviceid",e)},a=function(){localStorage.removeItem("deviceid")};return n}),function(){var e=this,t=e._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,_=o.bind,k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(e,t,i){if(null==e)return e;if(h&&e.forEach===h)e.forEach(t,i);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(i,e[r],r,e)===n)return}else for(var s=k.keys(e),r=0,o=s.length;o>r;r++)if(t.call(i,e[s[r]],s[r],e)===n)return;return e};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:d&&e.map===d?e.map(t,n):(C(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=k.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(C(e,function(e,o,s){r?n=t.call(i,n,e,o,s):(n=e,r=!0)}),!r)throw new TypeError(S);return n},k.reduceRight=k.foldr=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=k.bind(t,i)),r?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=k.keys(e);o=s.length}if(C(e,function(a,l,u){l=s?s[--o]:--o,r?n=t.call(i,n,e[l],l,u):(n=e[l],r=!0)}),!r)throw new TypeError(S);return n},k.find=k.detect=function(e,t,n){var i;return E(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:m&&e.filter===m?e.filter(t,n):(C(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},k.every=k.all=function(e,t,i){t||(t=k.identity);var r=!0;return null==e?r:g&&e.every===g?e.every(t,i):(C(e,function(e,o,s){return(r=r&&t.call(i,e,o,s))?void 0:n}),!!r)};var E=k.some=k.any=function(e,t,i){t||(t=k.identity);var r=!1;return null==e?r:v&&e.some===v?e.some(t,i):(C(e,function(e,o,s){return r||(r=t.call(i,e,o,s))?n:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):E(e,function(e){return e===t})},k.invoke=function(e,t){var n=a.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){return(i?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matches(t))},k.findWhere=function(e,t){return k.find(e,k.matches(t))},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-1/0,r=-1/0;return C(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;a>r&&(i=e,r=a)}),i},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var i=1/0,r=1/0;return C(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;r>a&&(i=e,r=a)}),i},k.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i},k.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))};var T=function(e){return null==e?k.identity:k.isFunction(e)?e:k.property(e)};k.sortBy=function(e,t,n){return t=T(t),k.pluck(k.map(e,function(e,i,r){return{value:e,index:i,criteria:t.call(n,e,i,r)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,i){var r={};return n=T(n),C(t,function(o,s){var a=n.call(i,o,s,t);e(r,a,o)}),r}};k.groupBy=A(function(e,t,n){k.has(e,t)?e[t].push(n):e[t]=[n]}),k.indexBy=A(function(e,t,n){e[t]=n}),k.countBy=A(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,i){n=T(n);for(var r=n.call(i,t),o=0,s=e.length;s>o;){var a=o+s>>>1;n.call(i,e[a])<r?o=a+1:s=a}return o},k.toArray=function(e){return e?k.isArray(e)?a.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},k.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var M=function(e,t,n){return t&&k.every(e,k.isArray)?l.apply(n,e):(C(e,function(e){k.isArray(e)||k.isArguments(e)?t?s.apply(n,e):M(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return M(e,t,[])},k.without=function(e){return k.difference(e,a.call(arguments,1))},k.partition=function(e,t){var n=[],i=[];return C(e,function(e){(t(e)?n:i).push(e)}),[n,i]},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var r=n?k.map(e,n,i):e,o=[],s=[];return C(r,function(n,i){(t?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(e[i]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=a.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.contains(t,e)})})},k.difference=function(e){var t=l.apply(i,a.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,r=e.length;r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=i?n:e.length;r--;)if(e[r]===t)return r;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=0,o=new Array(i);i>r;)o[r++]=e,e+=n;return o};var N=function(){};k.bind=function(e,t){var n,i;if(_&&e.bind===_)return _.apply(e,a.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(a.call(arguments)));N.prototype=e.prototype;var r=new N;N.prototype=null;var o=e.apply(r,n.concat(a.call(arguments)));return Object(o)===o?o:r}},k.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,o=i.length;o>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},k.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(a.call(arguments,1)))},k.throttle=function(e,t,n){var i,r,o,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:k.now(),s=null,o=e.apply(i,r),i=r=null};return function(){var u=k.now();a||n.leading!==!1||(a=u);var c=t-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=e.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(l,c)),o}},k.debounce=function(e,t,n){var i,r,o,s,a,l=function(){var u=k.now()-s;t>u?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(o,r),o=r=null))};return function(){o=this,r=arguments,s=k.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(a=e.apply(o,r),o=r=null),a}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return k.partial(t,e)},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=function(e){if(!k.isObject(e))return[];if(x)return x(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},k.pairs=function(e){for(var t=k.keys(e),n=t.length,i=new Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},k.invert=function(e){for(var t={},n=k.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return C(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(i,a.call(arguments,1));return C(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(i,a.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(e){return C(a.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var P=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var r=u.call(e);if(r!=u.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return i[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),i.push(t);var l=0,c=!0;if("[object Array]"==r){if(l=e.length,c=l==t.length)for(;l--&&(c=P(e[l],t[l],n,i)););}else{for(var h in e)if(k.has(e,h)&&(l++,!(c=k.has(t,h)&&P(e[h],t[h],n,i))))break;if(c){for(h in t)if(k.has(t,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(e,t){return P(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=w||function(e){return"[object Array]"==u.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return u.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==u.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return c.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.property=function(e){return function(t){return t[e]}},k.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},k.times=function(e,t,n){for(var i=Array(Math.max(0,e)),r=0;e>r;r++)i[r]=t.call(n,r);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=k.invert(I.escape);var O={escape:new RegExp("["+k.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(I.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(O[e],function(t){return I[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){C(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return s.apply(e,arguments),L.call(this,n.apply(k,e))}})};var D=0;k.uniqueId=function(e){var t=++D+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(r,function(t,n,i,r,a){return s+=e.slice(o,a).replace(V,function(e){return"\\"+j[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return i(t,k);var l=function(e){return i.call(this,e,k)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},k.chain=function(e){return k(e).chain()};var L=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],L.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return W.call(t,e)>=0!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=ft[e]={};return Z.each(e.match(pt)||[],function(e,n){t[n]=!0}),t}function s(){Q.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(wt,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?Z.parseJSON(n):n}catch(r){}yt.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function h(){try{return Q.activeElement}catch(e){}}function d(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function f(e){var t=jt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n=0,i=e.length;i>n;n++)vt.set(e[n],"globalEval",!t||vt.get(t[n],"globalEval"))}function g(e,t){var n,i,r,o,s,a,l,u;if(1===t.nodeType){if(vt.hasData(e)&&(o=vt.access(e),s=vt.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)Z.event.add(t,r,u[r][n])}yt.hasData(e)&&(a=yt.access(e),l=Z.extend({},a),yt.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ct.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var i,r=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:Z.css(r[0],"display");return r.detach(),o}function w(e){var t=Q,n=Bt[e];return n||(n=b(e,t),"none"!==n&&n||(Ft=(Ft||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ft[0].contentDocument,t.write(),t.close(),n=b(e,t),Ft.detach()),Bt[e]=n),n}function x(e,t,n){var i,r,o,s,a=e.style;return n=n||qt(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Ut.test(s)&&Ht.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o)),void 0!==s?s+"":s}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Xt.length;r--;)if(t=Xt[r]+n,t in e)return t;return i}function C(e,t,n){var i=zt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+_t[o],!0,r)),i?("content"===n&&(s-=Z.css(e,"padding"+_t[o],!0,r)),"margin"!==n&&(s-=Z.css(e,"border"+_t[o]+"Width",!0,r))):(s+=Z.css(e,"padding"+_t[o],!0,r),"padding"!==n&&(s+=Z.css(e,"border"+_t[o]+"Width",!0,r)));return s}function E(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=qt(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=x(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ut.test(r))return r;i=s&&(G.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+S(e,t,n||(s?"border":"content"),i,o)+"px"}function T(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=vt.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&kt(i)&&(o[s]=vt.access(i,"olddisplay",w(i.nodeName)))):(r=kt(i),"none"===n&&r||vt.set(i,"olddisplay",r?n:Z.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function A(e,t,n,i,r){return new A.prototype.init(e,t,n,i,r)}function M(){return setTimeout(function(){Gt=void 0}),Gt=Z.now()}function N(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=_t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function P(e,t,n){for(var i,r=(nn[t]||[]).concat(nn["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function I(e,t,n){var i,r,o,s,a,l,u,c,h=this,d={},p=e.style,f=e.nodeType&&kt(e),m=vt.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=Z.css(e,"display"),c="none"===u?vt.get(e,"olddisplay")||w(e.nodeName):u,"inline"===c&&"none"===Z.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Kt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||Z.style(e,i)}else u=void 0;if(Z.isEmptyObject(d))"inline"===("none"===u?w(e.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(f=m.hidden):m=vt.access(e,"fxshow",{}),o&&(m.hidden=!f),f?Z(e).show():h.done(function(){Z(e).hide()}),h.done(function(){var t;vt.remove(e,"fxshow");for(t in d)Z.style(e,t,d[t])});for(i in d)s=P(f?m[i]:0,i,h),i in m||(m[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function O(e,t){var n,i,r,o,s;for(n in e)if(i=Z.camelCase(n),r=t[i],o=e[n],Z.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=Z.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function D(e,t,n){var i,r,o=0,s=tn.length,a=Z.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Gt||M(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,n]),1>o&&l?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Gt||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=Z.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?a.resolveWith(e,[u,t]):a.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);s>o;o++)if(i=tn[o].call(u,e,c,u.opts))return i;return Z.map(c,P,u),Z.isFunction(u.opts.start)&&u.opts.start.call(e,u),Z.fx.timer(Z.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(pt)||[];if(Z.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function j(e,t,n,i){function r(a){var l;return o[a]=!0,Z.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=e===wn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function V(e,t){var n,i,r=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&Z.extend(!0,e,i),e}function L(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function F(e,t,n,i){var r,o,s,a,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function B(e,t,n,i){var r;if(Z.isArray(t))Z.each(t,function(t,r){n||Sn.test(e)?i(e,r):B(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==Z.type(t))i(e,t);else for(r in t)B(e+"["+r+"]",t[r],n,i)}function H(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],q=U.slice,$=U.concat,z=U.push,W=U.indexOf,Y={},J=Y.toString,X=Y.hasOwnProperty,G={},Q=e.document,K="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,it=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:q.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:z,sort:U.sort,splice:U.splice},Z.extend=Z.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(Z.isPlainObject(i)||(r=Z.isArray(i)))?(r?(r=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(u,o,i)):void 0!==i&&(s[t]=i));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!X.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Y[J.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,it)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?Z.merge(i,"string"==typeof e?[e]:e):z.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:W.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,s=e.length,a=!n;s>o;o++)i=!t(e[o],o),i!==a&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&l.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&l.push(r);return $.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(i=q.call(arguments,2),r=function(){return e.apply(t||this,i.concat(q.call(arguments)))},r.guid=e.guid=e.guid||Z.guid++,r):void 0},now:Date.now,support:G}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()});var rt=function(e){function t(e,t,n,i){var r,o,s,a,l,u,h,p,f,m;if((t?t.ownerDocument||t:B)!==I&&P(t),t=t||I,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!i&&D){if(11!==a&&(r=yt.exec(e)))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&L(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return K.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&x.getElementsByClassName)return K.apply(n,t.getElementsByClassName(s)),n}if(x.qsa&&(!R||!R.test(e))){if(p=h=F,f=t,m=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(u=S(e),(h=t.getAttribute("id"))?p=h.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=bt.test(e)&&c(t.parentNode)||t,m=u.join(",")}if(m)try{return K.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||t.removeAttribute("id")}}}return T(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[F]=!0,e}function r(e){var t=I.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)_.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=U++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,u=[H,o];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[F]||(t[F]={}),(a=l[i])&&a[0]===H&&a[1]===o)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,u=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),u&&t.push(a));
return s}function v(e,t,n,r,o,s){return r&&!r[F]&&(r=v(r)),o&&!o[F]&&(o=v(o,s)),i(function(i,s,a,l){var u,c,h,d=[],p=[],f=s.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!i&&t?v:g(v,d,e,a,l),b=n?o||(i?e:f||r)?[]:s:y;if(n&&n(y,b,a,l),r)for(u=g(b,p),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(b[p[c]]=!(y[p[c]]=h));if(i){if(o||e){if(o){for(u=[],c=b.length;c--;)(h=b[c])&&u.push(y[c]=h);o(null,b=[],u,l)}for(c=b.length;c--;)(h=b[c])&&(u=o?et(i,h):d[c])>-1&&(i[u]=!(s[u]=h))}}else b=g(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):K.apply(s,b)})}function y(e){for(var t,n,i,r=e.length,o=_.relative[e[0].type],s=o||_.relative[" "],a=o?1:0,l=p(function(e){return e===t},s,!0),u=p(function(e){return et(t,e)>-1},s,!0),c=[function(e,n,i){var r=!o&&(i||n!==A)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];r>a;a++)if(n=_.relative[e[a].type])c=[p(f(c),n)];else{if(n=_.filter[e[a].type].apply(null,e[a].matches),n[F]){for(i=++a;r>i&&!_.relative[e[i].type];i++);return v(a>1&&f(c),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&y(e.slice(a,i)),r>i&&y(e=e.slice(i)),r>i&&d(e))}c.push(n)}return f(c)}function b(e,n){var r=n.length>0,o=e.length>0,s=function(i,s,a,l,u){var c,h,d,p=0,f="0",m=i&&[],v=[],y=A,b=i||o&&_.find.TAG("*",u),w=H+=null==y?1:Math.random()||.1,x=b.length;for(u&&(A=s!==I&&s);f!==x&&null!=(c=b[f]);f++){if(o&&c){for(h=0;d=e[h++];)if(d(c,s,a)){l.push(c);break}u&&(H=w)}r&&((c=!d&&c)&&p--,i&&m.push(c))}if(p+=f,r&&f!==p){for(h=0;d=n[h++];)d(m,v,s,a);if(i){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}K.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(H=w,A=y),m};return r?i(s):s}var w,x,_,k,C,S,E,T,A,M,N,P,I,O,D,R,j,V,L,F="sizzle"+1*new Date,B=e.document,H=0,U=0,q=n(),$=n(),z=n(),W=function(e,t){return e===t&&(N=!0),0},Y=1<<31,J={}.hasOwnProperty,X=[],G=X.pop,Q=X.push,K=X.push,Z=X.slice,et=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=it.replace("w","w#"),ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",st=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ut=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(st),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},kt=function(){P()};try{K.apply(X=Z.call(B.childNodes),B.childNodes),X[B.childNodes.length].nodeType}catch(Ct){K={apply:X.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},C=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:B;return i!==I&&9===i.nodeType&&i.documentElement?(I=i,O=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",kt,!1):n.attachEvent&&n.attachEvent("onunload",kt)),D=!C(i),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName),x.getById=r(function(e){return O.appendChild(e).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),x.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(xt,_t);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(xt,_t);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.CLASS=x.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},j=[],R=[],(x.qsa=vt.test(i.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+F+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||R.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(x.matchesSelector=vt.test(V=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){x.disconnectedMatch=V.call(e,"div"),V.call(e,"[s!='']:x"),j.push("!=",st)}),R=R.length&&new RegExp(R.join("|")),j=j.length&&new RegExp(j.join("|")),t=vt.test(O.compareDocumentPosition),L=t||vt.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return N=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===B&&L(B,e)?-1:t===i||t.ownerDocument===B&&L(B,t)?1:M?et(M,e)-et(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return N=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,l=[e],u=[t];if(!o||!a)return e===i?-1:t===i?1:o?-1:a?1:M?et(M,e)-et(M,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},i):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&P(e),n=n.replace(ht,"='$1']"),!(!x.matchesSelector||!D||j&&j.test(n)||R&&R.test(n)))try{var i=V.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&P(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&P(e);var n=_.attrHandle[t.toLowerCase()],i=n&&J.call(_.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:x.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(N=!x.detectDuplicates,M=!x.sortStable&&e.slice(0),e.sort(W),N){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return M=null,e},k=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},_=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,_t),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&dt.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,_t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(at," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(c=g[F]||(g[F]={}),u=c[e]||[],p=u[0]===H&&u[1],d=u[0]===H&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[H,p,d];break}}else if(y&&(u=(t[F]||(t[F]={}))[e])&&u[0]===H)d=u[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[F]||(h[F]={}))[e]=[H,d]),h!==t)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(e,n){var r,o=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(r=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),s=r.length;s--;)i=et(e,r[s]),e[i]=!(t[i]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=E(e.replace(lt,"$1"));return r[F]?i(function(e,t,n,i){for(var o,s=r(e,null,i,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(xt,_t),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,_t).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,S=t.tokenize=function(e,n){var i,r,o,s,a,l,u,c=$[e+" "];if(c)return n?0:c.slice(0);for(a=e,l=[],u=_.preFilter;a;){(!i||(r=ut.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=ct.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),a=a.slice(i.length));for(s in _.filter)!(r=ft[s].exec(a))||u[s]&&!(r=u[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):$(e,l).slice(0)},E=t.compile=function(e,t){var n,i=[],r=[],o=z[e+" "];if(!o){for(t||(t=S(e)),n=t.length;n--;)o=y(t[n]),o[F]?i.push(o):r.push(o);o=z(e,b(r,i)),o.selector=e}return o},T=t.select=function(e,t,n,i){var r,o,s,a,l,u="function"==typeof e&&e,h=!i&&S(e=u.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===t.nodeType&&D&&_.relative[o[1].type]){if(t=(_.find.ID(s.matches[0].replace(xt,_t),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ft.needsContext.test(e)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(xt,_t),bt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&d(o),!e)return K.apply(n,i),n;break}}return(u||E(e,h))(i,t,!D,n,bt.test(e)&&c(t.parentNode)||t),n},x.sortStable=F.split("").sort(W).join("")===F,x.detectDuplicates=!!N,P(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);Z.find=rt,Z.expr=rt.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=rt.uniqueSort,Z.text=rt.getText,Z.isXMLDoc=rt.isXML,Z.contains=rt.contains;var ot=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?Z.find.matchesSelector(i,e)?[i]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(r[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,r[t],i);return i=this.pushStack(n>1?Z.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ot.test(e)?Z(e):e||[],!1).length}});var lt,ut=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ut.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||lt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),st.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=Q.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof lt.ready?lt.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ct.prototype=Z.fn,lt=Z(Q);var ht=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&Z(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=ot.test(e)||"string"!=typeof e?Z(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?W.call(Z(e),this[0]):W.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,i){var r=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Z.filter(i,r)),this.length>1&&(dt[e]||Z.unique(r),ht.test(e)&&r.reverse()),this.pushStack(r)}});var pt=/\S+/g,ft={};Z.Callbacks=function(e){e="string"==typeof e?ft[e]||o(e):Z.extend({},e);var t,n,i,r,s,a,l=[],u=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=r||0,r=0,s=l.length,i=!0;l&&s>a;a++)if(l[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(t){Z.each(t,function(t,n){var i=Z.type(n);"function"===i?e.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=l.length:t&&(r=n,c(t))}return this},remove:function(){return l&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,l,n))>-1;)l.splice(n,1),i&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],s=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,i):i}},r={};return i.pipe=i.then,Z.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=q.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,l=1===a?e:Z.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?q.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>r;r++)o[r]&&Z.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,t)):--a;return a||l.resolveWith(i,o),l.promise()}});var mt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(mt.resolveWith(Q,[Z]),Z.fn.triggerHandler&&(Z(Q).triggerHandler("ready"),Z(Q).off("ready"))))}}),Z.ready.promise=function(t){return mt||(mt=Z.Deferred(),"complete"===Q.readyState?setTimeout(Z.ready):(Q.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),mt.promise(t)},Z.ready.promise();var gt=Z.access=function(e,t,n,i,r,o,s){var a=0,l=e.length,u=null==n;if("object"===Z.type(n)){r=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==i&&(r=!0,Z.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(Z(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?i=t.concat(t.map(Z.camelCase)):(r=Z.camelCase(t),t in s?i=[t,r]:(i=r,i=i in s?[i]:i.match(pt)||[])),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Z.extend({hasData:function(e){return yt.hasData(e)||vt.hasData(e)},data:function(e,t,n){return yt.access(e,t,n)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,n){return vt.access(e,t,n)},_removeData:function(e,t){vt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,i,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=yt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=Z.camelCase(i.slice(5)),l(o,i,r[i])));vt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){yt.set(this,e)}):gt(this,function(t){var n,i=Z.camelCase(e);if(o&&void 0===t){if(n=yt.get(o,e),void 0!==n)return n;if(n=yt.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,i);yt.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=vt.get(e,t),n&&(!i||Z.isArray(n)?i=vt.access(e,t,Z.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),i=n.length,r=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return vt.get(e,n)||vt.access(e,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=Z.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=vt.get(o[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_t=["Top","Right","Bottom","Left"],kt=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ct=/^(?:checkbox|radio)$/i;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),G.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var St="undefined";G.focusinBubbles="onfocusin"in e;var Et=/^key/,Tt=/^(?:mouse|pointer|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Mt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,i,r){var o,s,a,l,u,c,h,d,p,f,m,g=vt.get(e);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Z.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return typeof Z!==St&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pt)||[""],u=t.length;u--;)a=Mt.exec(t[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=Z.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=Z.event.special[p]||{},c=Z.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Z.expr.match.needsContext.test(r),namespace:f.join(".")},o),(d=l[p])||(d=l[p]=[],d.delegateCount=0,h.setup&&h.setup.call(e,i,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),Z.event.global[p]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,u,c,h,d,p,f,m,g=vt.hasData(e)&&vt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(pt)||[""],u=t.length;u--;)if(a=Mt.exec(t[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=Z.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)c=d[o],!r&&m!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||Z.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)Z.event.remove(e,p+t[u],n,i,!0);Z.isEmptyObject(l)&&(delete g.handle,vt.remove(e,"events"))}},trigger:function(t,n,i,r){var o,s,a,l,u,c,h,d=[i||Q],p=X.call(t,"type")?t.type:t,f=X.call(t,"namespace")?t.namespace.split("."):[];if(s=a=i=i||Q,3!==i.nodeType&&8!==i.nodeType&&!At.test(p+Z.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[Z.expando]?t:new Z.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:Z.makeArray(n,[t]),h=Z.event.special[p]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Z.isWindow(i)){for(l=h.delegateType||p,At.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(i.ownerDocument||Q)&&d.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=d[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||p,c=(vt.get(s,"events")||{})[t.type]&&vt.get(s,"handle"),c&&c.apply(s,n),c=u&&s[u],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Z.acceptData(i)||u&&Z.isFunction(i[p])&&!Z.isWindow(i)&&(a=i[u],a&&(i[u]=null),Z.event.triggered=p,i[p](),Z.event.triggered=void 0,a&&(i[u]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,i,r,o,s=[],a=q.call(arguments),l=(vt.get(this,"events")||{})[e.type]||[],u=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((Z.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Z(r,this).index(l)>=0:Z.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e
}},fix:function(e){if(e[Z.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Tt.test(r)?this.mouseHooks:Et.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?Z.event.trigger(r,null,t):Z.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!Z.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),G.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=vt.access(i,t);r||i.addEventListener(e,n,!0),vt.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=vt.access(i,t)-1;r?vt.access(i,t,r):(i.removeEventListener(e,n,!0),vt.remove(i,t))}}}),Z.fn.extend({on:function(e,t,n,i,r){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=c;else if(!i)return this;return 1===r&&(o=i,i=function(e){return Z().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Z(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pt=/<([\w:]+)/,It=/<|&#?\w+;/,Ot=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^$|\/(?:java|ecma)script/i,jt=/^true\/(.*)/,Vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,Z.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=Z.contains(e.ownerDocument,e);if(!(G.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),i=0,r=o.length;r>i;i++)y(o[i],s[i]);if(t)if(n)for(o=o||v(e),s=s||v(a),i=0,r=o.length;r>i;i++)g(o[i],s[i]);else g(e,a);return s=v(a,"script"),s.length>0&&m(s,!l&&v(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,u,c=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if(r=e[d],r||0===r)if("object"===Z.type(r))Z.merge(h,r.nodeType?[r]:r);else if(It.test(r)){for(o=o||c.appendChild(t.createElement("div")),s=(Pt.exec(r)||["",""])[1].toLowerCase(),a=Lt[s]||Lt._default,o.innerHTML=a[1]+r.replace(Nt,"<$1></$2>")+a[2],u=a[0];u--;)o=o.lastChild;Z.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(r));for(c.textContent="",d=0;r=h[d++];)if((!i||-1===Z.inArray(r,i))&&(l=Z.contains(r.ownerDocument,r),o=v(c.appendChild(r),"script"),l&&m(o),n))for(u=0;r=o[u++];)Rt.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(r=n[vt.expando],r&&(t=vt.cache[r]))){if(t.events)for(i in t.events)o[i]?Z.event.remove(n,i):Z.removeEvent(n,i,t.handle);vt.cache[r]&&delete vt.cache[r]}delete yt.cache[n[yt.expando]]}}}),Z.fn.extend({text:function(e){return gt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?Z.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return gt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ot.test(e)&&!Lt[(Pt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Nt,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=$.apply([],e);var n,i,r,o,s,a,l=0,u=this.length,c=this,h=u-1,d=e[0],m=Z.isFunction(d);if(m||u>1&&"string"==typeof d&&!G.checkClone&&Dt.test(d))return this.each(function(n){var i=c.eq(n);m&&(e[0]=d.call(this,n,i.html())),i.domManip(e,t)});if(u&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Z.map(v(n,"script"),p),o=r.length;u>l;l++)s=n,l!==h&&(s=Z.clone(s,!0,!0),o&&Z.merge(r,v(s,"script"))),t.call(this[l],s,l);if(o)for(a=r[r.length-1].ownerDocument,Z.map(r,f),l=0;o>l;l++)s=r[l],Rt.test(s.type||"")&&!vt.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Vt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,i=[],r=Z(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(r[s])[t](n),z.apply(i,n.get());return this.pushStack(i)}});var Ft,Bt={},Ht=/^margin/,Ut=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),qt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,i="4px"===t.width,r.removeChild(o)}var n,i,r=Q.documentElement,o=Q.createElement("div"),s=Q.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(G,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},reliableMarginRight:function(){var t,n=s.appendChild(Q.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),r.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r};var $t=/^(none|table(?!-c[ea]).+)/,zt=new RegExp("^("+xt+")(.*)$","i"),Wt=new RegExp("^([+-])=("+xt+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"},Xt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=Z.camelCase(t),l=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=k(l,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=Wt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Z.css(e,t)),o="number"),void(null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),G.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=k(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=x(e,t,i)),"normal"===r&&t in Jt&&(r=Jt[t]),""===n||n?(o=parseFloat(r),n===!0||Z.isNumeric(o)?o||0:r):r}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,i){return n?$t.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Yt,function(){return E(e,t,i)}):E(e,t,i):void 0},set:function(e,n,i){var r=i&&qt(e);return C(e,n,i?S(e,t,i,"border-box"===Z.css(e,"boxSizing",!1,r),r):0)}}}),Z.cssHooks.marginRight=_(G.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+_t[i]+t]=o[i]||o[i-2]||o[0];return r}},Ht.test(e)||(Z.cssHooks[e+t].set=C)}),Z.fn.extend({css:function(e,t){return gt(this,function(e,t,n){var i,r,o={},s=0;if(Z.isArray(t)){for(i=qt(e),r=t.length;r>s;s++)o[t[s]]=Z.css(e,t[s],!1,i);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){kt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=A,A.prototype={constructor:A,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=A.prototype.init,Z.fx.step={};var Gt,Qt,Kt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[I],nn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Zt.exec(t),o=r&&r[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+i)&&Zt.exec(Z.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};Z.Animation=Z.extend(D,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Z.speed=function(e,t,n){var i=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return i.duration=Z.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Z.fx.speeds?Z.fx.speeds[i.duration]:Z.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Z.isFunction(i.old)&&i.old.call(this),i.queue&&Z.dequeue(this,i.queue)},i},Z.fn.extend({fadeTo:function(e,t,n,i){return this.filter(kt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=Z.isEmptyObject(e),o=Z.speed(t,n,i),s=function(){var t=D(this,Z.extend({},e),o);(r||vt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=Z.timers,s=vt.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&en.test(r)&&i(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=vt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=Z.timers,s=i?i.length:0;for(n.finish=!0,Z.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,r)}}),Z.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Gt=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Gt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Qt||(Qt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Qt),Qt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",G.checkOn=""!==e.value,G.optSelected=n.selected,t.disabled=!0,G.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",G.radioValue="t"===e.value}();var rn,on,sn=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return gt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var i,r,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===St?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),i=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?on:rn)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Z.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(pt);if(o&&1===e.nodeType)for(;n=o[r++];)i=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!G.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=sn[t]||Z.find.attr;sn[t]=function(e,t,i){var r,o;return i||(o=sn[t],sn[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,sn[t]=o),r}});var an=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return gt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,r=Z.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),G.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ln=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,i,r,o,s,a="string"==typeof e&&e,l=0,u=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=Z.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,o,s,a=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(pt)||[];u>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ln," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?Z.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Z.isFunction(e)?function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=Z(this),o=e.match(pt)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===St||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ln," ").indexOf(t)>=0)return!0;return!1}});var un=/\r/g;Z.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=Z.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,Z(this).val()):e,null==r?r="":"number"==typeof r?r+="":Z.isArray(r)&&(r=Z.map(r,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=Z.valHooks[r.type]||Z.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(un,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(G.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=Z.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=Z.inArray(i.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},G.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cn=Z.now(),hn=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var dn=/#.*$/,pn=/([?&])_=[^&]*/,fn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gn=/^(?:GET|HEAD)$/,vn=/^\/\//,yn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bn={},wn={},xn="*/".concat("*"),_n=e.location.href,kn=yn.exec(_n.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_n,type:"GET",isLocal:mn.test(kn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?V(V(e,Z.ajaxSettings),t):V(Z.ajaxSettings,e)},ajaxPrefilter:R(bn),ajaxTransport:R(wn),ajax:function(e,t){function n(e,t,n,s){var l,c,v,y,w,_=t;2!==b&&(b=2,a&&clearTimeout(a),i=void 0,o=s||"",x.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=L(h,x,n)),y=F(h,y,x,l),l?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Z.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Z.etag[r]=w)),204===e||"HEAD"===h.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,v=y.error,l=!v)):(v=_,(e||!_)&&(_="error",0>e&&(e=0))),x.status=e,x.statusText=(t||_)+"",l?f.resolveWith(d,[c,_,x]):f.rejectWith(d,[x,_,v]),x.statusCode(g),g=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,h,l?c:v]),m.fireWith(d,[x,_]),u&&(p.trigger("ajaxComplete",[x,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,s,a,l,u,c,h=Z.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?Z(d):Z.event,f=Z.Deferred(),m=Z.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=fn.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return i&&i.abort(t),n(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||_n)+"").replace(dn,"").replace(vn,kn[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(pt)||[""],null==h.crossDomain&&(l=yn.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===kn[1]&&l[2]===kn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(kn[3]||("http:"===kn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),j(bn,h,t,x),2===b)return x;u=Z.event&&h.global,u&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!gn.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(hn.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=pn.test(r)?r.replace(pn,"$1_="+cn++):r+(hn.test(r)?"&":"?")+"_="+cn++)),h.ifModified&&(Z.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[r]),Z.etag[r]&&x.setRequestHeader("If-None-Match",Z.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+xn+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)x.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===b))return x.abort();w="abort";for(c in{success:1,error:1,complete:1})x[c](h[c]);if(i=j(wn,h,t,x)){x.readyState=1,u&&p.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,i.send(v,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,i,r){return Z.isFunction(n)&&(r=r||i,i=n,n=void 0),Z.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Z.isFunction(e)?function(t){Z(this).wrapInner(e.call(this,t))}:function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Cn=/%20/g,Sn=/\[\]$/,En=/\r?\n/g,Tn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,i=[],r=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){r(this.name,this.value)});else for(n in e)B(n,e[n],t,r);return i.join("&").replace(Cn,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&An.test(this.nodeName)&&!Tn.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Mn=0,Nn={},Pn={0:200,1223:204},In=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Nn)Nn[e]()}),G.cors=!!In&&"withCredentials"in In,G.ajax=In=!!In,Z.ajaxTransport(function(e){var t;return G.cors||In&&!e.crossDomain?{send:function(n,i){var r,o=e.xhr(),s=++Mn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete Nn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?i(o.status,o.statusText):i(Pn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Nn[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var On=[],Dn=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||Z.expando+"_"+cn++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,s,a=t.jsonp!==!1&&(Dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(t.data)&&"data");
return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Dn,"$1"+r):t.jsonp!==!1&&(t.url+=(hn.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||Z.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,On.push(r)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var i=st.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=Z.buildFragment([e],t,r),r&&r.length&&Z(r).remove(),Z.merge([],i.childNodes))};var Rn=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Rn)return Rn.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return a>=0&&(i=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&Z.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?Z("<div>").append(Z.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var jn=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,u,c=Z.css(e,"position"),h=Z(e),d={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=Z.css(e,"top"),l=Z.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=h.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(d.top=t.top-a.top+s),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):h.css(d)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,Z.contains(t,i)?(typeof i.getBoundingClientRect!==St&&(r=i.getBoundingClientRect()),n=H(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(i=e.offset()),i.top+=Z.css(e[0],"borderTopWidth",!0),i.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-Z.css(n,"marginTop",!0),left:t.left-i.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||jn;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||jn})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;Z.fn[t]=function(r){return gt(this,function(t,r,o){var s=H(t);return void 0===o?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:o,i?o:e.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=_(G.pixelPosition,function(e,n){return n?(n=x(e,t),Ut.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){Z.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||r===!0?"margin":"border");return gt(this,function(t,n,i){var r;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?Z.css(t,n,s):Z.style(t,n,i,s)},t,o?i:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Vn=e.jQuery,Ln=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Ln),t&&e.jQuery===Z&&(e.jQuery=Vn),Z},typeof t===St&&(e.jQuery=e.$=Z),Z}),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,r){e.Backbone=t(e,r,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){{var r=e.Backbone,o=[],s=(o.push,o.slice);o.splice}t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var r=this,o=n.once(function(){r.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var r,o,s,a,l,c,h,d;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(a=e?[e]:n.keys(this._events),l=0,c=a.length;c>l;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=r=[],t||i)for(h=0,d=s.length;d>h;h++)o=s[h],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&r.push(o);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var s in r)e=r[s],e.off(t,i,this),(o||n.isEmpty(e._events))&&delete this._listeningTo[s];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;a>s;s++)e[t].apply(e,[o[s]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,r=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(e,t){a[t]=function(t,i,r){var o=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=n.uniqueId("l"));return o[s]=t,r||"object"!=typeof i||(r=this),t[e](i,r,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var d=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var r,o,s,a,l,u,c,h;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;s=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(r in o)t=o[r],n.isEqual(h[r],t)||a.push(r),n.isEqual(c[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete h[r]:h[r]=t;if(!l){a.length&&(this._pending=i);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var o in e)n.isEqual(r[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},V(this,e),this.sync("read",this,e)},save:function(e,t,i){var r,o,s,a=this.attributes;if(null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},a,r)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(e){l.attributes=a;var t=l.parse(e,i);return i.wait&&(t=n.extend(r||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(u&&u(l,e,i),void l.trigger("sync",l,e,i))},V(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=r),s=this.sync(o,this,i),r&&i.wait&&(this.attributes=a),s},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&r(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;V(this,e);var o=this.sync("delete",this,e);return e.wait||r(),o},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(e){d.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var r,o,s,a;for(r=0,o=e.length;o>r;r++)a=e[r]=this.get(e[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var r,o,s,a,l,u,c,h=t.at,p=this.model,f=this.comparator&&null==h&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=t.add,x=t.merge,_=t.remove,k=!f&&w&&_?[]:!1;for(r=0,o=e.length;o>r;r++){if(l=e[r]||{},s=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],u=this.get(s))_&&(b[u.cid]=!0),x&&(l=l===a?a.attributes:l,t.parse&&(l=u.parse(l,t)),u.set(l,t),f&&!c&&u.hasChanged(g)&&(c=!0)),e[r]=u;else if(w){if(a=e[r]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=u||a,!k||!a.isNew()&&b[a.id]||k.push(a),b[a.id]=!0}if(_){for(r=0,o=this.length;o>r;++r)b[(a=this.models[r]).cid]||y.push(a);y.length&&this.remove(y,t)}if(v.length||k&&k.length)if(f&&(c=!0),this.length+=v.length,null!=h)for(r=0,o=v.length;o>r;r++)this.models.splice(h+r,0,v[r]);else{k&&(this.models.length=0);var C=k||v;for(r=0,o=C.length;o>r;r++)this.models.push(C[r])}if(c&&this.sort({silent:!0}),!t.silent){for(r=0,o=v.length;o>r;r++)(a=v[r]).trigger("add",a,this,t);(c||k&&k.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},V(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,r=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),r&&r(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){f.prototype[e]=function(){var t=s.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){f.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}});var b=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(w),o=r[1],s=r[2];i=n.bind(i,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,i):this.$el.on(o,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,r){var o=k[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:o,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||j()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",r.emulateJSON&&(s.data._method=o);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||r.emulateJSON||(s.processData=!1),"PATCH"===s.type&&_&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,l,r),l};var _=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,T=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,a,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,function(n){var s=o._extractParameters(e,n);o.execute(r,s),o.trigger.apply(o,["route:"+i].concat(s)),o.trigger("route",i,s),t.history.trigger("route",o,i,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(S,"(?:$1)?").replace(E,function(e,t){return t?e:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,I=/msie [\w.]+/,O=/\/$/,D=/#.*$/;M.started=!1,n.extend(M.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(O,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(N,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,o=I.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(P,"/"),o&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!M.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(D,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M;var R=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=f.extend=C.extend=b.extend=M.extend=R;var j=function(){throw new Error('A "url" property or function must be specified')},V=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),!function(e,t){if("function"==typeof define&&define.amd)define("marionette",["backbone","underscore"],function(n,i){return e.Marionette=e.Mn=t(e,n,i)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("underscore");module.exports=t(e,n,i)}else e.Marionette=e.Mn=t(e,e.Backbone,e._)}(this,function(e,t,n){!function(e,t){var n=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var n=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(n.prototype,{add:function(e,t){var n=e.cid;return this._views[n]=e,e.model&&(this._indexByModel[e.model.cid]=n),t&&(this._indexByCustom[t]=n),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var n=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){return e===n?(delete this._indexByCustom[t],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,n){t.each(this._views,function(i){t.isFunction(i[e])&&i[e].apply(i,n||[])})},_updateLength:function(){this.length=t.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(e){n.prototype[e]=function(){var n=t.values(this._views),i=[n].concat(t.toArray(arguments));return t[e].apply(t,i)}}),n}(e,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=n,this},e.ChildViewContainer}(t,n),function(e,t){var n=e.Wreqr,i=e.Wreqr={};return e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=n,this},i.Handlers=function(e,t){var n=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,n){var i=null;t.isObject(e)&&!t.isFunction(e)&&(i=e.context,e=e.callback),this.setHandler(n,e,i)},this)},setHandler:function(e,t,n){var i={callback:t,context:n};this._wreqrHandlers[e]=i,this.trigger("handler:add",e,t,n)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];return t?function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}:void 0},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(e,t),i.CommandStorage=function(){var n=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(n.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var n=this.getCommands(e);n.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),n}(),i.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,n)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,n,i){var r=this.storage.getCommands(e);t.each(r.instances,function(e){n.apply(i,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var n,i=e.storageType||this.storageType;n=t.isFunction(i)?new i:i,this.storage=n}})}(i),i.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(i),i.EventAggregator=function(e,t){var n=function(){};return n.extend=e.Model.extend,t.extend(n.prototype,e.Events),n}(e,t),i.Channel=function(){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,n,i){if(n){i=i||this;var r="vent"===e?"on":"setHandler";t.each(n,function(n,o){this[e][r](o,t.bind(n,i))},this)}}}),n}(i),i.radio=function(e){var n=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(n.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var n=this._channels[t];return n||(n=new e.Channel(t),this._channels[t]=n),n},_proxyMethods:function(){t.each(["vent","commands","reqres"],function(e){t.each(i[e],function(t){this[e][t]=r(this,e,t)},this)},this)}});var i={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},r=function(e,t,n){return function(i){var r=e._getChannel(i)[t],o=Array.prototype.slice.call(arguments,1);return r[n].apply(r,o)}};return new n}(i),e.Wreqr}(t,n);var i=e.Marionette,r=t.Marionette={};r.VERSION="2.3.0",r.noConflict=function(){return e.Marionette=i,this},t.Marionette=r,r.Deferred=t.$.Deferred,r.extend=t.Model.extend,r.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},r.getOption=function(e,t){return e&&t?e.options&&void 0!==e.options[t]?e.options[t]:e[t]:void 0},r.proxyGetOption=function(e){return r.getOption(this,e)},r.normalizeMethods=function(e){return n.reduce(e,function(e,t,i){return n.isFunction(t)||(t=this[t]),t&&(e[i]=t),e},{},this)},r.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},r.normalizeUIKeys=function(e,t){return n.reduce(e,function(e,n,i){var o=r.normalizeUIString(i,t);return e[o]=n,e},{})},r.normalizeUIValues=function(e,t){return n.each(e,function(i,o){n.isString(i)&&(e[o]=r.normalizeUIString(i,t))}),e},r.actAsCollection=function(e,t){var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];n.each(i,function(i){e[i]=function(){var e=n.values(n.result(this,t)),r=[e].concat(n.toArray(arguments));return n[i].apply(n,r)}})};var o=r.deprecate=function(e,t){n.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||o._cache[e]||(o._warn("Deprecation warning: "+e),o._cache[e]=!0)};o._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},o._cache={},r._triggerMethod=function(){function e(e,t,n){return n.toUpperCase()}var t=/(^|:)(\w)/gi;return function(i,r,o){var s=arguments.length<3;s&&(o=r,r=o[0]);var a,l="on"+r.replace(t,e),u=i[l];return n.isFunction(u)&&(a=u.apply(i,s?n.rest(o):o)),n.isFunction(i.trigger)&&(s+o.length>1?i.trigger.apply(i,s?o:[r].concat(n.rest(o,0))):i.trigger(r)),a}}(),r.triggerMethod=function(){return r._triggerMethod(this,arguments)},r.triggerMethodOn=function(e){var t=n.isFunction(e.triggerMethod)?e.triggerMethod:r.triggerMethod;return t.apply(e,n.rest(arguments))},r.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,o()}function i(){e._isRendered=!0,o()}function o(){e._isShown&&e._isRendered&&r.isNodeAttached(e.el)&&n.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:i})},function(e){function t(t,i,r,o){var s=o.split(/\s+/);n.each(s,function(n){var o=t[n];if(!o)throw new e.Error('Method "'+n+'" was configured as an event handler, but does not exist.');t.listenTo(i,r,o)})}function i(e,t,n,i){e.listenTo(t,n,i)}function r(e,t,i,r){var o=r.split(/\s+/);
n.each(o,function(n){var r=e[n];e.stopListening(t,i,r)})}function o(e,t,n,i){e.stopListening(t,n,i)}function s(t,i,r,o,s){if(i&&r){if(!n.isFunction(r)&&!n.isObject(r))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});n.isFunction(r)&&(r=r.call(t)),n.each(r,function(e,r){n.isFunction(e)?o(t,i,r,e):s(t,i,r,e)})}}e.bindEntityEvents=function(e,n,r){s(e,n,r,i,t)},e.unbindEntityEvents=function(e,t,n){s(e,t,n,o,r)},e.proxyBindEntityEvents=function(t,n){return e.bindEntityEvents(this,t,n)},e.proxyUnbindEntityEvents=function(t,n){return e.unbindEntityEvents(this,t,n)}}(r);var s=["description","fileName","lineNumber","name","message","number"];return r.Error=r.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+r.VERSION+"/",constructor:function(e,t){n.isObject(e)?(t=e,e=t.message):t||(t={});var i=Error.call(this,e);n.extend(this,n.pick(i,s),n.pick(t,s)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,r.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),r.Error.extend=r.extend,r.Callbacks=function(){this._deferred=r.Deferred(),this._callbacks=[]},n.extend(r.Callbacks.prototype,{add:function(e,t){var i=n.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),i.then(function(n){t&&(n.context=t),e.call(n.context,n.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=r.Deferred(),this._callbacks=[],n.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.options=e||{},n.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,n.extend(r.Controller.prototype,t.Events,{destroy:function(){return r._triggerMethod(this,"before:destroy",arguments),r._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption}),r.Object=function(e){this.options=n.extend({},n.result(this,"options"),e),this.initialize.apply(this,arguments)},r.Object.extend=r.extend,n.extend(r.Object.prototype,t.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:r.triggerMethod,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.Region=r.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new r.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),r.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var n=t||{},i=e!==this.currentView,o=!!n.preventDestroy,s=!!n.forceShow,a=!!this.currentView,l=i&&!o,u=i||s;if(a&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,l?this.empty():a&&u&&this.currentView.off("destroy",this.empty,this),u){e.once("destroy",this.empty,this),e.render(),e._parent=this,a&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),r.triggerMethodOn(e,"before:show",e,this,t),a&&this.triggerMethod("swapOut",this.currentView,this,t);var c=r.isNodeAttached(this.el),h=[],d=n.triggerBeforeAttach||this.triggerBeforeAttach,p=n.triggerAttach||this.triggerAttach;return c&&d&&(h=this._displayedViews(e),this._triggerAttach(h,"before:")),this.attachHtml(e),this.currentView=e,c&&p&&(h=this._displayedViews(e),this._triggerAttach(h)),a&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),r.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var i=(t||"")+"attach";n.each(e,function(e){r.triggerMethodOn(e,i,e,this)},this)},_displayedViews:function(e){return n.union([e],n.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(n.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new r.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new r.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new r.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e)},attachHtml:function(e){this.$el.html(""),this.el.appendChild(e.el)},empty:function(){var e=this.currentView;return e?(e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this):void 0},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(n.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(n.isFunction(e))return this._buildRegionFromRegionClass(e);throw new r.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,i){var r=e.regionClass||i,o=n.omit(e,"selector","regionClass");e.selector&&!o.el&&(o.el=e.selector);var s=new r(o);return e.parentEl&&(s.getEl=function(i){if(n.isObject(i))return t.$(i);var r=e.parentEl;return n.isFunction(r)&&(r=r()),r.find(i)}),s},_buildRegionFromRegionClass:function(e){return new e}}),r.RegionManager=r.Controller.extend({constructor:function(e){this._regions={},r.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){n.isFunction(e)&&(e=e.apply(this,arguments));var i={};return n.each(e,function(e,r){n.isString(e)&&(e={selector:e}),e.selector&&(e=n.defaults({},e,t));var o=this.addRegion(r,e);i[r]=o},this),i},addRegion:function(e,t){var n;return n=t instanceof r.Region?t:r.Region.buildRegion(t,r.Region),this.triggerMethod("before:add:region",e,n),n._parent=this,this._store(e,n),this.triggerMethod("add:region",e,n),n},get:function(e){return this._regions[e]},getRegions:function(){return n.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return n.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return n.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),r.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=n.size(this._regions)}}),r.actAsCollection(r.RegionManager.prototype,"_regions"),r.TemplateCache=function(e){this.templateId=e},n.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=n.toArray(arguments),i=t.length;if(i>0)for(e=0;i>e;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),n.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var n=t.$(e).html();if(!n||0===n.length)throw new r.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return n},compileTemplate:function(e){return n.template(e)}}),r.Renderer={render:function(e,t){if(!e)throw new r.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});var n;return(n="function"==typeof e?e:r.TemplateCache.get(e))(t)}},r.View=t.View.extend({constructor:function(e){n.bindAll(this,"render"),e=n.isFunction(e)?e.call(this):e,this.options=n.extend({},n.result(this,"options"),e),this._behaviors=r.Behaviors(this),t.View.apply(this,arguments),r.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,n.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return n.isFunction(t)&&(t=t.call(this)),n.extend(e,t)},normalizeUIKeys:function(e){var t=n.result(this,"_uiBindings");return r.normalizeUIKeys(e,t||n.result(this,"ui"))},normalizeUIValues:function(e){var t=n.result(this,"ui"),i=n.result(this,"_uiBindings");return r.normalizeUIValues(e,i||t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(n.result(this,"triggers"));return n.reduce(e,function(e,t,n){return e[n]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var i=e||this.events;n.isFunction(i)&&(i=i.call(this)),i=this.normalizeUIKeys(i),n.isUndefined(e)&&(this.events=i);var r={},o=n.result(this,"behaviorEvents")||{},s=this.configureTriggers(),a=n.result(this,"behaviorTriggers")||{};n.extend(r,o,i,s,a),t.View.prototype.delegateEvents.call(this,r)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),n.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new r.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var e=n.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),n.invoke(this._behaviors,"destroy",e),this}},bindUIElements:function(){this._bindUIElements(),n.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(e),function(t){var n=e[t];this.ui[t]=this.$(n)},this)}},unbindUIElements:function(){this._unbindUIElements(),n.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=n.isObject(e),i=n.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),r=t?i.event:e;return function(e){e&&(e.preventDefault&&i.preventDefault&&e.preventDefault(),e.stopPropagation&&i.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(r,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return n.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){for(var e=r._triggerMethod,t=e(this,arguments),n=this._behaviors,i=0,o=n&&n.length;o>i;i++)e(n[i],arguments);return t},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?n.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},normalizeMethods:r.normalizeMethods,getOption:r.proxyGetOption,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.ItemView=r.View.extend({constructor:function(){r.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,n.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(e!==!1){if(!e)throw new r.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var n=r.Renderer.render(e,t,this);return this.attachElContent(n),this}},attachElContent:function(e){return this.$el.html(e),this}}),r.CollectionView=r.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};n.isUndefined(this.sort)&&(this.sort=n.isUndefined(t.sort)?!0:t.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),r.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,n.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){r.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),n=this.collection.indexOf(e);this.addChild(e,t,n)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(n.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){var e=this.collection.find(function(e,t){var n=this.children.findByModel(e);return!n||n._index!==t},this);e&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,n){e=this.getChildView(t),this.addChild(t,e,n)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var n=new t.Model;this.addEmptyView(n,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var i=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");n.isFunction(i)&&(i=i.call(this,e,this._emptyViewIndex));var o=this.buildChildView(e,t,i);o._parent=this,this.proxyChildEvents(o),this._isShown&&r.triggerMethodOn(o,"before:show"),this.children.add(o),this.renderChildView(o,this._emptyViewIndex),this._isShown&&r.triggerMethodOn(o,"show")},getChildView:function(){var e=this.getOption("childView");if(!e)throw new r.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(e,t,i){var r=this.getOption("childViewOptions");n.isFunction(r)&&(r=r.call(this,e,i));var o=this.buildChildView(e,t,r);return this._updateIndices(o,!0,i),this._addChildView(o,i),o._parent=this,o},_updateIndices:function(e,t,n){this.sort&&(t?(e._index=n,this.children.each(function(t){t._index>=e._index&&t._index++})):this.children.each(function(t){t._index>=e._index&&t._index--}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&r.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,i){var r=n.extend({model:e},i);return new t(r)},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,n){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,n)||e._insertAfter(t)},_insertBefore:function(e,t){var n,i=this.sort&&t<this.children.length-1;return i&&(n=this.children.find(function(e){return e._index===t+1})),n?(n.$el.before(e.el),!0):!1},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){return this.isDestroyed?void 0:(this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),r.View.prototype.destroy.apply(this,arguments))},destroyChildren:function(){var e=this.children.map(n.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var i=n.toArray(arguments),r=i[0],o=this.normalizeMethods(n.result(this,"childEvents"));i[0]=t+":"+r,i.splice(1,0,e),"undefined"!=typeof o&&n.isFunction(o[r])&&o[r].apply(this,i.slice(1)),this.triggerMethod.apply(this,i)},this)},_getImmediateChildren:function(){return n.values(this.children._views)}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(){var e=this.getOption("childView")||this.constructor;return e},serializeData:function(){var e={};return this.model&&(e=n.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&r.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),n=r.Renderer.render(t,e,this);this.attachElContent(n),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){var n=this.getChildViewContainer(e);n.append(t)},_insertAfter:function(e){var t=this.getChildViewContainer(this,e);t.append(e.el)},getChildViewContainer:function(e){if("$childViewContainer"in e)return e.$childViewContainer;var t,i=r.getOption(e,"childViewContainer");if(i){var o=n.isFunction(i)?i.call(e):i;if(t="@"===o.charAt(0)&&e.ui?e.ui[o.substr(4)]:e.$(o),t.length<=0)throw new r.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else t=e.$el;return e.$childViewContainer=t,t},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),r.LayoutView=r.ItemView.extend({regionClass:r.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),r.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),r.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){var n={};return n[e]=t,this._buildRegions(n)[e]},addRegions:function(e){return this.regions=n.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:n.partial(n.result,this,"$el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=n.isFunction(this.regions)?this.regions(e):this.regions||{};var i=this.getOption.call(e,"regions");n.isFunction(i)&&(i=i.call(this,e)),n.extend(t,i),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new r.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return n.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),r.Behavior=r.Object.extend({constructor:function(e,t){this.view=t,this.defaults=n.result(this,"defaults")||{},this.options=n.extend({},this.defaults,e),r.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),r.Behaviors=function(e,t){function n(e,i){return t.isObject(e.behaviors)?(i=n.parseBehaviors(e,i||t.result(e,"behaviors")),n.wrap(e,i,t.keys(r)),i):{}}function i(e,n){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=n,this._triggers={}}var r={behaviorTriggers:function(e,t){var n=new i(this,t);return n.buildBehaviorTriggers()},behaviorEvents:function(n,i){var r={},o=t.result(this,"ui");return t.each(i,function(n,i){var s={},a=t.clone(t.result(n,"events"))||{},l=t.result(n,"ui"),u=t.extend({},o,l);a=e.normalizeUIKeys(a,u),t.each(t.keys(a),function(e){var r=new Array(i+2).join(" "),o=e+r,l=t.isFunction(a[e])?a[e]:n[a[e]];s[o]=t.bind(l,n)}),r=t.extend(r,s)}),r}};return t.extend(n,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,i){return e.behaviorClass?e.behaviorClass:t.isFunction(n.behaviorsLookup)?n.behaviorsLookup.apply(this,arguments)[i]:n.behaviorsLookup[i]},parseBehaviors:function(e,i){return t.chain(i).map(function(i,r){var o=n.getBehaviorClass(i,r),s=new o(i,e),a=n.parseBehaviors(e,t.result(s,"behaviors"));return[s].concat(a)}).flatten().value()},wrap:function(e,n,i){t.each(i,function(i){e[i]=t.partial(r[i],e[i],n)})}}),t.extend(i.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(n,i){var r=t.extend({},this._viewUI,t.result(n,"ui")),o=t.clone(t.result(n,"triggers"))||{};o=e.normalizeUIKeys(o,r),t.each(o,t.partial(this._setHandlerForBehavior,n,i),this)},_setHandlerForBehavior:function(e,t,n,i){var r=i.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[r]=this._view._buildViewTrigger(n)}}),n}(r,n),r.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var n=this.getOption("appRoutes"),i=this._getController();this.processAppRoutes(i,n),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var n=this._getController();this._addAppRoute(n,e,t)},_processOnRoute:function(e,t){if(n.isFunction(this.onRoute)){var i=n.invert(this.getOption("appRoutes"))[e];this.onRoute(e,i,t)}},processAppRoutes:function(e,t){if(t){var i=n.keys(t).reverse();n.each(i,function(n){this._addAppRoute(e,n,t[n])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,i){var o=e[i];if(!o)throw new r.Error('Method "'+i+'" was not found on the controller');this.route(t,i,n.bind(o,e))},getOption:r.proxyGetOption,triggerMethod:r.triggerMethod,bindEntityEvents:r.proxyBindEntityEvents,unbindEntityEvents:r.proxyUnbindEntityEvents}),r.Application=r.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new r.Callbacks,this.submodules={},n.extend(this,e),this._initChannel(),r.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var i=r.Module.getClass(t),o=n.toArray(arguments);return o.unshift(this),i.create.apply(i,o)},getRegionManager:function(){return new r.RegionManager},_initializeRegions:function(e){var t=n.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var i=r.getOption(e,"regions");return n.isFunction(i)&&(i=i.call(this,e)),n.extend(t,i),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){r._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,r._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){r._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],r._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=n.result(this,"channelName")||"global",this.channel=n.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=n.result(this,"vent")||this.channel.vent,this.commands=n.result(this,"commands")||this.channel.commands,this.reqres=n.result(this,"reqres")||this.channel.reqres}}),r.Module=function(e,t,i){this.moduleName=e,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,n.isFunction(this.initialize)&&this.initialize(e,t,this.options)},r.Module.extend=r.extend,n.extend(r.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(n.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),n.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,i){if(e){var o=n.flatten([this,this.app,t,r,t.$,n,i]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks},triggerMethod:r.triggerMethod}),n.extend(r.Module,{create:function(e,t,i){var r=e,o=n.rest(arguments,3);t=t.split(".");var s=t.length,a=[];return a[s-1]=i,n.each(t,function(t,n){var s=r;r=this._getModule(s,t,e,i),this._addModuleDefinition(s,r,a[n],o)},this),r},_getModule:function(e,t,i,r){var o=n.extend({},r),s=this.getClass(r),a=e[t];return a||(a=new s(t,i,o),e[t]=a,e.submodules[t]=a),a},getClass:function(e){var t=r.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,n,i){var r=this._getDefine(n),o=this._getStartWithParent(n,t);r&&t.addDefinition(r,i),this._addStartWithParent(e,t,o)},_getStartWithParent:function(e,t){var i;return n.isFunction(e)&&e.prototype instanceof r.Module?(i=t.constructor.prototype.startWithParent,n.isUndefined(i)?!0:i):n.isObject(e)?(i=e.startWithParent,n.isUndefined(i)?!0:i):!0},_getDefine:function(e){return!n.isFunction(e)||e.prototype instanceof r.Module?n.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,n){t.startWithParent=t.startWithParent&&n,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r});var Handlebars={};!function(e,t){e.VERSION="1.0.0",e.COMPILER_REVISION=4,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},e.helpers={},e.partials={};var n=Object.prototype.toString,i="[object Function]",r="[object Object]";e.registerHelper=function(t,i,o){if(n.call(t)===r){if(o||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else o&&(i.not=o),this.helpers[t]=i},e.registerPartial=function(t,i){n.call(t)===r?e.Utils.extend(this.partials,t):this.partials[t]=i},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw new Error("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,r){var o=r.inverse||function(){},s=r.fn,a=n.call(t);
return a===i&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?o(this):"[object Array]"===a?t.length>0?e.helpers.each(t,r):o(this):s(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var i=e.logger.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,r){var o,s=r.fn,a=r.inverse,l=0,u="",c=n.call(t);if(c===i&&(t=t.call(this)),r.data&&(o=e.createFrame(r.data)),t&&"object"==typeof t)if(t instanceof Array)for(var h=t.length;h>l;l++)o&&(o.index=l),u+=s(t[l],{data:o});else for(var d in t)t.hasOwnProperty(d)&&(o&&(o.key=d),u+=s(t[d],{data:o}),l++);return 0===l&&(u=a(this)),u}),e.registerHelper("if",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?r.inverse(this):r.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(t,r){var o=n.call(t);return o===i&&(t=t.call(this)),e.Utils.isEmpty(t)?void 0:r.fn(t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)});var o=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;t<o.length;t++)this[o[t]]=e[o[t]]},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},a=/[&<>"'`]/g,l=/[&<>"'`]/,u=function(e){return s[e]||"&amp;"};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":(t=t.toString(),l.test(t)?t.replace(a,u):t)},isEmpty:function(e){return e||0===e?"[object Array]"===n.call(e)&&0===e.length?!0:!1:!0}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var r=this.programs[t];return i?r=e.VM.program(t,n,i):r||(r=this.programs[t]=e.VM.program(t,n)),r},merge:function(t,n){var i=t||n;return t&&n&&(i={},e.Utils.extend(i,n),e.Utils.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,r){r=r||{};var o=t.call(n,e,i,r.helpers,r.partials,r.data),s=n.compilerInfo||[],a=s[0]||1,l=e.COMPILER_REVISION;if(a!==l){if(l>a){var u=e.REVISION_CHANGES[l],c=e.REVISION_CHANGES[a];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+u+") or downgrade your runtime to an older version ("+c+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+s[1]+")."}return o}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(i))};return r.program=e,r.depth=i.length,r},program:function(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,r,o,s,a){var l={helpers:o,partials:s,data:a};if(n===t)throw new e.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(r,l);if(e.compile)return s[i]=e.compile(n,{data:a!==t}),s[i](r,l);throw new e.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template}(Handlebars),define("handlebars-compiler",function(){}),define("hbs",["handlebars"],function(e){e=e||this.Handlebars;var t=".hbs";return{pluginBuilder:"./hbs-builder",load:function(n,i,r,o){var s=o.hbs&&o.hbs.templateExtension?o.hbs.templateExtension:t;i(["text!"+n+s],function(t){r(e.compile(t))})}}}),!function(e,t){"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?module.exports=t():e.Handlebars=e.Handlebars||t()}(this,function(){var e=function(){function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){function t(e){return l[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e){return e instanceof a?e.toString():null==e?"":e?(e=""+e,c.test(e)?e.replace(u,t):e):e+""}function r(e){return e||0===e?p(e)&&0===e.length?!0:!1:!0}function o(e,t){return(e?e+".":"")+t}var s={},a=e,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;s.extend=n;var h=Object.prototype.toString;s.toString=h;var d=function(e){return"function"==typeof e};d(/x/)&&(d=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var d;s.isFunction=d;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};return s.isArray=p,s.escapeExpression=i,s.isEmpty=r,s.appendContextPath=o,s}(e),n=function(){function e(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=r[n[o]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,t=e}(),i=function(e,t){function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new s("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(t===!0)return r(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=g(n.data);s.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:s}}return r(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new s("Must pass iterator to #each");var n,i,r=t.fn,a=t.inverse,l=0,u="";if(t.data&&t.ids&&(i=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),h(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(c(e))for(var d=e.length;d>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,i&&(n.contextPath=i+l)),u+=r(e[l],{data:n});else for(var p in e)e.hasOwnProperty(p)&&(n&&(n.key=p,n.index=l,n.first=0===l,i&&(n.contextPath=i+p)),u+=r(e[p],{data:n}),l++);return 0===l&&(u=a(this)),u}),e.registerHelper("if",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){h(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=g(t.data);i.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var r={},o=e,s=t,a="2.0.0";r.VERSION=a;var l=6;r.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};r.REVISION_CHANGES=u;var c=o.isArray,h=o.isFunction,d=o.toString,p="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:f,log:m,registerHelper:function(e,t){if(d.call(e)===p){if(t)throw new s("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){d.call(e)===p?o.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};r.logger=f;var m=f.log;r.log=m;var g=function(e){var t=o.extend({},e);return t._parent=e,t};return r.createFrame=g,r}(t,n),r=function(e,t,n){function i(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var i=p[n],r=p[t];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new h("No environment passed to template");if(!e||!e.main)throw new h("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,r,o,s,a,l,u,d){s&&(o=c.extend({},o,s));var p=t.VM.invokePartial.call(this,n,r,o,a,l,u,d);if(null==p&&t.compile){var f={helpers:a,partials:l,data:u,depths:d};l[r]=t.compile(n,{data:void 0!==u,compat:e.compat},t),p=l[r](o,f)}if(null!=p){if(i){for(var m=p.split("\n"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=i+m[g];p=m.join("\n")}return p}throw new h("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],r=this.fn(e);return t||n?i=o(this,e,r,t,n):i||(i=this.programs[e]=o(this,e,r)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},r=function(t,n){n=n||{};var o=n.data;r._setup(n),!n.partial&&e.useData&&(o=l(t,o));var s;return e.useDepths&&(s=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,s)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r){if(e.useDepths&&!r)throw new h("must pass parent depths");return o(i,t,e[t],n,r)},r}function o(e,t,n,i,r){var o=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||i,r&&[t].concat(r))};return o.program=t,o.depth=r?r.length:0,o}function s(e,t,n,i,r,o,s){var a={partial:!0,helpers:i,partials:r,data:o,depths:s};if(void 0===e)throw new h("The partial "+t+" could not be found");return e instanceof Function?e(n,a):void 0}function a(){return""}function l(e,t){return t&&"root"in t||(t=t?f(t):{},t.root=e),t}var u={},c=e,h=t,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES,f=n.createFrame;return u.checkRevision=i,u.template=r,u.program=o,u.invokePartial=s,u.noop=a,u}(t,n,i),o=function(e,t,n,i,r){var o,s=e,a=t,l=n,u=i,c=r,h=function(){var e=new s.HandlebarsEnvironment;return u.extend(e,s),e.SafeString=a,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=h();return d.create=h,d["default"]=d,o=d}(i,e,n,t,r),s=function(e){function t(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n,i=e,r={ProgramNode:function(e,n,i){t.call(this,i),this.type="program",this.statements=e,this.strip=n},MustacheNode:function(e,n,i,o,s){if(t.call(this,s),this.type="mustache",this.strip=o,null!=i&&i.charAt){var a=i.charAt(3)||i.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!i;this.sexpr=e instanceof r.SexprNode?e:new r.SexprNode(e,n),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,n,i){t.call(this,i),this.type="sexpr",this.hash=n;var r=this.id=e[0],o=this.params=e.slice(1);this.isHelper=!(!o.length&&!n),this.eligibleHelper=this.isHelper||r.isSimple},PartialNode:function(e,n,i,r,o){t.call(this,o),this.type="partial",this.partialName=e,this.context=n,this.hash=i,this.strip=r,this.strip.inlineStandalone=!0},BlockNode:function(e,n,i,r,o){t.call(this,o),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.strip=r,i&&!n&&(this.isInverse=!0)},RawBlockNode:function(e,n,o,s){if(t.call(this,s),e.sexpr.id.original!==o)throw new i(e.sexpr.id.original+" doesn't match "+o,this);n=new r.ContentNode(n,s),this.type="block",this.mustache=e,this.program=new r.ProgramNode([n],{},s)},ContentNode:function(e,n){t.call(this,n),this.type="content",this.original=this.string=e},HashNode:function(e,n){t.call(this,n),this.type="hash",this.pairs=e},IdNode:function(e,n){t.call(this,n),this.type="ID";for(var r="",o=[],s=0,a="",l=0,u=e.length;u>l;l++){var c=e[l].part;if(r+=(e[l].separator||"")+c,".."===c||"."===c||"this"===c){if(o.length>0)throw new i("Invalid path: "+r,this);".."===c?(s++,a+="../"):this.isScoped=!0}else o.push(c)}this.original=r,this.parts=o,this.string=o.join("."),this.depth=s,this.idName=a+this.string,this.isSimple=1===e.length&&!this.isScoped&&0===s,this.stringModeValue=this.string},PartialNameNode:function(e,n){t.call(this,n),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,n){t.call(this,n),this.type="DATA",this.id=e,this.stringModeValue=e.stringModeValue,this.idName="@"+e.stringModeValue},StringNode:function(e,n){t.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=e},NumberNode:function(e,n){t.call(this,n),this.type="NUMBER",this.original=this.number=e,this.stringModeValue=Number(e)},BooleanNode:function(e,n){t.call(this,n),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,n){t.call(this,n),this.type="comment",this.comment=e,this.strip={inlineStandalone:!0}}};return n=r}(n),a=function(){var e,t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 1:return i.prepareProgram(o[s-1].statements,!0),o[s-1];case 2:this.$=new i.ProgramNode(i.prepareProgram(o[s]),{},this._$);break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=new i.ContentNode(o[s],this._$);break;case 8:this.$=new i.CommentNode(o[s],this._$);break;case 9:this.$=new i.RawBlockNode(o[s-2],o[s-1],o[s],this._$);break;case 10:this.$=new i.MustacheNode(o[s-1],null,"","",this._$);break;case 11:this.$=i.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 12:this.$=i.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 13:this.$=new i.MustacheNode(o[s-1],null,o[s-2],i.stripFlags(o[s-2],o[s]),this._$);break;case 14:this.$=new i.MustacheNode(o[s-1],null,o[s-2],i.stripFlags(o[s-2],o[s]),this._$);break;case 15:this.$={strip:i.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 16:this.$={path:o[s-1],strip:i.stripFlags(o[s-2],o[s])};break;case 17:this.$=new i.MustacheNode(o[s-1],null,o[s-2],i.stripFlags(o[s-2],o[s]),this._$);break;case 18:this.$=new i.MustacheNode(o[s-1],null,o[s-2],i.stripFlags(o[s-2],o[s]),this._$);break;case 19:this.$=new i.PartialNode(o[s-3],o[s-2],o[s-1],i.stripFlags(o[s-4],o[s]),this._$);break;case 20:this.$=new i.PartialNode(o[s-2],void 0,o[s-1],i.stripFlags(o[s-3],o[s]),this._$);break;case 21:this.$=new i.SexprNode([o[s-2]].concat(o[s-1]),o[s],this._$);break;case 22:this.$=new i.SexprNode([o[s]],null,this._$);break;case 23:this.$=o[s];break;case 24:this.$=new i.StringNode(o[s],this._$);break;case 25:this.$=new i.NumberNode(o[s],this._$);break;case 26:this.$=new i.BooleanNode(o[s],this._$);break;case 27:this.$=o[s];break;case 28:o[s-1].isHelper=!0,this.$=o[s-1];break;case 29:this.$=new i.HashNode(o[s],this._$);break;case 30:this.$=[o[s-2],o[s]];break;case 31:this.$=new i.PartialNameNode(o[s],this._$);break;case 32:this.$=new i.PartialNameNode(new i.StringNode(o[s],this._$),this._$);break;case 33:this.$=new i.PartialNameNode(new i.NumberNode(o[s],this._$));break;case 34:this.$=new i.DataNode(o[s],this._$);break;case 35:this.$=new i.IdNode(o[s],this._$);break;case 36:o[s-2].push({part:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 37:this.$=[{part:o[s]}];break;case 38:this.$=[];break;case 39:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 52:this.$=[o[s]];break;case 53:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,w,x,_={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=t()),g=s[m]&&s[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!c){x=[];for(y in s[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],_.$=r[r.length-b],_._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(_._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,a,u,l,this.yy,g[1],r,o),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(_.$),o.push(_._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;s<o.length&&(n=this._input.match(this.rules[o[s]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=s,this.options.flex));s++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),15;case 4:return 12;case 5:return i(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return i(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return t.yytext=i(1,2).replace(/\\"/g,'"'),42;case 30:return t.yytext=i(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return t.yytext=i(1,2),50;case 37:return"INVALID";case 38:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();return e=t}(),l=function(e){function t(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(t.length-3)}}function n(e,t,n,i,l,c){if(e.sexpr.id.original!==i.path.original)throw new u(e.sexpr.id.original+" doesn't match "+i.path.original,e);
var h=n&&n.program,d={left:e.strip.left,right:i.strip.right,openStandalone:o(t.statements),closeStandalone:r((h||t).statements)};if(e.strip.right&&s(t.statements,null,!0),h){var p=n.strip;p.left&&a(t.statements,null,!0),p.right&&s(h.statements,null,!0),i.strip.left&&a(h.statements,null,!0),r(t.statements)&&o(h.statements)&&(a(t.statements),s(h.statements))}else i.strip.left&&a(t.statements,null,!0);return l?new this.BlockNode(e,h,t,d,c):new this.BlockNode(e,t,h,d,c)}function i(e,t){for(var n=0,i=e.length;i>n;n++){var l=e[n],u=l.strip;if(u){var c=r(e,n,t,"partial"===l.type),h=o(e,n,t),d=u.openStandalone&&c,p=u.closeStandalone&&h,f=u.inlineStandalone&&c&&h;u.right&&s(e,n,!0),u.left&&a(e,n,!0),f&&(s(e,n),a(e,n)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(e[n-1].original)?RegExp.$1:"")),d&&(s((l.program||l.inverse).statements),a(e,n)),p&&(s(e,n),a((l.inverse||l.program).statements))}}return e}function r(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],r=e[t-2];return i?"content"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function o(e,t,n){void 0===t&&(t=-1);var i=e[t+1],r=e[t+2];return i?"content"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function s(e,t,n){var i=e[null==t?0:t+1];if(i&&"content"===i.type&&(n||!i.rightStripped)){var r=i.string;i.string=i.string.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.string!==r}}function a(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"content"===i.type&&(n||!i.leftStripped)){var r=i.string;return i.string=i.string.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.string!==r,i.leftStripped}}var l={},u=e;return l.stripFlags=t,l.prepareBlock=n,l.prepareProgram=i,l}(n),u=function(e,t,n,i){function r(e){return e.constructor===a.ProgramNode?e:(s.yy=c,s.parse(e))}var o={},s=e,a=t,l=n,u=i.extend;o.parser=s;var c={};return u(c,l,a),o.parse=r,o}(a,s,l,t),c=function(e,t){function n(){}function i(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i=n.parse(e),r=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(r,t)}function r(e,t,n){function i(){var i=n.parse(e),r=(new n.Compiler).compile(i,t),o=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(o)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var r,o=function(e,t){return r||(r=i()),r.call(this,e,t)};return o._setup=function(e){return r||(r=i()),r._setup(e)},o._child=function(e,t,n){return r||(r=i()),r._child(e,t,n)},o}function o(e,t){if(e===t)return!0;if(l(e)&&l(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}}var s={},a=e,l=t.isArray,u=[].slice;return s.Compiler=n,n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||!o(i.args,r.args))return!1}for(t=this.children.length,n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){return this[e.type](e)},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)t=n.depths.list[r],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=t.sexpr,o=this.classifySexpr(r);"helper"===o?this.helperSexpr(r,n,i):"simple"===o?(this.simpleSexpr(r),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",r.id.original)):(this.ambiguousSexpr(r,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;for(this.opcode("pushHash"),t=0,n=i.length;n>t;t++)this.pushParam(i[t][1]);for(;t--;)this.opcode("assignToHash",i[t][0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.hash?this.accept(e.hash):this.opcode("push","undefined"),e.context?this.accept(e.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",t.name,e.indent||""),this.opcode("append")},content:function(e){e.string&&this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,n){var i=e.id,r=i.parts[0],o=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.ID(i),this.opcode("invokeAmbiguous",r,o)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),r=e.id,o=r.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+o,e);r.falsy=!0,this.ID(r),this.opcode("invokeHelper",i.length,r.original,r.isSimple)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts,e.falsy,e.isScoped):this.opcode("pushContext")},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id.depth,e.id.parts)},STRING:function(e){this.opcode("pushString",e.string)},NUMBER:function(e){this.opcode("pushLiteral",e.number)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:u.call(arguments,1)})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var r=e.id.parts[0];i.knownHelpers[r]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;n>t;t++)this.pushParam(e[t])},pushParam:function(e){this.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):(this.trackIds&&this.opcode("pushId",e.type,e.idName||e.stringModeValue),this.accept(e))},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},s.precompile=i,s.compile=r,s}(n,t),h=function(e,t){function n(e){this.value=e}function i(){}var r,o=e.COMPILER_REVISION,s=e.REVISION_CHANGES,a=t;i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},depthedLookup:function(e){return this.aliases.lookup="this.lookup",'lookup(depths, "'+e+'")'},compilerInfo:function(){var e=o,t=s[e];return[e,t]},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.depths.list.length||this.options.compat;var r,o,s,l=e.opcodes;for(o=0,s=l.length;s>o;o++)r=l[o],this[r.opcode].apply(this,r.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var u=this.createFunctionContext(i);if(this.isChild)return u;var c={compiler:this.compilerInfo(),main:u},h=this.context.programs;for(o=0,s=h.length;s>o;o++)h[o]&&(c[o]=h[o]);return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.options.compat&&(c.compat=!0),i||(c.compiler=JSON.stringify(c.compiler),c=this.objectLiteral(c)),c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(e){var t="",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=", "+n.join(", "));for(var i in this.aliases)this.aliases.hasOwnProperty(i)&&(t+=", "+i+"="+this.aliases[i]);var r=["depth0","helpers","partials","data"];this.useDepths&&r.push("depths");var o=this.mergeSource(t);return e?(r.push(o),Function.apply(this,r)):"function("+r.join(",")+") {\n  "+o+"}"},mergeSource:function(e){for(var t,n,i="",r=!this.forceBuffer,o=0,s=this.source.length;s>o;o++){var a=this.source[o];a.appendToBuffer?t=t?t+"\n    + "+a.content:a.content:(t&&(i?i+="buffer += "+t+";\n  ":(n=!0,i=t+";\n  "),t=void 0),i+=a+"\n  ",this.environment.isSimple||(r=!1))}return r?(t||!i)&&(i+="return "+(t||'""')+";\n"):(e+=", buffer = "+(n?"":this.initializeBuffer()),i+=t?"return buffer + "+t+";\n":"return buffer;\n"),e&&(i="var "+e.substring(2)+(n?"":";\n  ")+i),i},blockValue:function(e){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams(e,0,t);var n=this.popStack();t.splice(1,0,n),this.push("blockHelperMissing.call("+t.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams("",0,e,!0),this.flushInline();var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.pendingContent=e},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if ("+e+" != null) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var i=0,r=e.length;for(n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++]));r>i;i++)this.replaceStack(function(n){var r=this.nameLookup(n,e[i],"context");return t?" && "+r:" != null ? "+r+" : "+n})},lookupData:function(e,t){this.pushStackLiteral(e?"this.data(data, "+e+")":"data");for(var n=t.length,i=0;n>i;i++)this.replaceStack(function(e){return" && "+this.nameLookup(e,t[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+e.ids.join(",")+"}"),this.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.aliases.helperMissing="helpers.helperMissing";var i=this.popStack(),r=this.setupHelper(e,t),o=(n?r.name+" || ":"")+i+" || helperMissing";this.push("(("+o+").call("+r.callParams+"))")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper");this.push("((helper = (helper = "+r+" || "+n+") != null ? helper : helperMissing"+(i.paramsInit?"),("+i.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+i.callParams+") : helper))")},invokePartial:function(e,t){var n=[this.nameLookup("partials",e,"partial"),"'"+t+"'","'"+e+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?n.push("data"):this.options.compat&&n.push("undefined"),this.options.compat&&n.push("depths"),this.push("this.invokePartial("+n.join(", ")+")")},assignToHash:function(e){var t,n,i,r=this.popStack();this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),t=this.popStack());var o=this.hash;t&&o.contexts.push("'"+e+"': "+t),n&&o.types.push("'"+e+"': "+n),i&&o.ids.push("'"+e+"': "+i),o.values.push("'"+e+"': ("+r+")")},pushId:function(e,t){"ID"===e||"DATA"===e?this.pushString(t):this.pushStackLiteral("sexpr"===e?"true":"null")},compiler:i,compileChildren:function(e,t){for(var n,i,r=e.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,t,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||i.useDepths):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=(t.depths.list,this.useDepths),i=[t.index,"data"];return n&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,i,r,o="";if(this.isInline(),!this.isInline())throw new a("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof n)o=t=s.value,r=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();o="("+this.push(l)+" = "+s+")",t=this.topStack()}var u=e.call(this,t);r||this.popStack(),i&&this.stackSlot--,this.push("("+o+u+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var r=e[t];r instanceof n?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(this.quotedString(n)+":"+e[n]);return"{"+t.join(",")+"}"},setupHelper:function(e,t,n){var i=[],r=this.setupParams(t,e,i,n),o=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:r,name:o,callParams:[this.contextName(0)].concat(i).join(", ")}},setupOptions:function(e,t,n){var i,r,o,s={},a=[],l=[],u=[];s.name=this.quotedString(e),s.hash=this.popStack(),this.trackIds&&(s.hashIds=this.popStack()),this.stringParams&&(s.hashTypes=this.popStack(),s.hashContexts=this.popStack()),r=this.popStack(),o=this.popStack(),(o||r)&&(o||(o="this.noop"),r||(r="this.noop"),s.fn=o,s.inverse=r);for(var c=t;c--;)i=this.popStack(),n[c]=i,this.trackIds&&(u[c]=this.popStack()),this.stringParams&&(l[c]=this.popStack(),a[c]=this.popStack());return this.trackIds&&(s.ids="["+u.join(",")+"]"),this.stringParams&&(s.types="["+l.join(",")+"]",s.contexts="["+a.join(",")+"]"),this.options.data&&(s.data="data"),s},setupParams:function(e,t,n,i){var r=this.objectLiteral(this.setupOptions(e,t,n));return i?(this.useRegister("options"),n.push("options"),"options="+r):(n.push(r),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),u=i.RESERVED_WORDS={},c=0,h=l.length;h>c;c++)u[l[c]]=!0;return i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},r=i}(i,n),d=function(e,t,n,i,r){var o,s=e,a=t,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=r,f=s.create,m=function(){var e=f();return e.compile=function(t,n){return h(t,n,e)},e.precompile=function(t,n){return d(t,n,e)},e.AST=a,e.Compiler=c,e.JavaScriptCompiler=p,e.Parser=l,e.parse=u,e};return s=m(),s.create=m,s["default"]=s,o=s}(o,s,u,c,h);return d}),define("hbs!html/landing",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="icon-container">\n    <div class="icon"><i class="icon-emo-thumbsup"></i></div>\n    <div class="title">Epsilon</div>\n</div>\n<div class="buttons double">\n    <div class="button bold touch-color dark-button sign-in">Sign In</div>\n    <div class="button bold touch-color light-button register">Register</div>\n</div>'},useData:!0})}),define("util/click",["require","underscore"],function(e){var t=e("underscore"),n={single:function(e){return t.debounce(e,1500,!0)}};return n}),define("util/analytics",["require","../config"],function(e){var t=e("../config"),n={};return n.initialize=function(){window.analytics.startTrackerWithId(t.google.analytics_key)},n.setUserId=function(e){window.analytics.setUserId(e)},n.trackError=function(e){window.analytics.trackException(e,!1)},n.trackView=function(e){window.analytics.trackView(e)},n}),define("event-bus",[],function(){var e=function(e){e=e||{};var t=this,n={};if(this.off=function(e,i){if(n[e])for(var r=0;r<n[e].length;r++)n[e][r].cb===i&&n[e].splice(r,1);return t},this.on=function(e,i,r){return n[e]||(n[e]=[]),n[e].push({cb:i,context:r}),t},this.trigger=function(t,i,r){return(n[t]||[]).forEach(function(n){n.cb.call(n.context||r||e.context,i,t)}),i},this.notify=function(e,n,i){return setTimeout(function(){t.trigger(e,n,i)},0),this},e.extend)for(var i in this)e.extend[i]=this[i]};return e}),define("util/vent",["require","event-bus"],function(e){var t=e("event-bus");return new t}),define("view/landing",["require","marionette","hbs!../html/landing","../util/click","../util/analytics","../util/vent"],function(e){var t=e("marionette"),n=e("hbs!../html/landing"),i=e("../util/click"),r=e("../util/analytics"),o=e("../util/vent"),s=t.LayoutView.extend({tagName:"div",template:n,events:{"click .register":"goToRegister","click .sign-in":"goToSignIn"},onDomRefresh:function(){r.trackView("Landing")},goToRegister:i.single(function(){o.trigger("navigate","register")}),goToSignIn:i.single(function(){o.trigger("navigate","sign-in")}),onBack:function(){navigator.app.exitApp()}});return s}),define("hbs!html/sign-in",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="form">\n    <div class="input-container single">\n        <input type="text" data-validationrules="mandatory emailaddress" class="field emailaddress" placeholder="Email Address"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="input-container single">\n        <input type="password" data-validationrules="mandatory" class="field password" placeholder="Password"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="right">\n        <div class="text-and-icon-button forgotten-password touch-color">\n            <span class="text">Forgotten Password</span>\n        </div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button sign-in">Sign In</div>\n</div>'},useData:!0})}),define("util/validation/name-validator",[],function(){var e={validate:function(e){return 0===e.trim().length?"mandatory":e.trim().length<2?"too_short":e.trim().length>20?"too_long":void 0}};return e}),define("util/validation/verificationcode-validator",[],function(){var e={validate:function(e){return/^\d{3}$/.test(e)?void 0:"invalid_verification_code"}};return e}),define("util/validation/password-validator",[],function(){var e={validate:function(e){var t=/[a-z]/i.test(e),n=/[0-9]/g.test(e),i=/[A-Z]/.test(e),r=/[a-z]/.test(e);return t&&n&&i&&r?void 0:"too_weak"}};return e}),define("util/validation/password-validator",[],function(){var e={validate:function(e){var t=/((7|447|07)\d{9}$)/;return t.test(e)?void 0:"invalid_mobile"}};return e}),define("util/validation/mobilenumber-validator",function(){}),define("util/validation/mandatory-validator",[],function(){var e={validate:function(e){return e&&0!==e.trim().length?void 0:"mandatory"}};return e}),define("util/validation/email-validator",[],function(){var e={validate:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g;return t.test(e)?void 0:"invalid_email"}};return e}),define("util/validator",["require","util/validation/name-validator","util/validation/verificationcode-validator","util/validation/password-validator","util/validation/mobilenumber-validator","util/validation/mandatory-validator","util/validation/email-validator"],function(e){var t=e("util/validation/name-validator"),n=e("util/validation/verificationcode-validator"),i=e("util/validation/password-validator"),r=e("util/validation/mobilenumber-validator"),o=e("util/validation/mandatory-validator"),s=e("util/validation/email-validator"),a={validateFields:function(e){var t=this,n=e.filter(function(){return!t.validateField($(this))});return 0===n.length},validateField:function(e){var t=this,n=e.data("validationrules").split(" "),i=n.map(function(t){if(l[t]){var n=e.val();return l[t].validate(n)}}).filter(function(e){return e});return i.length>0?t.addError(e,i[0]):t.removeError(e),0===i.length},addError:function(e,t){e.parent().addClass("error").find(".error-text").html(u[t])},removeError:function(e){e.parent().removeClass("error").find(".error-text").html("")}},l={mandatory:o,password:i,emailaddress:s,mobilenumber:r,name:t,verificationcode:n},u={too_short:"Too Short",too_long:"Too Long",too_weak:"Too Weak",invalid_email:"Invalid Email",invalid_mobile:"Invalid Mobile",mandatory:"Required",already_registered:"Already<br/>Registered",invalid_credentials:"Invalid<br/>Credentials",invalid_verification_code:"Invalid Code"};return a}),define("util/uri",[],function(){var e={};return e.resolvePath=function(e){return e.substring(e.indexOf("/",e.lastIndexOf(":")))},e}),define("text",["module"],function(e){var t,n,i,r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),h=u&&location.hostname,d=u&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(i){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,s,a,l=t.xdRegExp.exec(e);return l?(o=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,f.isBuild&&(p[e]=i),r(i)},load:function(e,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();f.isBuild=r&&r.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!u||l(a,c,h,d)?t.get(a,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(p.hasOwnProperty(n)){var r=t.jsEscape(p[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,u=i.toUrl(s.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return r(u,e)};n.asModule=function(e,t){return r.asModule(e,u,t)},t.write(e,l,n,o)},o)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}catch(o){i&&i(o)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,r){var o,s=t.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);f.onXhr&&f.onXhr(s,e),s.onreadystatechange=function(){var t,r;4===s.readyState&&(t=s.status||0,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=s,i&&i(r)):n(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,e))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,a,l={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(u){throw new Error((a&&a.path||"")+": "+u)}}),t}),define("text!mocks/register.response.json",[],function(){return'{\n  "user": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "verified": false,\n    "firstName": "Shane",\n    "surname": "Gibson",\n    "emailAddress": "shane.a.gibson@gmail.com",\n    "mobileNumber": "07920053773",\n    "inviteCode": "LJ51IL"\n  },\n  "session": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "deviceId": "abc123"\n  }\n}'}),define("text!mocks/verification-code.response.json",[],function(){return"{ }"}),define("text!mocks/sign-in.response.json",[],function(){return'{\n  "user": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "verified": true,\n    "firstName": "Shane",\n    "surname": "Gibson",\n    "emailAddress": "shane.a.gibson@gmail.com",\n    "mobileNumber": "07920053773",\n    "inviteCode": "LJ51IL"\n  },\n  "session": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "deviceId": "abc123"\n  }\n}'}),define("text!mocks/sign-out.response.json",[],function(){return"{ }"}),define("text!mocks/session.response.json",[],function(){return'{\n  "user": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "verified": true,\n    "firstName": "Shane",\n    "surname": "Gibson",\n    "emailAddress": "shane.a.gibson@gmail.com",\n    "mobileNumber": "07920053773",\n    "inviteCode": "LJ51IL"\n  },\n  "session": {\n    "id": "86f7770b-4ef2-4404-8836-5365c299e7ae",\n    "deviceId": "abc123"\n  }\n}'}),define("text!mocks/payment-methods.response.json",[],function(){return'[\n  {\n    "id": "16f7770b-4ef2-4404-8836-5365c299e7ae",\n    "last4Digits": "4081",\n    "expiryMonth": "12",\n    "expiryYear": "17",\n    "postcode": "TW88LF",\n    "cardType": "Mastercard",\n    "type": "business"\n  },\n  {\n    "id": "26f7770b-4ef2-4404-8836-5365c299e7ae",\n    "last4Digits": "5021",\n    "expiryMonth": "12",\n    "expiryYear": "17",\n    "postcode": "TW88LF",\n    "cardType": "Visa",\n    "type": "personal"\n  }\n]'}),define("text!mocks/delete-payment-methods.response.json",[],function(){return"{}"}),define("text!mocks/payment-token.response.json",[],function(){return'{\n  "token": "16f7770b-4ef2-4404-8836-5365c299e7ae"\n}'}),define("util/mock-server",["require","./uri","text!../mocks/register.response.json","text!../mocks/verification-code.response.json","text!../mocks/sign-in.response.json","text!../mocks/sign-out.response.json","text!../mocks/session.response.json","text!../mocks/payment-methods.response.json","text!../mocks/delete-payment-methods.response.json","text!../mocks/payment-token.response.json"],function(e){function t(e,t,i,r){this.type=e,this.pathRegEx=t,this.isSuccess=i,this.response=r,this.isMatch=function(e,t){return this.type===e&&n.resolvePath(t).match(this.pathRegEx)
},this.respond=function(e,t){this.isSuccess?e(this.response):t(this.response)}}var n=e("./uri"),i={},r=[];i.findMock=function(e,t){for(var n=0;n<r.length;n++)if(r[n].isMatch(e,t))return r[n]};var o=function(e,n,i,o){r.push(new t(e,n,i,o))};return o("POST","/account/register",!0,JSON.parse(e("text!../mocks/register.response.json"))),o("POST","/account/verify",!0,JSON.parse(e("text!../mocks/verification-code.response.json"))),o("POST","/account/login",!0,JSON.parse(e("text!../mocks/sign-in.response.json"))),o("POST","/account/logout",!0,JSON.parse(e("text!../mocks/sign-out.response.json"))),o("GET","/account/session",!0,JSON.parse(e("text!../mocks/session.response.json"))),o("GET","/payment/user/.*/payment-method",!0,JSON.parse(e("text!../mocks/payment-methods.response.json"))),o("DELETE","/payment/user/.*/payment-method",!0,JSON.parse(e("text!../mocks/delete-payment-methods.response.json"))),o("GET","/payment/token",!0,JSON.parse(e("text!../mocks/payment-token.response.json"))),i}),define("util/server-gateway",["require","../config","./mock-server"],function(e){var t=e("../config"),n=e("./mock-server"),i={post:function(e,t,n,i){return o("POST",r(e,n),i,t)},put:function(e,t,n,i){return o("PUT",r(e,n,t),i)},get:function(e,t,n){return o("GET",r(e,t),n)},"delete":function(e,t,n){return o("DELETE",r(e,t),n)}},r=function(e,n){var i=n?"?"+decodeURIComponent($.param(n)):"",r=t.server.scheme+"://"+t.server.host+":"+t.server.port;return r+e+i},o=function(e,i,r,o){return new RSVP.Promise(function(s,a){if(t.mock){var l=n.findMock(e,i);if(l)return l.respond(s,a)}return $.ajax({url:i,success:s,error:function(e){a(e)},type:e,data:JSON.stringify(o||{}),dataType:"json",contentType:"application/json; charset=utf-8"|r})})};return i}),define("util/toast",["require"],function(){var e={};return e.showShortBottom=function(e){window.plugins.toast.showShortBottom(e)},e.showLongBottom=function(){window.plugins.toast.showLongBottom(message)},e}),define("context",["require"],function(){var e={};return e.getPaymentMethodById=function(e){for(var t=0;t<this.paymentMethods.length;t++)if(this.paymentMethods[t].id===e)return this.paymentMethods[t]},e}),define("view/sign-in",["require","marionette","hbs!../html/sign-in","../util/click","../util/vent","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/sign-in"),i=e("../util/click"),r=e("../util/vent"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .sign-in":"signIn","blur input.emailaddress":"validateField","blur input.password":"validateField","click .forgotten-password":"forgottenPassword"},ui:{emailAddressInput:"input.emailaddress",passwordInput:"input.password"},onDomRefresh:function(){l.trackView("Sign In")},signIn:i.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},validateField:function(e){o.validateFields($(e.currentTarget))},submit:function(){var e=this;return s.post("/account/login",{deviceId:localStorage.getItem("deviceid"),emailAddress:this.ui.emailAddressInput.val(),password:this.ui.passwordInput.val()}).then(function(e){u.user=e.user,u.session=e.session,l.setUserId(e.user.id),localStorage.setItem("sessionid",e.session.sessionId),e.user.verified?r.trigger("navigate","home"):r.trigger("navigate","verify-mobile")}).catch(function(t){switch(t.status){case 401:return o.addError(e.ui.emailAddressInput,"invalid_credentials");case 423:return r.trigger("navigate","forgotten-password"),a.showLongBottom("Your account is locked. To unlock, please reset your password.")}l.trackError(JSON.stringify(t)),a.showLongBottom("Something unexpected happened. Please try again.")})},forgottenPassword:function(){r.trigger("navigate","forgotten-password")}});return c}),define("hbs!html/register",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="form">\n    <div class="input-container single">\n        <input type="text" data-validationrules="mandatory name" class="field firstname" placeholder="First Name"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="input-container single">\n        <input type="text" data-validationrules="mandatory name" class="field surname" placeholder="Last Name"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="input-container single">\n        <input type="text" data-validationrules="mandatory emailaddress" class="field emailaddress" placeholder="Email Address"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="input-container single">\n        <input type="number" step="1" data-validationrules="mandatory mobilenumber" class="field mobilenumber" placeholder="Mobile Number"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="input-container single">\n        <input type="password" data-validationrules="mandatory password" class="field password" placeholder="Password"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button register">Register</div>\n</div>'},useData:!0})}),define("view/register",["require","marionette","hbs!../html/register","../util/click","../util/vent","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/register"),i=e("../util/click"),r=e("../util/vent"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .register":"registerUser","blur input.firstname":"validateField","blur input.surname":"validateField","blur input.emailaddress":"validateField","blur input.mobilenumber":"validateField","blur input.password":"validateField"},ui:{firstNameInput:"input.firstname",surnameInput:"input.surname",emailAddressInput:"input.emailaddress",mobileNumberInput:"input.mobilenumber",passwordInput:"input.password"},onDomRefresh:function(){l.trackView("Register")},registerUser:i.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},validateField:function(e){o.validateFields($(e.currentTarget))},submit:function(){var e=this;return s.post("/account/register",{deviceId:localStorage.getItem("deviceid"),firstName:this.ui.firstNameInput.val(),surname:this.ui.surnameInput.val(),emailAddress:this.ui.emailAddressInput.val(),mobileNumber:this.ui.mobileNumberInput.val(),password:this.ui.passwordInput.val()}).then(function(e){u.user=e.user,u.session=e.session,l.setUserId(e.user.id),localStorage.setItem("sessionid",e.session.sessionId),r.trigger("navigate","verify-mobile")}).catch(function(t){switch(t.status){case 409:return o.addError(e.ui.emailAddressInput,"already_registered")}l.trackError(JSON.stringify(t)),a.showLongBottom("Something unexpected happened. Please try again.")})}});return c}),define("hbs!html/verify-mobile",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="form">\n    <div class="input-container single short">\n        <input type="number" step="1" maxlength="6" data-validationrules="mandatory verificationcode" class="field center verificationcode" placeholder="Enter Verification Code"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="right">\n        <div class="text-and-icon-button resend-sms touch-color">\n            <span class="text">Resend SMS</span>\n            <i class="icon-loop"></i>\n        </div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button verify">Verify Mobile Number</div>\n</div>'},useData:!0})}),define("view/verify-mobile",["require","marionette","hbs!../html/verify-mobile","../util/click","../util/vent","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/verify-mobile"),i=e("../util/click"),r=e("../util/vent"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .verify":"verify","click .resend-sms":"resendSms"},ui:{verificationCodeInput:"input.code"},onDomRefresh:function(){l.trackView("Verify Mobile")},verify:i.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},submit:function(){var e=this;return s.post("/account/verify",{userId:u.user.id,code:this.ui.verificationCodeInput.val()}).then(function(){r.trigger("navigate","home"),u.user.verified=!0}).catch(function(t){switch(t.status){case 401:return o.addError(e.ui.verificationCodeInput,"invalid_verification_code")}l.trackError(JSON.stringify(t)),a.showLongBottom("Something unexpected happened. Please try again.")})},onBack:function(){return!1},resendSms:function(){return s.post("/verification-code/resend?userId="+u.user.id).then(function(){a.showLongBottom("The code has been resent via SMS.")}).catch(function(e){l.trackError(JSON.stringify(e)),a.showLongBottom("Something unexpected happened. Please try again.")})}});return c}),define("hbs!html/home",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>'},useData:!0})}),define("view/home",["require","marionette","hbs!../html/home","../util/click","../util/analytics","../util/vent"],function(e){var t=e("marionette"),n=e("hbs!../html/home"),i=(e("../util/click"),e("../util/analytics")),r=e("../util/vent"),o=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu"},onDomRefresh:function(){i.trackView("Home")},showMenu:function(){r.trigger("menu:show","home")}});return o}),define("hbs!html/reset-password",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="form">\n    <div class="input-container single">\n        <input type="password" data-validationrules="mandatory password" class="field password" placeholder="New Password"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button reset">Reset Password</div>\n</div>'},useData:!0})}),define("view/reset-password",["require","marionette","hbs!../html/reset-password","../util/click","../util/vent","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/reset-password"),i=e("../util/click"),r=e("../util/vent"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .reset":"resetPassword","blur input.password":"validateField"},ui:{passwordInput:"input.password"},onDomRefresh:function(){l.trackView("Reset Password")},resetPassword:i.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},validateField:function(e){o.validateFields($(e.currentTarget))},submit:function(){return s.post("/account/password/reset",{userId:this.options.userId,token:this.options.token,newPassword:this.ui.passwordInput.val()}).then(function(e){u.user=e.user,u.session=e.session,l.setUserId(e.user.id),e.user.verified?r.trigger("navigate","home"):r.trigger("navigate","verify-mobile")}).catch(function(e){switch(e.status){case 409:return r.trigger("navigate","forgotten-password"),a.showLongBottom("Reset Password Link has already been used.");case 410:return r.trigger("navigate","forgotten-password"),a.showLongBottom("Reset Password Link has expired.")}l.trackError(JSON.stringify(e)),a.showLongBottom("Something unexpected happened. Please try again.")})}});return c}),define("hbs!html/about",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-info"></i>\n    <div class="context-title bold">About</div>\n    <div>\n        <div class="select-text touch-color terms-and-conditions">Terms &amp; Conditions</div>\n        <div class="select-text touch-color privacy-policy">Privacy Policy</div>\n        <div class="select-text touch-color copyright">Copyright</div>\n        <div class="select-text touch-color rate-us">Rate us on <span class="store"></span></div>\n    </div>\n    <div class="version">Version <span class="number">0.0.1</span></div>\n</div>'},useData:!0})}),define("util/rateme",["require","./vent","../config"],function(e){var t="viewcount",n=e("./vent"),i=e("../config"),r={showRateMeDialog:function(){var e=0|window.localStorage.getItem(t);5===e&&o()},reset:function(){window.localStorage.setItem(t,0)},openAppStore:function(){window.open(i.app_store[device.platform.toLowerCase()].url,"_system")},incrementAppViewCount:function(){var e=0|window.localStorage.getItem(t);e+=1,window.localStorage.setItem(t,e)}},o=function(){n.trigger("modal:rateme")};return r}),define("view/about",["require","marionette","hbs!../html/about","../util/vent","../util/rateme","../util/analytics","../config"],function(e){var t=e("marionette"),n=e("hbs!../html/about"),i=e("../util/vent"),r=e("../util/rateme"),o=e("../util/analytics"),s=e("../config"),a=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .terms-and-conditions":"showTermsAndConditions","click .privacy-policy":"showPrivacyPolicy","click .copyright":"showCopyright","click .rate-us":"showRateUs"},onDomRefresh:function(){o.trackView("About"),$(".version .number").html(s.version),$(".rate-us .store").html(s.app_store[device.platform.toLowerCase()].name)},showMenu:function(){i.trigger("menu:show","about")},showTermsAndConditions:function(){window.open("","_system")},showPrivacyPolicy:function(){window.open("","_system")},showCopyright:function(){window.open("","_system")},showRateUs:function(){r.openAppStore()}});return a}),define("hbs!html/payments",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-credit-card"></i>\n    <div class="context-title bold">Payments</div>\n    <div class="section-title bold">Cards</div>\n    <div class="full payment-methods"></div>\n    <div class="right">\n        <div class="text-and-icon-button add-card touch-color">\n            <span class="text">Add Card</span>\n            <i class="icon-credit-card"></i>\n            <i class="icon-plus"></i>\n        </div>\n    </div>\n</div>'},useData:!0})}),define("view/payments",["require","marionette","hbs!../html/payments","../util/vent","../context","../util/server-gateway"],function(e){var t=e("marionette"),n=e("hbs!../html/payments"),i=e("../util/vent"),r=e("../context"),o=e("../util/server-gateway"),s=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .edit-card":"editCard","click .add-card":"addCard"},onDomRefresh:function(){var e=this;o.get("/payment/user/"+r.user.id+"/payment-method").then(function(t){r.paymentMethods=t,t.forEach(function(t){e.renderPaymentMethod(t)})})},renderPaymentMethod:function(e){var t=function(e){return e.cardType.toLowerCase().replace(/ /g,"_")},n='<div data-cardid="'+e.id+'" class="select-text edit-card touch-color"><div class="card-image '+t(e)+'"></div><div class="card-summary">'+e.type.toUpperCase()+" •••• "+e.last4Digits+'<i class="icon-pencil"></i></div></div>';$(".payment-methods").append(n)},showMenu:function(){i.trigger("menu:show","payments")},addCard:function(){i.trigger("navigate","add-card")},editCard:function(e){var t=$(e.currentTarget).closest(".edit-card").data("cardid");i.trigger("navigate","edit-card/"+t)}});return s}),define("hbs!html/profile",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-user"></i>\n    <div class="context-title bold">Profile</div>\n    <div class="section-title bold">Account</div>\n    <div class="profile-photo">\n        <i class="icon-user"></i>\n    </div>\n    <div class="half">\n        <div class="display-text">Shane</div>\n        <div class="display-text">Gibson</div>\n    </div>\n    <div class="full">\n        <div class="display-text">shane.a.gibson@gmail.com</div>\n        <div class="display-text">07920053773</div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button sign-out">Sign Out</div>\n</div>'},useData:!0})}),define("view/profile",["require","marionette","hbs!../html/profile","../util/vent","../util/click","../context","../util/toast","../util/analytics","../util/server-gateway"],function(e){var t=e("marionette"),n=e("hbs!../html/profile"),i=e("../util/vent"),r=e("../util/click"),o=e("../context"),s=e("../util/toast"),a=e("../util/analytics"),l=e("../util/server-gateway"),u=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .sign-out":"signOut"},onDomRefresh:function(){a.trackView("Profile")},showMenu:function(){i.trigger("menu:show","profile")},signOut:r.single(function(){l.post("/account/logout",{sessionId:o.session.id}).then(function(){localStorage.removeItem("sessionid"),delete o.user,delete o.session,i.trigger("navigate","landing"),s.showShortBottom("Successfully Signed Out")}).catch(function(e){a.trackError(JSON.stringify(e)),s.showLongBottom("Something unexpected happened. Please try again.")})})});return u}),define("hbs!html/promotions",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-star"></i>\n    <div class="context-title bold">Promotions</div>\n    <div class="form">\n        <div class="input-container single short">\n            <input type="text" data-validationrules="mandatory" class="field center promo-code" placeholder="Enter Promo Code"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n            <div class="input-underline"></div>\n        </div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button apply-promotion">Apply</div>\n</div>'},useData:!0})}),define("view/promotions",["require","marionette","hbs!../html/promotions","../util/vent","../util/click","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/promotions"),i=e("../util/vent"),r=e("../util/click"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .apply-promotion":"applyPromotion"},ui:{promotionCodeInput:".promo-code"},onDomRefresh:function(){l.trackView("Promotions")},showMenu:function(){i.trigger("menu:show","promotions")},applyPromotion:r.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},submit:function(){return s.post("/user/"+u.user.id+"/redeem/"+c.ui.promotionCodeInput.val()).then(function(){i.trigger("navigate","home"),a.showLongBottom("Successfully applied Promotion Code")}).catch(function(e){switch(e.status){case 400:return a.showLongBottom("Invalid Promotion Code.");case 409:return a.showLongBottom("This Promotion Code has already been redeemed.")}l.trackError(JSON.stringify(e)),a.showLongBottom("Something unexpected happened. Please try again.")})}});return c}),define("hbs!html/share",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-share"></i>\n    <div class="context-title bold">Share</div>\n    <div class="info-text">When a friend claims your code, you both get &pound;10!</div>\n    <div class="code"></div>\n    <div class="divider bold">\n        <hr class="left"/>\n        Share Your Code\n        <hr class="right"/>\n    </div>\n    <div class="share-options">\n        <div class="touch-color large-icon-button left share-via-email">\n            <i class="icon-mail"></i>\n            <div class="icon-text bold">via Email</div>\n        </div>\n        <div class="touch-color large-icon-button right share-via-sms">\n            <i class="icon-comment"></i>\n            <div class="icon-text bold">via SMS</div>\n        </div>\n    </div>\n</div>'},useData:!0})}),define("view/share",["require","marionette","hbs!../html/share","../util/vent","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/share"),i=e("../util/vent"),r=e("../util/analytics"),o=e("../context"),s=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .share-via-email":"shareViaEmail","click .share-via-sms":"shareViaSms"},onDomRefresh:function(){$(".code").html(this.getPromoCode()),r.trackView("Share")},showMenu:function(){i.trigger("menu:show","share")},shareViaEmail:function(){var e=this.getPromoCode(),t=this.titleMessage(e),n=this.bodyMessage(e);window.open("mailto:?to=&subject="+t+"&body="+n,"_system")},shareViaSms:function(){var e=this.getPromoCode(),t=this.bodyMessage(e),n={android:function(){window.open("sms:?body="+t,"_system")},ios:function(){sms.sendMessage(t,console.log,console.log)},browser:function(){}};n[device.platform.toLowerCase()]()},titleMessage:function(){return"£10 off your first Epsilon purchase!"},bodyMessage:function(e){return"Use my Epsilon promo code "+e+" and get £10 off your first Epsilon purchase!. Redeem it at https://www.epsilon.com/invite/"+e},getPromoCode:function(){return o.user.inviteCode}});return s}),define("hbs!html/support",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-help"></i>\n    <div class="context-title bold">Support</div>\n</div>'},useData:!0})}),define("view/support",["require","marionette","hbs!../html/support","../util/analytics","../util/vent"],function(e){var t=e("marionette"),n=e("hbs!../html/support"),i=e("../util/analytics"),r=e("../util/vent"),o=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu"},onDomRefresh:function(){i.trackView("Support")},showMenu:function(){r.trigger("menu:show","support")}});return o}),define("hbs!html/add-card",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-credit-card"></i>\n    <div class="context-title bold">Add Card</div>\n    <div class="form">\n        <div class="input-container single">\n            <input type="number" step="1" maxlength="16" data-validationrules="mandatory cardnumber" class="field cardnumber" placeholder="Card Number"/>\n            <span class="error-reason">\n                <span class="error-text"></span>\n                <i class="icon-cancel-circled"></i>\n            </span>\n            <div class="input-underline"></div>\n        </div>\n        <div class="input-container single">\n            <div class="input-container double left">\n                <input type="text" readonly data-validationrules="mandatory mmyy" class="field mmyy" placeholder="MM / YYYY"/>\n                <span class="error-reason">\n                    <span class="error-text"></span>\n                    <i class="icon-cancel-circled"></i>\n                </span>\n                <div class="input-underline"></div>\n            </div>\n            <div class="input-container triple right">\n                <input type="number" step="1" maxlength="3" data-validationrules="mandatory cvv" class="field cvv" placeholder="CVV"/>\n                <span class="error-reason">\n                    <span class="error-text"></span>\n                    <i class="icon-cancel-circled"></i>\n                </span>\n                <div class="input-underline"></div>\n            </div>\n        </div>\n        <div class="input-container single">\n            <input type="text" maxlength="8" data-validationrules="mandatory postcode" class="field postcode" placeholder="Postcode"/>\n            <span class="error-reason">\n                <span class="error-text"></span>\n                <i class="icon-cancel-circled"></i>\n            </span>\n            <div class="input-underline"></div>\n        </div>\n        <div class="input-container single">\n            <select class="field type" data-validationrules="mandatory" id="type">\n                <option selected disabled value=""></option>\n                <option value="personal">Personal</option>\n                <option value="business">Business</option>\n            </select>\n            <span class="error-reason">\n                <span class="error-text"></span>\n                <i class="icon-cancel-circled"></i>\n            </span>\n            <div class="select-underline"></div>\n        </div>\n    </div>\n</div>\n<div class="buttons double">\n    <div class="button bold touch-color dark-button cancel">Cancel</div>\n    <div class="button bold touch-color light-button save-card">Save Card</div>\n</div>'},useData:!0})}),function(e,t){function n(e){for(var n in e)if(a[e[n]]!==t)return!0;return!1}function i(n,i,s){var a=n;return"object"==typeof i?n.each(function(){this.id||(this.id="mobiscroll"+ ++r),o[this.id]&&o[this.id].destroy(),new e.mobiscroll.classes[i.component||"Scroller"](this,i)}):("string"==typeof i&&n.each(function(){var e;return(e=o[this.id])&&e[i]&&(e=e[i].apply(this,Array.prototype.slice.call(s,1)),e!==t)?(a=e,!1):void 0}),a)}var r=+new Date,o={},s=e.extend,a=document.createElement("modernizr").style,l=n(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),u=n(["flex","msFlex","WebkitBoxDirection"]),c=function(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(n([t[e]+"Transform"]))return"-"+t[e].toLowerCase()+"-";return""}(),h=c.replace(/^\-/,"").replace(/\-$/,"").replace("moz","Moz");e.fn.mobiscroll=function(t){return s(this,e.mobiscroll.components),i(this,t,arguments)},e.mobiscroll=e.mobiscroll||{version:"2.14.4",util:{prefix:c,jsPrefix:h,has3d:l,hasFlex:u,testTouch:function(t,n){if("touchstart"==t.type)e(n).attr("data-touch","1");else if(e(n).attr("data-touch"))return e(n).removeAttr("data-touch"),!1;return!0},objectToArray:function(e){var t,n=[];for(t in e)n.push(e[t]);return n},arrayToObject:function(e){var t,n={};if(e)for(t=0;t<e.length;t++)n[e[t]]=e[t];return n},isNumeric:function(e){return 0<=e-parseFloat(e)},isString:function(e){return"string"==typeof e},getCoord:function(e,t){var n=e.originalEvent||e;return n.changedTouches?n.changedTouches[0]["page"+t]:e["page"+t]},getPosition:function(n,i){var r,o,s=window.getComputedStyle?getComputedStyle(n[0]):n[0].style;return l?(e.each(["t","webkitT","MozT","OT","msT"],function(e,n){return s[n+"ransform"]!==t?(r=s[n+"ransform"],!1):void 0}),r=r.split(")")[0].split(", "),o=i?r[13]||r[5]:r[12]||r[4]):o=i?s.top.replace("px",""):s.left.replace("px",""),o},constrain:function(e,t,n){return Math.max(t,Math.min(e,n))}},tapped:!1,presets:{scroller:{},numpad:{}},themes:{listview:{},menustrip:{}},i18n:{},instances:o,classes:{},components:{},defaults:{theme:"mobiscroll",context:"body"},userdef:{},setDefaults:function(e){s(this.userdef,e)},presetShort:function(e,n,r){this.components[e]=function(o){return i(this,s(o,{component:n,preset:!1===r?t:e}),arguments)}}}}(jQuery),function(e,t,n,i){var r,o,s=e.extend,a=e.mobiscroll,l=a.instances,u=a.userdef,c=a.util,h=c.jsPrefix,d=c.has3d,p=c.getCoord,f=c.constrain,m=c.isString,g=/android [1-3]/i.test(navigator.userAgent),v=function(){},y=function(e){e.preventDefault()};a.classes.Widget=function(c,b,w){function x(t){L&&L.removeClass("dwb-a"),L=e(this),!L.hasClass("dwb-d")&&!L.hasClass("dwb-nhl")&&L.addClass("dwb-a"),"mousedown"===t.type&&e(n).on("mouseup",_)}function _(t){L&&(L.removeClass("dwb-a"),L=null),"mouseup"===t.type&&e(n).off("mouseup",_)}function k(e){13==e.keyCode?tt.select():27==e.keyCode&&tt.cancel()}function C(t){var n,s,u,c=J.focusOnClose;P.remove(),r&&!t&&setTimeout(function(){if(c===i||!0===c){o=!0,n=r[0],u=n.type,s=n.value;try{n.type="button"}catch(t){}r.focus(),n.type=u,n.value=s}else c&&(l[e(c).attr("id")]&&(a.tapped=!1),e(c).focus())},200),tt._isVisible=!1,T("onHide",[])}function S(e){clearTimeout(rt[e.type]),rt[e.type]=setTimeout(function(){var t="scroll"==e.type;(!t||X)&&tt.position(!t)},200)}function E(t){a.tapped||(t&&t(),e(n.activeElement).is("input,textarea")&&e(n.activeElement).blur(),r=nt,tt.show()),setTimeout(function(){o=!1},300)}function T(t,n){var i;return n.push(tt),e.each([u,Q,W,b],function(e,r){r&&r[t]&&(i=r[t].apply(c,n))}),i}var A,M,N,P,I,O,D,R,j,V,L,F,B,H,U,q,$,z,W,Y,J,X,G,Q,K,Z,et,tt=this,nt=e(c),it=[],rt={};tt.position=function(t){var r,o,s,a,l,u,c,h,d,p,m=0,g=0;d={};var v=Math.min(R[0].innerWidth||R.innerWidth(),O.width()),y=R[0].innerHeight||R.innerHeight();Z===v&&et===y&&t||Y||((tt._isFullScreen||/top|bottom/.test(J.display))&&D.width(v),!1!==T("onPosition",[P,v,y])&&H&&(o=R.scrollLeft(),t=R.scrollTop(),a=J.anchor===i?nt:e(J.anchor),tt._isLiquid&&"liquid"!==J.layout&&(400>v?P.addClass("dw-liq"):P.removeClass("dw-liq")),!tt._isFullScreen&&/modal|bubble/.test(J.display)&&(j.width(""),e(".mbsc-w-p",P).each(function(){r=e(this).outerWidth(!0),m+=r,g=r>g?r:g}),r=m>v?g:m,j.width(r).css("white-space",m>v?"":"nowrap")),q=tt._isFullScreen?v:D.outerWidth(),$=tt._isFullScreen?y:D.outerHeight(!0),X=y>=$&&v>=q,tt.scrollLock=X,"modal"==J.display?(o=Math.max(0,o+(v-q)/2),s=t+(y-$)/2):"bubble"==J.display?(p=!0,h=e(".dw-arrw-i",P),s=a.offset(),u=Math.abs(M.offset().top-s.top),c=Math.abs(M.offset().left-s.left),l=a.outerWidth(),a=a.outerHeight(),o=f(c-(D.outerWidth(!0)-l)/2,o+3,o+v-q-3),s=u-$,t>s||u>t+y?(D.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),s=u+a):D.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),h=h.outerWidth(),l=f(c+l/2-(o+(q-h)/2),0,h),e(".dw-arr",P).css({left:l})):"top"==J.display?s=t:"bottom"==J.display&&(s=t+y-$),s=0>s?0:s,d.top=s,d.left=o,D.css(d),O.height(0),d=Math.max(s+$,"body"==J.context?e(n).height():M[0].scrollHeight),O.css({height:d}),p&&(s+$>t+y||u>t+y)&&(Y=!0,setTimeout(function(){Y=!1
},300),R.scrollTop(Math.min(s+$-y,d-y))),Z=v,et=y))},tt.attachShow=function(e,t){it.push(e),"inline"!==J.display&&(G&&e.on("mousedown.dw",function(e){e.preventDefault()}),J.showOnFocus&&e.on("focus.dw",function(){o||E(t)}),J.showOnTap&&tt.tap(e,function(){E(t)}))},tt.select=function(){H&&!1===tt.hide(!1,"set")||(tt._fillValue(),T("onSelect",[tt._value]))},tt.cancel=function(){(!H||!1!==tt.hide(!1,"cancel"))&&T("onCancel",[tt._value])},tt.clear=function(){T("onClear",[P]),H&&!tt.live&&tt.hide(!1,"clear"),tt.setValue(null,!0)},tt.enable=function(){J.disabled=!1,tt._isInput&&nt.prop("disabled",!1)},tt.disable=function(){J.disabled=!0,tt._isInput&&nt.prop("disabled",!0)},tt.show=function(n,r){var o;J.disabled||tt._isVisible||(!1!==F&&("top"==J.display&&(F="slidedown"),"bottom"==J.display&&(F="slideup")),tt._readValue(),T("onBeforeShow",[]),o='<div lang="'+J.lang+'" class="mbsc-'+J.theme+(J.baseTheme?" mbsc-"+J.baseTheme:"")+" dw-"+J.display+" "+(J.cssClass||"")+(tt._isLiquid?" dw-liq":"")+(g?" mbsc-old":"")+(B?"":" dw-nobtn")+'"><div class="dw-persp">'+(H?'<div class="dwo"></div>':"")+"<div"+(H?' role="dialog" tabindex="-1"':"")+' class="dw'+(J.rtl?" dw-rtl":" dw-ltr")+'">'+("bubble"===J.display?'<div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':"")+'<div class="dwwr"><div aria-live="assertive" class="dw-aria dw-hidden"></div>'+(J.headerText?'<div class="dwv">'+(m(J.headerText)?J.headerText:"")+"</div>":"")+'<div class="dwcc">',o+=tt._generateContent(),o+="</div>",B&&(o+='<div class="dwbc">',e.each(V,function(e,t){t=m(t)?tt.buttons[t]:t,"set"===t.handler&&(t.parentClass="dwb-s"),"cancel"===t.handler&&(t.parentClass="dwb-c"),t.handler=m(t.handler)?tt.handlers[t.handler]:t.handler,o+="<div"+(J.btnWidth?' style="width:'+100/V.length+'%"':"")+' class="dwbw '+(t.parentClass||"")+'"><div tabindex="0" role="button" class="dwb'+e+" dwb-e "+(t.cssClass===i?J.btnClass:t.cssClass)+(t.icon?" mbsc-ic mbsc-ic-"+t.icon:"")+'">'+(t.text||"")+"</div></div>"}),o+="</div>"),o+="</div></div></div></div>",P=e(o),O=e(".dw-persp",P),I=e(".dwo",P),j=e(".dwwr",P),N=e(".dwv",P),D=e(".dw",P),A=e(".dw-aria",P),tt._markup=P,tt._header=N,tt._isVisible=!0,z="orientationchange resize",tt._markupReady(),T("onMarkupReady",[P]),H?(e(t).on("keydown",k),J.scrollLock&&P.on("touchmove mousewheel DOMMouseScroll",function(e){X&&e.preventDefault()}),"Moz"!==h&&e("input,select,button",M).each(function(){this.disabled||e(this).addClass("dwtd").prop("disabled",!0)}),z+=" scroll",a.activeInstance=tt,P.appendTo(M),d&&F&&!n&&P.addClass("dw-in dw-trans").on("webkitAnimationEnd animationend",function(){P.off("webkitAnimationEnd animationend").removeClass("dw-in dw-trans").find(".dw").removeClass("dw-"+F),r||D.focus(),tt.ariaMessage(J.ariaMessage)}).find(".dw").addClass("dw-"+F)):nt.is("div")?nt.html(P):P.insertAfter(nt),T("onMarkupInserted",[P]),tt.position(),R.on(z,S),P.on("selectstart mousedown",y).on("click",".dwb-e",y).on("keydown",".dwb-e",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),e(this).click())}),setTimeout(function(){e.each(V,function(t,n){tt.tap(e(".dwb"+t,P),function(e){n=m(n)?tt.buttons[n]:n,n.handler.call(this,e,tt)},!0)}),J.closeOnOverlay&&tt.tap(I,function(){tt.cancel()}),H&&!F&&(r||D.focus(),tt.ariaMessage(J.ariaMessage)),P.on("touchstart mousedown",".dwb-e",x).on("touchend",".dwb-e",_),tt._attachEvents(P)},300),T("onShow",[P,tt._tempValue]))},tt.hide=function(n,i,r){return!tt._isVisible||!r&&!tt._isValid&&"set"==i||!r&&!1===T("onClose",[tt._tempValue,i])?!1:(P&&("Moz"!==h&&e(".dwtd",M).each(function(){e(this).prop("disabled",!1).removeClass("dwtd")}),d&&H&&F&&!n&&!P.hasClass("dw-trans")?P.addClass("dw-out dw-trans").find(".dw").addClass("dw-"+F).on("webkitAnimationEnd animationend",function(){C(n)}):C(n),R.off(z,S)),void(H&&(e(t).off("keydown",k),delete a.activeInstance)))},tt.ariaMessage=function(e){A.html(""),setTimeout(function(){A.html(e)},100)},tt.isVisible=function(){return tt._isVisible},tt.setValue=v,tt._generateContent=v,tt._attachEvents=v,tt._readValue=v,tt._fillValue=v,tt._markupReady=v,tt._processSettings=v,tt.tap=function(e,t,n){var i,r,o;J.tap&&e.on("touchstart.dw",function(e){n&&e.preventDefault(),i=p(e,"X"),r=p(e,"Y"),o=!1}).on("touchmove.dw",function(e){(20<Math.abs(p(e,"X")-i)||20<Math.abs(p(e,"Y")-r))&&(o=!0)}).on("touchend.dw",function(e){o||(e.preventDefault(),t.call(this,e)),a.tapped=!0,setTimeout(function(){a.tapped=!1},500)}),e.on("click.dw",function(e){a.tapped||t.call(this,e),e.preventDefault()})},tt.option=function(e,t){var n={};"object"==typeof e?n=e:n[e]=t,tt.init(n)},tt.destroy=function(){tt.hide(!0,!1,!0),e.each(it,function(e,t){t.off(".dw")}),tt._isInput&&G&&(c.readOnly=K),T("onDestroy",[]),delete l[c.id],tt=null},tt.getInst=function(){return tt},tt.trigger=T,tt.init=function(n){tt.settings=J={},s(b,n),s(J,a.defaults,tt._defaults,u,b),Q=a.themes[J.theme]||a.themes.mobiscroll,U=a.i18n[J.lang],T("onThemeLoad",[U,b]),s(J,Q,U,u,b),W=a.presets[tt._class][J.preset],J.buttons=J.buttons||("inline"!==J.display?["set","cancel"]:[]),J.headerText=J.headerText===i?"inline"!==J.display?"{value}":!1:J.headerText,W&&(W=W.call(c,tt),s(J,W,b)),a.themes[J.theme]||(J.theme="mobiscroll"),tt._isLiquid="liquid"===(J.layout||(/top|bottom/.test(J.display)?"liquid":"")),tt._processSettings(),nt.off(".dw"),F=g?!1:J.animate,V=J.buttons,H="inline"!==J.display,G=J.showOnFocus||J.showOnTap,R=e("body"==J.context?t:J.context),M=e(J.context),tt.context=R,tt.live=!0,e.each(V,function(e,t){return"set"===t||"set"===t.handler?tt.live=!1:void 0}),tt.buttons.set={text:J.setText,handler:"set"},tt.buttons.cancel={text:tt.live?J.closeText:J.cancelText,handler:"cancel"},tt.buttons.clear={text:J.clearText,handler:"clear"},tt._isInput=nt.is("input"),B=0<V.length,tt._isVisible&&tt.hide(!0,!1,!0),H?(tt._readValue(),tt._isInput&&G&&(K===i&&(K=c.readOnly),c.readOnly=!0),tt.attachShow(nt)):tt.show(),nt.on("change.dw",function(){tt._preventChange||tt.setVal(nt.val(),!0,!1),tt._preventChange=!1}),T("onInit",[])},tt.buttons={},tt.handlers={set:tt.select,cancel:tt.cancel,clear:tt.clear},tt._value=null,tt._isValid=!0,tt._isVisible=!1,w||(l[c.id]=tt,tt.init(b))},a.classes.Widget.prototype._defaults={lang:"en",setText:"Set",selectedText:"Selected",closeText:"Close",cancelText:"Cancel",clearText:"Clear",disabled:!1,closeOnOverlay:!0,showOnFocus:!0,showOnTap:!0,display:"modal",scrollLock:!0,tap:!0,btnClass:"dwb",btnWidth:!0,focusOnClose:!1},a.themes.mobiscroll={rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},e(t).on("focus",function(){r&&(o=!0)}),e(n).on("mouseover mouseup mousedown click",function(e){return a.tapped?(e.stopPropagation(),e.preventDefault(),!1):void 0})}(jQuery,window,document),function(e,t,n,i){var r,t=e.mobiscroll,o=t.classes,s=t.instances,a=t.util,l=a.jsPrefix,u=a.has3d,c=a.hasFlex,h=a.getCoord,d=a.constrain,p=a.testTouch;o.Scroller=function(t,f,m){function g(t){!p(t,this)||r||q||L||S(this)||(t.preventDefault(),t.stopPropagation(),r=!0,F="clickpick"!=H.mode,Q=e(".dw-ul",this),T(Q),J=($=it[K]!==i)?Math.round(-a.getPosition(Q,!0)/B):rt[K],z=h(t,"Y"),W=new Date,Y=z,N(Q,K,J,.001),F&&Q.closest(".dwwl").addClass("dwa"),"mousedown"!==t.type)||e(n).on("mousemove",v).on("mouseup",y)}function v(e){r&&F&&(e.preventDefault(),e.stopPropagation(),Y=h(e,"Y"),3<Math.abs(Y-z)||$)&&(N(Q,K,d(J+(z-Y)/B,X-1,G+1)),$=!0)}function y(t){if(r){var i=new Date-W,o=d(J+(z-Y)/B,X-1,G+1),s=Q.offset().top;if(t.stopPropagation(),u&&300>i?(i=(Y-z)/i,i=i*i/H.speedUnit,0>Y-z&&(i=-i)):i=Y-z,i=Math.round(J-i/B),!$){var s=Math.floor((Y-s)/B),a=e(e(".dw-li",Q)[s]),l=a.hasClass("dw-v"),c=F;!1!==U("onValueTap",[a])&&l?i=s:c=!0,c&&l&&(a.addClass("dw-hl"),setTimeout(function(){a.removeClass("dw-hl")},100))}F&&O(Q,i,0,!0,Math.round(o)),"mouseup"===t.type&&e(n).off("mousemove",v).off("mouseup",y),r=!1}}function b(t){L=e(this),p(t,this)&&C(t,L.closest(".dwwl"),L.hasClass("dwwbp")?D:R),"mousedown"===t.type&&e(n).on("mouseup",w)}function w(t){L=null,q&&(clearInterval(et),q=!1),"mouseup"===t.type&&e(n).off("mouseup",w)}function x(t){38==t.keyCode?C(t,e(this),R):40==t.keyCode&&C(t,e(this),D)}function _(){q&&(clearInterval(et),q=!1)}function k(t){if(!S(this)){t.preventDefault();var t=t.originalEvent||t,t=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,n=e(".dw-ul",this);T(n),O(n,Math.round(rt[K]-t),0>t?1:2)}}function C(e,t,n){if(e.stopPropagation(),e.preventDefault(),!q&&!S(t)&&!t.hasClass("dwa")){q=!0;var i=t.find(".dw-ul");T(i),clearInterval(et),et=setInterval(function(){n(i)},H.delay),n(i)}}function S(t){return e.isArray(H.readonly)?(t=e(".dwwl",V).index(t),H.readonly[t]):H.readonly}function E(t){var n='<div class="dw-bf">',t=st[t],i=1,r=t.labels||[],o=t.values,s=t.keys||o;return e.each(o,function(e,t){0===i%20&&(n+='</div><div class="dw-bf">'),n+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+s[e]+'"'+(r[e]?' aria-label="'+r[e]+'"':"")+' style="height:'+B+"px;line-height:"+B+'px;"><div class="dw-i"'+(Z>1?' style="line-height:'+Math.round(B/Z)+"px;font-size:"+Math.round(.8*(B/Z))+'px;"':"")+">"+t+"</div></div>",i++}),n+="</div>"}function T(t){var n=t.closest(".dwwl").hasClass("dwwms");X=e(".dw-li",t).index(e(n?".dw-li":".dw-v",t).eq(0)),G=Math.max(X,e(".dw-li",t).index(e(n?".dw-li":".dw-v",t).eq(-1))-(n?H.rows-1:0)),K=e(".dw-ul",V).index(t)}function A(e){var n=H.headerText;return n?"function"==typeof n?n.call(t,e):n.replace(/\{value\}/i,e):""}function M(e,t){clearTimeout(it[t]),delete it[t],e.closest(".dwwl").removeClass("dwa")}function N(e,t,n,i,r){var o=-n*B,s=e[0].style;o==ot[t]&&it[t]||(ot[t]=o,u?(s[l+"Transition"]=a.prefix+"transform "+(i?i.toFixed(3):0)+"s ease-out",s[l+"Transform"]="translate3d(0,"+o+"px,0)"):s.top=o+"px",it[t]&&M(e,t),i&&r&&(e.closest(".dwwl").addClass("dwa"),it[t]=setTimeout(function(){M(e,t)},1e3*i)),rt[t]=n)}function P(t,n,i,r){var o=e('.dw-li[data-val="'+t+'"]',n),t=e(".dw-li",n),s=t.index(o),a=t.length;if(r)T(n);else if(!o.hasClass("dw-v")){for(var n=o,l=0,u=0;s-l>=0&&!n.hasClass("dw-v");)l++,n=t.eq(s-l);for(;a>s+u&&!o.hasClass("dw-v");)u++,o=t.eq(s+u);(l>u&&u&&2!==i||!l||0>s-l||1==i)&&o.hasClass("dw-v")?s+=u:(o=n,s-=l)}return{cell:o,v:r?d(s,X,G):s,val:o.hasClass("dw-v")?o.attr("data-val"):null}}function I(t,n,r,o,s){!1!==U("validate",[V,n,t,o])&&(e(".dw-ul",V).each(function(r){var a=e(this),l=a.closest(".dwwl").hasClass("dwwms"),u=r==n||n===i,c=P(tt._tempWheelArray[r],a,o,l),h=c.cell;(!h.hasClass("dw-sel")||u)&&(tt._tempWheelArray[r]=c.val,l||(e(".dw-sel",a).removeAttr("aria-selected"),h.attr("aria-selected","true")),e(".dw-sel",a).removeClass("dw-sel"),h.addClass("dw-sel"),N(a,r,c.v,u?t:.1,u?s:!1))}),U("onValidated",[]),tt._tempValue=H.formatResult(tt._tempWheelArray),tt.live&&(tt._hasValue=r||tt._hasValue,j(r,r,0,!0)),tt._header.html(A(tt._tempValue)),r&&U("onChange",[tt._tempValue]))}function O(t,n,r,o,s){var n=d(n,X,G),a=e(".dw-li",t).eq(n),l=s===i?n:s,u=s!==i,c=K,s=Math.abs(n-l),h=o?n==l?.1:s*H.timeUnit*Math.max(.5,(100-s)/100):0;tt._tempWheelArray[c]=a.attr("data-val"),N(t,c,n,h,u),setTimeout(function(){I(h,c,!0,r,u)},10)}function D(e){var t=rt[K]+1;O(e,t>G?X:t,1,!0)}function R(e){var t=rt[K]-1;O(e,X>t?G:t,2,!0)}function j(e,t,n,i,r){tt._isVisible&&!i&&I(n),tt._tempValue=H.formatResult(tt._tempWheelArray),r||(tt._wheelArray=tt._tempWheelArray.slice(0),tt._value=tt._hasValue?tt._tempValue:null),e&&(U("onValueFill",[tt._hasValue?tt._tempValue:"",t]),tt._isInput&&nt.val(tt._hasValue?tt._tempValue:""),t&&(tt._preventChange=!0,nt.change()))}var V,L,F,B,H,U,q,$,z,W,Y,J,X,G,Q,K,Z,et,tt=this,nt=e(t),it={},rt={},ot={},st=[];o.Widget.call(this,t,f,!0),tt.setVal=tt._setVal=function(n,r,o,s,a){tt._hasValue=null!==n&&n!==i,tt._tempWheelArray=e.isArray(n)?n.slice(0):H.parseValue.call(t,n,tt)||[],j(r,o===i?r:o,a,!1,s)},tt.getVal=tt._getVal=function(e){return e=tt._hasValue?tt[e?"_tempValue":"_value"]:null,a.isNumeric(e)?+e:e},tt.setArrayVal=tt.setVal,tt.getArrayVal=function(e){return e?tt._tempWheelArray:tt._wheelArray},tt.setValue=function(e,t,n,i,r){tt.setVal(e,t,r,i,n)},tt.getValue=tt.getArrayVal,tt.changeWheel=function(t,n,r){if(V){var o=0,s=t.length;e.each(H.wheels,function(a,l){return e.each(l,function(a,l){return-1<e.inArray(o,t)&&(st[o]=l,e(".dw-ul",V).eq(o).html(E(o)),s--,!s)?(tt.position(),I(n,i,r),!1):void o++}),s?void 0:!1})}},tt.getValidCell=P,tt._generateContent=function(){var t,n="",r=0;return e.each(H.wheels,function(o,s){n+='<div class="mbsc-w-p dwc'+("scroller"!=H.mode?" dwpm":" dwsc")+(H.showLabel?"":" dwhl")+'"><div class="dwwc"'+(H.maxWidth?"":' style="max-width:600px;"')+">"+(c?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>'),e.each(s,function(e,o){st[r]=o,t=o.label!==i?o.label:e,n+="<"+(c?"div":"td")+' class="dwfl" style="'+(H.fixedWidth?"width:"+(H.fixedWidth[r]||H.fixedWidth)+"px;":(H.minWidth?"min-width:"+(H.minWidth[r]||H.minWidth)+"px;":"min-width:"+H.width+"px;")+(H.maxWidth?"max-width:"+(H.maxWidth[r]||H.maxWidth)+"px;":""))+'"><div class="dwwl dwwl'+r+(o.multiple?" dwwms":"")+'">'+("scroller"!=H.mode?'<div class="dwb-e dwwb dwwbp '+(H.btnPlusClass||"")+'" style="height:'+B+"px;line-height:"+B+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(H.btnMinusClass||"")+'" style="height:'+B+"px;line-height:"+B+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+t+'</div><div tabindex="0" aria-live="off" aria-label="'+t+'" role="listbox" class="dwww"><div class="dww" style="height:'+H.rows*B+'px;"><div class="dw-ul" style="margin-top:'+(o.multiple?0:H.rows/2*B-B/2)+'px;">',n+=E(r)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(H.selectedLineHeight?' style="height:'+B+"px;margin-top:-"+(B/2+(H.selectedLineBorder||0))+'px;"':"")+"></div></div>"+(c?"</div>":"</td>"),r++}),n+=(c?"":"</tr></table>")+"</div></div>"}),n},tt._attachEvents=function(e){e.on("DOMMouseScroll mousewheel",".dwwl",k).on("keydown",".dwwl",x).on("keyup",".dwwl",_).on("touchstart mousedown",".dwwl",g).on("touchmove",".dwwl",v).on("touchend",".dwwl",y).on("touchstart mousedown",".dwwb",b).on("touchend",".dwwb",w)},tt._markupReady=function(){V=tt._markup,I()},tt._fillValue=function(){tt._hasValue=!0,j(!0,!0,0,!0)},tt._readValue=function(){var e=nt.val()||"";tt._hasValue=""!==e,tt._tempWheelArray=tt._wheelArray?tt._wheelArray.slice(0):H.parseValue(e,tt)||[],j()},tt._processSettings=function(){H=tt.settings,U=tt.trigger,B=H.height,Z=H.multiline,tt._isLiquid="liquid"===(H.layout||(/top|bottom/.test(H.display)&&1==H.wheels.length?"liquid":"")),Z>1&&(H.cssClass=(H.cssClass||"")+" dw-ml")},tt._selectedValues={},m||(s[t.id]=tt,tt.init(f))},o.Scroller.prototype._class="scroller",o.Scroller.prototype._defaults=e.extend({},o.Widget.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,wheels:[],mode:"scroller",preset:"",speedUnit:.0012,timeUnit:.08,formatResult:function(e){return e.join(" ")},parseValue:function(t,n){var r,o=[],s=[],a=0;return null!==t&&t!==i&&(o=(t+"").split(" ")),e.each(n.settings.wheels,function(t,n){e.each(n,function(t,n){r=n.keys||n.values,s.push(-1!==e.inArray(o[a],r)?o[a]:r[0]),a++})}),s}})}(jQuery,window,document),function(e){var t=e.mobiscroll;t.datetime={defaults:{shortYearCutoff:"+10",monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),dayNamesMin:"S,M,T,W,T,F,S".split(","),monthText:"Month",amText:"am",pmText:"pm",getYear:function(e){return e.getFullYear()},getMonth:function(e){return e.getMonth()},getDay:function(e){return e.getDate()},getDate:function(e,t,n,i,r,o){return new Date(e,t,n,i||0,r||0,o||0)},getMaxDayOfMonth:function(e,t){return 32-new Date(e,t,32).getDate()},getWeekNumber:function(e){e=new Date(e),e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+1)/7)}},formatDate:function(n,i,r){if(!i)return null;var o,s,r=e.extend({},t.datetime.defaults,r),a=function(e){for(var t=0;o+1<n.length&&n.charAt(o+1)==e;)t++,o++;return t},l=function(e,t,n){if(t=""+t,a(e))for(;t.length<n;)t="0"+t;return t},u=function(e,t,n,i){return a(e)?i[t]:n[t]},c="",h=!1;for(o=0;o<n.length;o++)if(h)"'"!=n.charAt(o)||a("'")?c+=n.charAt(o):h=!1;else switch(n.charAt(o)){case"d":c+=l("d",r.getDay(i),2);break;case"D":c+=u("D",i.getDay(),r.dayNamesShort,r.dayNames);break;case"o":c+=l("o",(i.getTime()-new Date(i.getFullYear(),0,0).getTime())/864e5,3);break;case"m":c+=l("m",r.getMonth(i)+1,2);break;case"M":c+=u("M",r.getMonth(i),r.monthNamesShort,r.monthNames);break;case"y":s=r.getYear(i),c+=a("y")?s:(10>s%100?"0":"")+s%100;break;case"h":s=i.getHours(),c+=l("h",s>12?s-12:0===s?12:s,2);break;case"H":c+=l("H",i.getHours(),2);break;case"i":c+=l("i",i.getMinutes(),2);break;case"s":c+=l("s",i.getSeconds(),2);break;case"a":c+=11<i.getHours()?r.pmText:r.amText;break;case"A":c+=11<i.getHours()?r.pmText.toUpperCase():r.amText.toUpperCase();break;case"'":a("'")?c+="'":h=!0;break;default:c+=n.charAt(o)}return c},parseDate:function(n,i,r){var r=e.extend({},t.datetime.defaults,r),o=r.defaultValue||new Date;if(!n||!i)return o;if(i.getTime)return i;var s,i="object"==typeof i?i.toString():i+"",a=r.shortYearCutoff,l=r.getYear(o),u=r.getMonth(o)+1,c=r.getDay(o),h=-1,d=o.getHours(),p=o.getMinutes(),f=0,m=-1,g=!1,v=function(e){return(e=s+1<n.length&&n.charAt(s+1)==e)&&s++,e},y=function(e){return v(e),(e=i.substr(w).match(RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2)+"}")))?(w+=e[0].length,parseInt(e[0],10)):0},b=function(e,t,n){for(e=v(e)?n:t,t=0;t<e.length;t++)if(i.substr(w,e[t].length).toLowerCase()==e[t].toLowerCase())return w+=e[t].length,t+1;return 0},w=0;for(s=0;s<n.length;s++)if(g)"'"!=n.charAt(s)||v("'")?w++:g=!1;else switch(n.charAt(s)){case"d":c=y("d");break;case"D":b("D",r.dayNamesShort,r.dayNames);break;case"o":h=y("o");break;case"m":u=y("m");break;case"M":u=b("M",r.monthNamesShort,r.monthNames);break;case"y":l=y("y");break;case"H":d=y("H");break;case"h":d=y("h");break;case"i":p=y("i");break;case"s":f=y("s");break;case"a":m=b("a",[r.amText,r.pmText],[r.amText,r.pmText])-1;break;case"A":m=b("A",[r.amText,r.pmText],[r.amText,r.pmText])-1;break;case"'":v("'")?w++:g=!0;break;default:w++}if(100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=("string"!=typeof a?a:(new Date).getFullYear()%100+parseInt(a,10))?0:-100)),h>-1)for(u=1,c=h;;){if(a=32-new Date(l,u-1,32).getDate(),a>=c)break;u++,c-=a}return d=r.getDate(l,u-1,c,-1==m?d:m&&12>d?d+12:m||12!=d?d:0,p,f),r.getYear(d)!=l||r.getMonth(d)+1!=u||r.getDay(d)!=c?o:d}},t.formatDate=t.datetime.formatDate,t.parseDate=t.datetime.parseDate}(jQuery),function(e,t){var n=e.mobiscroll,i=n.datetime,r=new Date,o={startYear:r.getFullYear()-100,endYear:r.getFullYear()+1,separator:" ",dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now"},s=function(r){function s(e,n,i){return R[n]!==t?+e[R[n]]:i!==t?i:j[n](z)}function a(e,t,n,i){e.push({values:n,keys:t,label:i})}function l(e,t,n,i){return Math.min(i,Math.floor(e/t)*t+n)}function u(e){if(null===e)return e;var t=s(e,"h",0);return P.getDate(s(e,"y"),s(e,"m"),s(e,"d",1),s(e,"a",0)?t+12:t,s(e,"i",0),s(e,"s",0))}function c(e,t){var n,i,r=!1,o=!1,s=0,a=0;if(h(e))return e;if(X>e&&(e=X),e>G&&(e=G),i=n=e,2!==t)for(r=h(n);!r&&G>n;)n=new Date(n.getTime()+864e5),r=h(n),s++;if(1!==t)for(o=h(i);!o&&i>X;)i=new Date(i.getTime()-864e5),o=h(i),a++;return 1===t&&r?n:2===t&&o?i:s>a&&o?i:n}function h(e){return X>e||e>G?!1:d(e,L)?!0:d(e,V)?!1:!0}function d(e,t){var n,i,r;if(t)for(i=0;i<t.length;i++)if(n=t[i],r=n+"",!n.start)if(n.getTime){if(e.getFullYear()==n.getFullYear()&&e.getMonth()==n.getMonth()&&e.getDate()==n.getDate())return!0}else if(r.match(/w/i)){if(r=+r.replace("w",""),r==e.getDay())return!0}else if(r=r.split("/"),r[1]){if(r[0]-1==e.getMonth()&&r[1]==e.getDate())return!0}else if(r[0]==e.getDate())return!0;return!1}function p(e,t,n,i,r,o,s){var a,l,u;if(e)for(a=0;a<e.length;a++)if(l=e[a],u=l+"",!l.start)if(l.getTime)P.getYear(l)==t&&P.getMonth(l)==n&&(o[P.getDay(l)-1]=s);else if(u.match(/w/i))for(u=+u.replace("w",""),k=u-i;r>k;k+=7)k>=0&&(o[k]=s);else u=u.split("/"),u[1]?u[0]-1==n&&(o[u[1]-1]=s):o[u[0]-1]=s}function f(n,i,r,o,s,a,u,c,h){var d,p,f,g,v,y,b,w,x,_,k,C,S,E,T,A,I,D,R={},j={h:W,i:Y,s:J,a:1},V=P.getDate(s,a,u),L=["a","h","i","s"];n&&(e.each(n,function(e,t){t.start&&(t.apply=!1,d=t.d,p=d+"",f=p.split("/"),d&&(d.getTime&&s==P.getYear(d)&&a==P.getMonth(d)&&u==P.getDay(d)||!p.match(/w/i)&&(f[1]&&u==f[1]&&a==f[0]-1||!f[1]&&u==f[0])||p.match(/w/i)&&V.getDay()==+p.replace("w","")))&&(t.apply=!0,R[V]=!0)}),e.each(n,function(n,o){if(k=E=S=0,C=t,b=y=!0,T=!1,o.start&&(o.apply||!o.d&&!R[V])){for(g=o.start.split(":"),v=o.end.split(":"),_=0;3>_;_++)g[_]===t&&(g[_]=0),v[_]===t&&(v[_]=59),g[_]=+g[_],v[_]=+v[_];for(g.unshift(11<g[0]?1:0),v.unshift(11<v[0]?1:0),q&&(12<=g[1]&&(g[1]-=12),12<=v[1]&&(v[1]-=12)),_=0;i>_;_++)O[_]!==t&&(w=l(g[_],j[L[_]],M[L[_]],N[L[_]]),x=l(v[_],j[L[_]],M[L[_]],N[L[_]]),D=I=A=0,q&&1==_&&(A=g[0]?12:0,I=v[0]?12:0,D=O[0]?12:0),y||(w=0),b||(x=N[L[_]]),(y||b)&&w+A<O[_]+D&&O[_]+D<x+I&&(T=!0),O[_]!=w&&(y=!1),O[_]!=x&&(b=!1));if(!h)for(_=i+1;4>_;_++)0<g[_]&&(S=j[r]),v[_]<N[L[_]]&&(E=j[r]);T||(w=l(g[i],j[r],M[r],N[r])+S,x=l(v[i],j[r],M[r],N[r])-E,y&&(k=0>w?0:w>N[r]?e(".dw-li",c).length:m(c,w)+0),b&&(C=0>x?0:x>N[r]?e(".dw-li",c).length:m(c,x)+1)),(y||b||T)&&(h?e(".dw-li",c).slice(k,C).addClass("dw-v"):e(".dw-li",c).slice(k,C).removeClass("dw-v"))}}))}function m(t,n){return e(".dw-li",t).index(e('.dw-li[data-val="'+n+'"]',t))}function g(e){var n,i=[];if(null===e||e===t)return e;for(n in R)i[R[n]]=j[n](e);return i}function v(e){var t,n,i,r=[];if(e){for(t=0;t<e.length;t++)if(n=e[t],n.start&&n.start.getTime)for(i=new Date(n.start);i<=n.end;)r.push(new Date(i.getFullYear(),i.getMonth(),i.getDate())),i.setDate(i.getDate()+1);else r.push(n);return r}return e}var y,b=e(this),w={};if(b.is("input")){switch(b.attr("type")){case"date":y="yy-mm-dd";break;case"datetime":y="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":y="yy-mm-ddTHH:ii:ss";break;case"month":y="yy-mm",w.dateOrder="mmyy";break;case"time":y="HH:ii:ss"}var x=b.attr("min"),b=b.attr("max");x&&(w.minDate=i.parseDate(y,x)),b&&(w.maxDate=i.parseDate(y,b))}var _,k,C,S,E,T,A,M,N,x=e.extend({},r.settings),P=e.extend(r.settings,n.datetime.defaults,o,w,x),I=0,O=[],w=[],D=[],R={},j={y:function(e){return P.getYear(e)},m:function(e){return P.getMonth(e)},d:function(e){return P.getDay(e)},h:function(e){return e=e.getHours(),e=q&&e>=12?e-12:e,l(e,W,Q,et)},i:function(e){return l(e.getMinutes(),Y,K,tt)},s:function(e){return l(e.getSeconds(),J,Z,nt)},a:function(e){return U&&11<e.getHours()?1:0}},V=P.invalid,L=P.valid,x=P.preset,F=P.dateOrder,B=P.timeWheels,H=F.match(/D/),U=B.match(/a/i),q=B.match(/h/),$="datetime"==x?P.dateFormat+P.separator+P.timeFormat:"time"==x?P.timeFormat:P.dateFormat,z=new Date,b=P.steps||{},W=b.hour||P.stepHour||1,Y=b.minute||P.stepMinute||1,J=b.second||P.stepSecond||1,b=b.zeroBased,X=P.minDate||new Date(P.startYear,0,1),G=P.maxDate||new Date(P.endYear,11,31,23,59,59),Q=b?0:X.getHours()%W,K=b?0:X.getMinutes()%Y,Z=b?0:X.getSeconds()%J,et=Math.floor(((q?11:23)-Q)/W)*W+Q,tt=Math.floor((59-K)/Y)*Y+K,nt=Math.floor((59-K)/Y)*Y+K;if(y=y||$,x.match(/date/i)){for(e.each(["y","m","d"],function(e,t){_=F.search(RegExp(t,"i")),_>-1&&D.push({o:_,v:t})}),D.sort(function(e,t){return e.o>t.o?1:-1}),e.each(D,function(e,t){R[t.v]=e}),b=[],k=0;3>k;k++)if(k==R.y){for(I++,S=[],C=[],E=P.getYear(X),T=P.getYear(G),_=E;T>=_;_++)C.push(_),S.push((F.match(/yy/i)?_:(_+"").substr(2,2))+(P.yearSuffix||""));a(b,C,S,P.yearText)}else if(k==R.m){for(I++,S=[],C=[],_=0;12>_;_++)E=F.replace(/[dy]/gi,"").replace(/mm/,(9>_?"0"+(_+1):_+1)+(P.monthSuffix||"")).replace(/m/,_+1+(P.monthSuffix||"")),C.push(_),S.push(E.match(/MM/)?E.replace(/MM/,'<span class="dw-mon">'+P.monthNames[_]+"</span>"):E.replace(/M/,'<span class="dw-mon">'+P.monthNamesShort[_]+"</span>"));a(b,C,S,P.monthText)}else if(k==R.d){for(I++,S=[],C=[],_=1;32>_;_++)C.push(_),S.push((F.match(/dd/i)&&10>_?"0"+_:_)+(P.daySuffix||""));a(b,C,S,P.dayText)}w.push(b)}if(x.match(/time/i)){for(A=!0,D=[],e.each(["h","i","s","a"],function(e,t){e=B.search(RegExp(t,"i")),e>-1&&D.push({o:e,v:t})}),D.sort(function(e,t){return e.o>t.o?1:-1}),e.each(D,function(e,t){R[t.v]=I+e}),b=[],k=I;I+4>k;k++)if(k==R.h){for(I++,S=[],C=[],_=Q;(q?12:24)>_;_+=W)C.push(_),S.push(q&&0===_?12:B.match(/hh/i)&&10>_?"0"+_:_);a(b,C,S,P.hourText)}else if(k==R.i){for(I++,S=[],C=[],_=K;60>_;_+=Y)C.push(_),S.push(B.match(/ii/)&&10>_?"0"+_:_);a(b,C,S,P.minuteText)}else if(k==R.s){for(I++,S=[],C=[],_=Z;60>_;_+=J)C.push(_),S.push(B.match(/ss/)&&10>_?"0"+_:_);a(b,C,S,P.secText)}else k==R.a&&(I++,x=B.match(/A/),a(b,[0,1],x?[P.amText.toUpperCase(),P.pmText.toUpperCase()]:[P.amText,P.pmText],P.ampmText));w.push(b)}return r.getVal=function(e){return r._hasValue||e?u(r.getArrayVal(e)):null},r.setDate=function(e,t,n,i,o){r.setArrayVal(g(e),t,o,i,n)},r.getDate=r.getVal,r.format=$,r.order=R,r.handlers.now=function(){r.setDate(new Date,!1,.3,!0,!0)},r.buttons.now={text:P.nowText,handler:"now"},V=v(V),L=v(L),X=u(g(X)),G=u(g(G)),M={y:X.getFullYear(),m:0,d:1,h:Q,i:K,s:Z,a:0},N={y:G.getFullYear(),m:11,d:31,h:et,i:tt,s:nt,a:1},{wheels:w,headerText:P.headerText?function(){return i.formatDate($,u(r.getArrayVal(!0)),P)}:!1,formatResult:function(e){return i.formatDate(y,u(e),P)},parseValue:function(e){return g(e?i.parseDate(y,e,P):P.defaultValue||new Date)},validate:function(n,i,o,a){var i=c(u(r.getArrayVal(!0)),a),l=g(i),h=s(l,"y"),d=s(l,"m"),v=!0,y=!0;e.each("y,m,d,a,h,i,s".split(","),function(i,r){if(R[r]!==t){var o=M[r],a=N[r],u=31,c=s(l,r),f=e(".dw-ul",n).eq(R[r]);if("d"==r&&(a=u=P.getMaxDayOfMonth(h,d),H&&e(".dw-li",f).each(function(){var t=e(this),n=t.data("val"),i=P.getDate(h,d,n).getDay(),n=F.replace(/[my]/gi,"").replace(/dd/,(10>n?"0"+n:n)+(P.daySuffix||"")).replace(/d/,n+(P.daySuffix||""));e(".dw-i",t).html(n.match(/DD/)?n.replace(/DD/,'<span class="dw-day">'+P.dayNames[i]+"</span>"):n.replace(/D/,'<span class="dw-day">'+P.dayNamesShort[i]+"</span>"))})),v&&X&&(o=j[r](X)),y&&G&&(a=j[r](G)),"y"!=r){var g=m(f,o),b=m(f,a);e(".dw-li",f).removeClass("dw-v").slice(g,b+1).addClass("dw-v"),"d"==r&&e(".dw-li",f).removeClass("dw-h").slice(u).addClass("dw-h")}o>c&&(c=o),c>a&&(c=a),v&&(v=c==o),y&&(y=c==a),"d"==r&&(o=P.getDate(h,d,1).getDay(),a={},p(V,h,d,o,u,a,1),p(L,h,d,o,u,a,0),e.each(a,function(t,n){n&&e(".dw-li",f).eq(t).removeClass("dw-v")}))}}),A&&e.each(["a","h","i","s"],function(i,o){var u=s(l,o),c=s(l,"d"),p=e(".dw-ul",n).eq(R[o]);R[o]!==t&&(f(V,i,o,l,h,d,c,p,0),f(L,i,o,l,h,d,c,p,1),O[i]=+r.getValidCell(u,p,a).val)}),r._tempWheelArray=l}}};e.each(["date","time","datetime"],function(e,t){n.presets.scroller[t]=s})}(jQuery),function(e,t){var n=e.mobiscroll,i=n.util,r=i.isString,o={inputClass:"",invalid:[],rtl:!1,showInput:!0,group:!1,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};n.presetShort("select"),n.presets.scroller.select=function(n){function s(){var n,i,r,o,s,a=0,l={};y=[],D?e.each(O,function(e,u){o=u[S.dataText],s=u[S.dataValue],i=u[S.dataGroup],r={value:s,text:o},U[s]=r,y.push(r),R&&(l[i]===t?(n={label:i,options:[]},q[a]=n,l[i]=a,a++):n=q[l[i]],r.group=l[i],n.options.push(r)),u[S.dataDisabled]&&B.push(s)}):R?e("optgroup",T).each(function(t){q[t]={label:this.label,options:[]},e("option",this).each(function(){r={value:this.value,text:this.text,group:t},U[this.value]=r,q[t].options.push(r),this.disabled&&B.push(this.value)})}):e("option",T).each(function(){r={value:this.value,text:this.text},U[this.value]=r,y.push(r),this.disabled&&B.push(this.value)})}function a(t,n,i){e.each(t,function(e,t){i.push(t.text),n.push(t.value)})}function l(){var t,n=0,i=[],r=[],o=[[]];return V&&(e.each(q,function(e,t){i.push(t.label),r.push(e)}),t={values:i,keys:r,label:S.groupLabel},E?o[0][n]=t:o[n]=[t],n++),i=[],r=[],L?e.each(q,function(e,t){i.push(t.label),r.push("__group"+e),B.push("__group"+e),a(t.options,r,i)}):a(V?q[f].options:y,r,i),t={multiple:A,values:i,keys:r,label:N},E?o[0][n]=t:o[n]=[t],o}function u(n){A&&e.isArray(n)&&(n=n[0]),w=n===t||null===n||""===n?j:n,V&&(f=U[w].group)}function c(e,t){var i=e?n._tempWheelArray:n._hasValue?n._wheelArray:null;return i?S.group&&t?i:i[b]:null}function h(){var e,t;e=[];var n=0;if(A){t=[];for(n in H)e.push(U[n]?U[n].text:""),t.push(n);e=e.join(", ")}else t=w,e=U[w]?U[w].text:"";v.val(e),T.val(t)}function d(e){var t=e.attr("data-val"),n=e.hasClass("dw-msel");return A&&e.closest(".dwwl").hasClass("dwwms")?(e.hasClass("dw-v")&&(n?(e.removeClass(P).removeAttr("aria-selected"),delete H[t]):(e.addClass(P).attr("aria-selected","true"),H[t]=t)),!1):void 0}var p,f,m,g,v,y,b,w,x,_,k,C=e.extend({},n.settings),S=e.extend(n.settings,o,C),C=S.layout||(/top|bottom/.test(S.display)?"liquid":""),E="liquid"==C,T=e(this),A=S.multiple||T.prop("multiple"),M=this.id+"_dummy";g=e('label[for="'+this.id+'"]').attr("for",M);var N=S.label!==t?S.label:g.length?g.text():T.attr("name"),P="dw-msel mbsc-ic mbsc-ic-"+S.checkIcon,I=S.readonly,O=S.data,D=!!O,R=D?O[0][S.dataGroup]:e("optgroup",T).length,j=D?O[0][S.dataValue]:e("option",T).attr("value"),V=R&&S.group,L=R&&!V,F=T.val()||[],B=[],H={},U={},q={};if(S.invalid.length||(S.invalid=B),V?(m=0,b=1):(m=-1,b=0),A)for(F&&r(F)&&(F=F.split(",")),g=0;g<F.length;g++)H[F[g]]=F[g];return s(),u(T.val()),e("#"+M).remove(),v=e('<input type="text" id="'+M+'" class="'+S.inputClass+'" placeholder="'+(S.placeholder||"")+'" readonly />'),S.showInput&&v.insertBefore(T),n.attachShow(v),T.addClass("dw-hsel").attr("tabindex",-1).closest(".ui-field-contain").trigger("create"),h(),n.setVal=function(e,t,o,s,a){A&&(e&&r(e)&&(e=e.split(",")),H=i.arrayToObject(e),e=e?e[0]:null),n._setVal(e,t,o,s,a)},n.getVal=function(e,t){return A?i.objectToArray(H):c(e,t)},n.getValues=n.getVal,n.getValue=c,{width:50,layout:C,headerText:!1,anchor:v,formatResult:function(e){var t,n=[];if(A){for(t in H)n.push(U[t]?U[t].text:"");return n.join(", ")}return w=e[b],U[w]?U[w].text:""},parseValue:function(e){return u(e===t?T.val():e),V?[f,w]:[w]},onValueTap:d,onValueFill:h,onBeforeShow:function(){A&&S.counter&&(S.headerText=function(){var t=0;return e.each(H,function(){t++}),t+" "+S.selectedText}),u(T.val()),V&&(_=f,n._tempWheelArray=[f,w]),s(),S.wheels=l()},onMarkupReady:function(t){t.addClass("dw-select"),e(".dwwl"+m,t).on("mousedown touchstart",function(){clearTimeout(k)}),L&&(e(".dw",t).addClass("dw-select-gr"),e('.dw-li[data-val^="__group"]',t).addClass("dw-w-gr")),A&&(t.addClass("dwms"),e(".dwwl",t).on("keydown",function(t){32==t.keyCode&&(t.preventDefault(),t.stopPropagation(),d(e(".dw-sel",this)))}).eq(b).addClass("dwwms").attr("aria-multiselectable","true"),x=e.extend({},H))},validate:function(i,r,o){var s,a,u=n.getArrayVal(!0),c=e(".dw-ul",i).eq(b);if(r===t&&A){a=H,s=0,e(".dwwl"+b+" .dw-li",i).removeClass(P).removeAttr("aria-selected");for(s in a)e(".dwwl"+b+' .dw-li[data-val="'+a[s]+'"]',i).addClass(P).attr("aria-selected","true")}if(!V||r!==t&&r!==m)w=u[b];else if(f=+u[m],f!==_){if(w=q[f].options[0].value,S.wheels=l(),!p)return n._tempWheelArray=[f,w],S.readonly=[!1,!0],clearTimeout(k),k=setTimeout(function(){p=!0,_=f,n.changeWheel([b],t,!0),S.readonly=I},1e3*o),!1}else S.readonly=I;e.each(S.invalid,function(t,n){e('.dw-li[data-val="'+n+'"]',c).removeClass("dw-v")}),p=!1},onClear:function(t){H={},v.val(""),e(".dwwl"+b+" .dw-li",t).removeClass(P).removeAttr("aria-selected")
},onCancel:function(){!n.live&&A&&(H=e.extend({},x))},onDestroy:function(){v.remove(),T.removeClass("dw-hsel").removeAttr("tabindex")}}}}(jQuery),function(e){e.each(["date","time","datetime"],function(t,n){e.mobiscroll.presetShort(n)})}(jQuery),function(e){var t,n;n=navigator.userAgent.match(/Android|iPhone|iPad|iPod|Windows|Windows Phone|MSIE/i),/Android/i.test(n)?(t="android-holo",(n=navigator.userAgent.match(/Android\s+([\d\.]+)/i))&&(n=n[0].replace("Android ",""),t=4<=n.split(".")[0]?"android-holo":"android")):/iPhone/i.test(n)||/iPad/i.test(n)||/iPod/i.test(n)?(t="ios",(n=navigator.userAgent.match(/OS\s+([\d\_]+)/i))&&(n=n[0].replace(/_/g,".").replace("OS ",""),t=n>="7"?"ios":"ios-classic")):(/Windows/i.test(n)||/MSIE/i.test(n)||/Windows Phone/i.test(n))&&(t="wp"),e.mobiscroll.themes[t]&&(e.mobiscroll.defaults.theme=t)}(jQuery),function(e){e.mobiscroll.themes.epsilon={baseTheme:"mobiscroll",rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},e.mobiscroll.themes.listview.epsilon={baseTheme:"mobiscroll"},e.mobiscroll.themes.menustrip.epsilon={baseTheme:"mobiscroll"}}(jQuery),define("mobiscroll",["jquery"],function(e){return function(){var t;return t||e.mobiscroll}}(this)),!function(){function e(t,n){t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=n)}function t(e,t,n,i,r){this.stream=e,this.header=t,this.length=n,this.tag=i,this.sub=r}function n(e){var t,n,i="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),i+=tt.charAt(n>>6)+tt.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),i+=tt.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),i+=tt.charAt(n>>2)+tt.charAt((3&n)<<4));(3&i.length)>0;)i+=nt;return i}function i(e){var t,n,i,r="",o=0;for(t=0;t<e.length&&e.charAt(t)!=nt;++t)i=tt.indexOf(e.charAt(t)),0>i||(0==o?(r+=c(i>>2),n=3&i,o=1):1==o?(r+=c(n<<2|i>>4),n=15&i,o=2):2==o?(r+=c(n),r+=c(i>>2),n=3&i,o=3):(r+=c(n<<2|i>>4),r+=c(15&i),o=0));return 1==o&&(r+=c(n<<2)),r}function r(e){var t,n=i(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function o(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function s(){return new o(null)}function a(e,t,n,i,r,o){for(;--o>=0;){var s=t*this[e++]+n[i]+r;r=Math.floor(s/67108864),n[i++]=67108863&s}return r}function l(e,t,n,i,r,o){for(var s=32767&t,a=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,c=a*l+u*s;l=s*l+((32767&c)<<15)+n[i]+(1073741823&r),r=(l>>>30)+(c>>>15)+a*u+(r>>>30),n[i++]=1073741823&l}return r}function u(e,t,n,i,r,o){for(var s=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,c=a*l+u*s;l=s*l+((16383&c)<<14)+n[i]+r,r=(l>>28)+(c>>14)+a*u,n[i++]=268435455&l}return r}function c(e){return lt.charAt(e)}function h(e,t){var n=ut[e.charCodeAt(t)];return null==n?-1:n}function d(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function p(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+this.DV:this.t=0}function f(e){var t=s();return t.fromInt(e),t}function m(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var i=e.length,r=!1,s=0;--i>=0;){var a=8==n?255&e[i]:h(e,i);0>a?"-"==e.charAt(i)&&(r=!0):(r=!1,0==s?this[this.t++]=a:s+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=n,s>=this.DB&&(s-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&o.ZERO.subTo(this,this)}function g(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function v(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,i=(1<<t)-1,r=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-->0)for(a<this.DB&&(n=this[s]>>a)>0&&(r=!0,o=c(n));s>=0;)t>a?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&i,0>=a&&(a+=this.DB,--s)),n>0&&(r=!0),r&&(o+=c(n));return r?o:"0"}function y(){var e=s();return o.ZERO.subTo(this,e),e}function b(){return this.s<0?this.negate():this}function w(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(t=n-e.t,0!=t)return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0}function x(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function _(){return this.t<=0?0:this.DB*(this.t-1)+x(this[this.t-1]^this.s&this.DM)}function k(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function C(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function S(e,t){var n,i=e%this.DB,r=this.DB-i,o=(1<<r)-1,s=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>r|a,a=(this[n]&o)<<i;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function E(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)return void(t.t=0);var i=e%this.DB,r=this.DB-i,o=(1<<i)-1;t[0]=this[n]>>i;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<r,t[s-n]=this[s]>>i;i>0&&(t[this.t-n-1]|=(this.s&o)<<r),t.t=this.t-n,t.clamp()}function T(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);r>n;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function A(e,t){var n=this.abs(),i=e.abs(),r=n.t;for(t.t=r+i.t;--r>=0;)t[r]=0;for(r=0;r<i.t;++r)t[r+n.t]=n.am(0,i[r],t,r,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)}function M(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function N(e,t,n){var i=e.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=s());var a=s(),l=this.s,u=e.s,c=this.DB-x(i[i.t-1]);c>0?(i.lShiftTo(c,a),r.lShiftTo(c,n)):(i.copyTo(a),r.copyTo(n));var h=a.t,d=a[h-1];if(0!=d){var p=d*(1<<this.F1)+(h>1?a[h-2]>>this.F2:0),f=this.FV/p,m=(1<<this.F1)/p,g=1<<this.F2,v=n.t,y=v-h,b=null==t?s():t;for(a.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),o.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a[a.t++]=0;for(;--y>=0;){var w=n[--v]==d?this.DM:Math.floor(n[v]*f+(n[v-1]+g)*m);if((n[v]+=a.am(0,w,n,y,0,h))<w)for(a.dlShiftTo(y,b),n.subTo(b,n);n[v]<--w;)n.subTo(b,n)}null!=t&&(n.drShiftTo(h,t),l!=u&&o.ZERO.subTo(t,t)),n.t=h,n.clamp(),c>0&&n.rShiftTo(c,n),0>l&&o.ZERO.subTo(n,n)}}}function P(e){var t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t}function I(e){this.m=e}function O(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function D(e){return e}function R(e){e.divRemTo(this.m,null,e)}function j(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function V(e,t){e.squareTo(t),this.reduce(t)}function L(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function F(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function B(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t}function H(e){var t=s();return e.copyTo(t),this.reduce(t),t}function U(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function q(e,t){e.squareTo(t),this.reduce(t)}function $(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function z(){return 0==(this.t>0?1&this[0]:this.s)}function W(e,t){if(e>4294967295||1>e)return o.ONE;var n=s(),i=s(),r=t.convert(this),a=x(e)-1;for(r.copyTo(n);--a>=0;)if(t.sqrTo(n,i),(e&1<<a)>0)t.mulTo(i,r,n);else{var l=n;n=i,i=l}return t.revert(n)}function Y(e,t){var n;return n=256>e||t.isEven()?new I(t):new F(t),this.exp(e,n)}function J(e,t){return new o(e,t)}function X(e,t){if(t<e.length+11)throw new Error("Message too long for RSA");for(var n=new Array,i=e.length-1;i>=0&&t>0;){var r=e.charCodeAt(i--);128>r?n[--t]=r:r>127&&2048>r?(n[--t]=63&r|128,n[--t]=r>>6|192):(n[--t]=63&r|128,n[--t]=r>>6&63|128,n[--t]=r>>12|224)}n[--t]=0;for(var s=0,a=0,l=0;t>2;)0==l&&(a=ct.random.randomWords(1,0)[0]),s=a>>l&255,l=(l+8)%32,0!=s&&(n[--t]=s);return n[--t]=2,n[--t]=0,new o(n)}function G(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Q(e,t){if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw new Error("Invalid RSA public key");this.n=J(e,16),this.e=parseInt(t,16)}function K(e){return e.modPowInt(this.e,this.n)}function Z(e){var t=X(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var i=n.toString(16);return 0==(1&i.length)?i:"0"+i}e.prototype.get=function(e){if(void 0==e&&(e=this.pos++),e>=this.enc.length)throw"Requesting byte offset "+e+" on a stream of length "+this.enc.length;return this.enc[e]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},e.prototype.hexDump=function(e,t){for(var n="",i=e;t>i;++i)switch(n+=this.hexByte(this.get(i)),15&i){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}return n},e.prototype.parseStringISO=function(e,t){for(var n="",i=e;t>i;++i)n+=String.fromCharCode(this.get(i));return n},e.prototype.parseStringUTF=function(e,t){for(var n="",i=0,r=e;t>r;){var i=this.get(r++);n+=String.fromCharCode(128>i?i:i>191&&224>i?(31&i)<<6|63&this.get(r++):(15&i)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return n},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(e,t){var n=this.parseStringISO(e,t),i=this.reTime.exec(n);return i?(n=i[1]+"-"+i[2]+"-"+i[3]+" "+i[4],i[5]&&(n+=":"+i[5],i[6]&&(n+=":"+i[6],i[7]&&(n+="."+i[7]))),i[8]&&(n+=" UTC","Z"!=i[8]&&(n+=i[8],i[9]&&(n+=":"+i[9]))),n):"Unrecognized time: "+n},e.prototype.parseInteger=function(e,t){var n=t-e;if(n>4){n<<=3;var i=this.get(e);if(0==i)n-=8;else for(;128>i;)i<<=1,--n;return"("+n+" bit)"}for(var r=0,o=e;t>o;++o)r=r<<8|this.get(o);return r},e.prototype.parseBitString=function(e,t){var n=this.get(e),i=(t-e-1<<3)-n,r="("+i+" bit)";if(20>=i){var o=n;r+=" ";for(var s=t-1;s>e;--s){for(var a=this.get(s),l=o;8>l;++l)r+=a>>l&1?"1":"0";o=0}}return r},e.prototype.parseOctetString=function(e,t){var n=t-e,i="("+n+" byte) ";n>20&&(t=e+20);for(var r=e;t>r;++r)i+=this.hexByte(this.get(r));return n>20&&(i+=String.fromCharCode(8230)),i},e.prototype.parseOID=function(e,t){for(var n,i=0,r=0,o=e;t>o;++o){var s=this.get(o);i=i<<7|127&s,r+=7,128&s||(void 0==n?n=parseInt(i/40)+"."+i%40:n+="."+(r>=31?"bigint":i),i=r=0),n+=String.fromCharCode()}return n},t.prototype.typeName=function(){if(void 0==this.tag)return"unknown";var e=this.tag>>6,t=(this.tag>>5&1,31&this.tag);switch(e){case 0:switch(t){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+t.toString(16)}case 1:return"Application_"+t.toString(16);case 2:return"["+t+"]";case 3:return"Private_"+t.toString(16)}},t.prototype.content=function(){if(void 0==this.tag)return null;var e=this.tag>>6;if(0!=e)return null==this.sub?null:"("+this.sub.length+")";var t=31&this.tag,n=this.posContent(),i=Math.abs(this.length);switch(t){case 1:return 0==this.stream.get(n)?"false":"true";case 2:return this.stream.parseInteger(n,n+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+i);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+i);case 6:return this.stream.parseOID(n,n+i);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+i);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+i);case 23:case 24:return this.stream.parseTime(n,n+i)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null==this.sub?"null":this.sub.length)+"]"},t.prototype.print=function(e){if(void 0==e&&(e=""),document.writeln(e+this),null!=this.sub){e+="  ";for(var t=0,n=this.sub.length;n>t;++t)this.sub[t].print(e)}},t.prototype.toPrettyString=function(e){void 0==e&&(e="");var t=e+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(t+="+"),t+=this.length,32&this.tag?t+=" (constructed)":3!=this.tag&&4!=this.tag||null==this.sub||(t+=" (encapsulates)"),t+="\n",null!=this.sub){e+="  ";for(var n=0,i=this.sub.length;i>n;++n)t+=this.sub[n].toPrettyString(e)}return t},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.decodeLength=function(e){var t=e.get(),n=127&t;if(n==t)return n;if(n>3)throw"Length over 24 bits not supported at position "+(e.pos-1);if(0==n)return-1;t=0;for(var i=0;n>i;++i)t=t<<8|e.get();return t},t.hasContent=function(n,i,r){if(32&n)return!0;if(3>n||n>4)return!1;var o=new e(r);3==n&&o.get();var s=o.get();if(s>>6&1)return!1;try{var a=t.decodeLength(o);return o.pos-r.pos+a==i}catch(l){return!1}},t.decode=function(n){n instanceof e||(n=new e(n,0));var i=new e(n),r=n.get(),o=t.decodeLength(n),s=n.pos-i.pos,a=null;if(t.hasContent(r,o,n)){var l=n.pos;if(3==r&&n.get(),a=[],o>=0){for(var u=l+o;n.pos<u;)a[a.length]=t.decode(n);if(n.pos!=u)throw"Content size is not correct for container starting at offset "+l}else try{for(;;){var c=t.decode(n);if(0==c.tag)break;a[a.length]=c}o=l-n.pos}catch(h){throw"Exception while decoding undefined length content: "+h}}else n.pos+=o;return new t(i,s,o,r,a)};var et,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nt="=",it=0xdeadbeefcafe,rt=15715070==(16777215&it);rt&&"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=l,et=30):rt&&"Netscape"!=navigator.appName?(o.prototype.am=a,et=26):(o.prototype.am=u,et=28),o.prototype.DB=et,o.prototype.DM=(1<<et)-1,o.prototype.DV=1<<et;var ot=52;o.prototype.FV=Math.pow(2,ot),o.prototype.F1=ot-et,o.prototype.F2=2*et-ot;var st,at,lt="0123456789abcdefghijklmnopqrstuvwxyz",ut=new Array;for(st="0".charCodeAt(0),at=0;9>=at;++at)ut[st++]=at;for(st="a".charCodeAt(0),at=10;36>at;++at)ut[st++]=at;for(st="A".charCodeAt(0),at=10;36>at;++at)ut[st++]=at;I.prototype.convert=O,I.prototype.revert=D,I.prototype.reduce=R,I.prototype.mulTo=j,I.prototype.sqrTo=V,F.prototype.convert=B,F.prototype.revert=H,F.prototype.reduce=U,F.prototype.mulTo=$,F.prototype.sqrTo=q,o.prototype.copyTo=d,o.prototype.fromInt=p,o.prototype.fromString=m,o.prototype.clamp=g,o.prototype.dlShiftTo=k,o.prototype.drShiftTo=C,o.prototype.lShiftTo=S,o.prototype.rShiftTo=E,o.prototype.subTo=T,o.prototype.multiplyTo=A,o.prototype.squareTo=M,o.prototype.divRemTo=N,o.prototype.invDigit=L,o.prototype.isEven=z,o.prototype.exp=W,o.prototype.toString=v,o.prototype.negate=y,o.prototype.abs=b,o.prototype.compareTo=w,o.prototype.bitLength=_,o.prototype.mod=P,o.prototype.modPowInt=Y,o.ZERO=f(0),o.ONE=f(1),G.prototype.doPublic=K,G.prototype.setPublic=Q,G.prototype.encrypt=Z;var ct={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};"undefined"!=typeof module&&module.exports&&(module.exports=ct),ct.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var t,n,i,r,o,s=this._tables[0][4],a=this._tables[1],l=e.length,u=1;if(4!==l&&6!==l&&8!==l)throw new ct.exception.invalid("invalid aes key size");for(this._key=[r=e.slice(0),o=[]],t=l;4*l+28>t;t++)i=r[t-1],(t%l===0||8===l&&t%l===4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%l===0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),r[t]=r[t-l]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],o[n]=4>=t||4>n?i:a[0][s[i>>>24]]^a[1][s[i>>16&255]]^a[2][s[i>>8&255]]^a[3][s[255&i]]},ct.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e,t,n,i,r,o,s,a,l,u=this._tables[0],c=this._tables[1],h=u[4],d=c[4],p=[],f=[];for(e=0;256>e;e++)f[(p[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!h[t];t^=i||1,n=f[n]||1)for(s=n^n<<1^n<<2^n<<3^n<<4,s=s>>8^255&s^99,h[t]=s,d[s]=t,o=p[r=p[i=p[t]]],l=16843009*o^65537*r^257*i^16843008*t,a=257*p[s]^16843008*s,e=0;4>e;e++)u[e][t]=a=a<<24^a>>>8,c[e][s]=l=l<<24^l>>>8;for(e=0;5>e;e++)u[e]=u[e].slice(0),c[e]=c[e].slice(0)},_crypt:function(e,t){if(4!==e.length)throw new ct.exception.invalid("invalid aes block size");var n,i,r,o,s=this._key[t],a=e[0]^s[0],l=e[t?3:1]^s[1],u=e[2]^s[2],c=e[t?1:3]^s[3],h=s.length/4-2,d=4,p=[0,0,0,0],f=this._tables[t],m=f[0],g=f[1],v=f[2],y=f[3],b=f[4];for(o=0;h>o;o++)n=m[a>>>24]^g[l>>16&255]^v[u>>8&255]^y[255&c]^s[d],i=m[l>>>24]^g[u>>16&255]^v[c>>8&255]^y[255&a]^s[d+1],r=m[u>>>24]^g[c>>16&255]^v[a>>8&255]^y[255&l]^s[d+2],c=m[c>>>24]^g[a>>16&255]^v[l>>8&255]^y[255&u]^s[d+3],d+=4,a=n,l=i,u=r;for(o=0;4>o;o++)p[t?3&-o:o]=b[a>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^s[d++],n=a,a=l,l=u,u=c,c=n;return p}},ct.bitArray={bitSlice:function(e,t,n){return e=ct.bitArray._shiftRight(e.slice(t/32),32-(31&t)).slice(1),void 0===n?e:ct.bitArray.clamp(e,n-t)},extract:function(e,t,n){var i,r=Math.floor(-t-n&31);return i=-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r,i&(1<<n)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],i=ct.bitArray.getPartial(n);return 32===i?e.concat(t):ct.bitArray._shiftRight(t,i,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t,n=e.length;return 0===n?0:(t=e[n-1],32*(n-1)+ct.bitArray.getPartial(t))},clamp:function(e,t){if(32*e.length<t)return e;e=e.slice(0,Math.ceil(t/32));var n=e.length;return t=31&t,n>0&&t&&(e[n-1]=ct.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(ct.bitArray.bitLength(e)!==ct.bitArray.bitLength(t))return!1;var n,i=0;for(n=0;n<e.length;n++)i|=e[n]^t[n];return 0===i},_shiftRight:function(e,t,n,i){var r,o,s=0;for(void 0===i&&(i=[]);t>=32;t-=32)i.push(n),n=0;if(0===t)return i.concat(e);for(r=0;r<e.length;r++)i.push(n|e[r]>>>t),n=e[r]<<32-t;return s=e.length?e[e.length-1]:0,o=ct.bitArray.getPartial(s),i.push(ct.bitArray.partial(t+o&31,t+o>32?n:i.pop(),1)),i},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}},ct.codec.hex={fromBits:function(e){var t,n="";for(t=0;t<e.length;t++)n+=((0|e[t])+0xf00000000000).toString(16).substr(4);return n.substr(0,ct.bitArray.bitLength(e)/4)},toBits:function(e){var t,n,i=[];for(e=e.replace(/\s|0x/g,""),n=e.length,e+="00000000",t=0;t<e.length;t+=8)i.push(0^parseInt(e.substr(t,8),16));return ct.bitArray.clamp(i,4*n)}},ct.codec.utf8String={fromBits:function(e){var t,n,i="",r=ct.bitArray.bitLength(e);for(t=0;r/8>t;t++)0===(3&t)&&(n=e[t/4]),i+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(i))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,n=[],i=0;for(t=0;t<e.length;t++)i=i<<8|e.charCodeAt(t),3===(3&t)&&(n.push(i),i=0);return 3&t&&n.push(ct.bitArray.partial(8*(3&t),i)),n}},ct.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var i,r="",o=0,s=ct.codec.base64._chars,a=0,l=ct.bitArray.bitLength(e);for(n&&(s=s.substr(0,62)+"-_"),i=0;6*r.length<l;)r+=s.charAt((a^e[i]>>>o)>>>26),6>o?(a=e[i]<<6-o,o+=26,i++):(a<<=6,o-=6);for(;3&r.length&&!t;)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,i,r=[],o=0,s=ct.codec.base64._chars,a=0;for(t&&(s=s.substr(0,62)+"-_"),n=0;n<e.length;n++){if(i=s.indexOf(e.charAt(n)),0>i)throw new ct.exception.invalid("this isn't base64!");o>26?(o-=26,r.push(a^i>>>o),a=i<<32-o):(o+=6,a^=i<<32-o)}return 56&o&&r.push(ct.bitArray.partial(56&o,a,1)),r}},ct.codec.base64url={fromBits:function(e){return ct.codec.base64.fromBits(e,1,1)},toBits:function(e){return ct.codec.base64.toBits(e,1)}},void 0===ct.beware&&(ct.beware={}),ct.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){ct.mode.cbc={name:"cbc",encrypt:function(e,t,n,i){if(i&&i.length)throw new ct.exception.invalid("cbc can't authenticate data");if(128!==ct.bitArray.bitLength(n))throw new ct.exception.invalid("cbc iv must be 128 bits");var r,o=ct.bitArray,s=o._xor4,a=o.bitLength(t),l=0,u=[];if(7&a)throw new ct.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(r=0;a>=l+128;r+=4,l+=128)n=e.encrypt(s(n,t.slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]);return a=16843009*(16-(a>>3&15)),n=e.encrypt(s(n,o.concat(t,[a,a,a,a]).slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]),u},decrypt:function(e,t,n,i){if(i&&i.length)throw new ct.exception.invalid("cbc can't authenticate data");if(128!==ct.bitArray.bitLength(n))throw new ct.exception.invalid("cbc iv must be 128 bits");if(127&ct.bitArray.bitLength(t)||!t.length)throw new ct.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var r,o,s,a=ct.bitArray,l=a._xor4,u=[];for(i=i||[],r=0;r<t.length;r+=4)o=t.slice(r,r+4),s=l(n,e.decrypt(o)),u.splice(r,0,s[0],s[1],s[2],s[3]),n=o;if(o=255&u[r-1],0==o||o>16)throw new ct.exception.corrupt("pkcs#5 padding corrupt");if(s=16843009*o,!a.equal(a.bitSlice([s,s,s,s],0,8*o),a.bitSlice(u,32*u.length-8*o,32*u.length)))throw new ct.exception.corrupt("pkcs#5 padding corrupt");return a.bitSlice(u,0,32*u.length-8*o)}}},ct.misc.hmac=function(e,t){this._hash=t=t||ct.hash.sha256;var n,i=[[],[]],r=t.prototype.blockSize/32;for(this._baseHash=[new t,new t],e.length>r&&(e=t.hash(e)),n=0;r>n;n++)i[0][n]=909522486^e[n],i[1][n]=1549556828^e[n];this._baseHash[0].update(i[0]),this._baseHash[1].update(i[1])},ct.misc.hmac.prototype.encrypt=ct.misc.hmac.prototype.mac=function(e,t){var n=new this._hash(this._baseHash[0]).update(e,t).finalize();return new this._hash(this._baseHash[1]).update(n).finalize()},ct.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},ct.hash.sha256.hash=function(e){return(new ct.hash.sha256).update(e).finalize()},ct.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){"string"==typeof e&&(e=ct.codec.utf8String.toBits(e));var t,n=this._buffer=ct.bitArray.concat(this._buffer,e),i=this._length,r=this._length=i+ct.bitArray.bitLength(e);for(t=512+i&-512;r>=t;t+=512)this._block(n.splice(0,16));return this},finalize:function(){var e,t=this._buffer,n=this._h;for(t=ct.bitArray.concat(t,[ct.bitArray.partial(1,1)]),e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this._length/4294967296)),t.push(0|this._length);t.length;)this._block(t.splice(0,16));return this.reset(),n},_init:[],_key:[],_precompute:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,n=0,i=2;e:for(;64>n;i++){for(t=2;i>=t*t;t++)if(i%t===0)continue e;8>n&&(this._init[n]=e(Math.pow(i,.5))),this._key[n]=e(Math.pow(i,1/3)),n++}},_block:function(e){var t,n,i,r,o=e.slice(0),s=this._h,a=this._key,l=s[0],u=s[1],c=s[2],h=s[3],d=s[4],p=s[5],f=s[6],m=s[7];for(t=0;64>t;t++)16>t?n=o[t]:(i=o[t+1&15],r=o[t+14&15],n=o[15&t]=(i>>>7^i>>>18^i>>>3^i<<25^i<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+o[15&t]+o[t+9&15]|0),n=n+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(f^d&(p^f))+a[t],m=f,f=p,p=d,d=h+n|0,h=c,c=u,u=l,l=n+(u&c^h&(u^c))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;s[0]=s[0]+l|0,s[1]=s[1]+u|0,s[2]=s[2]+c|0,s[3]=s[3]+h|0,s[4]=s[4]+d|0,s[5]=s[5]+p|0,s[6]=s[6]+f|0,s[7]=s[7]+m|0}},ct.random={randomWords:function(e,t){var n,i,r=[],o=this.isReady(t);if(o===this._NOT_READY)throw new ct.exception.notReady("generator isn't seeded");for(o&this._REQUIRES_RESEED&&this._reseedFromPools(!(o&this._READY)),n=0;e>n;n+=4)(n+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),i=this._gen4words(),r.push(i[0],i[1],i[2],i[3]);return this._gate(),r.slice(0,e)},setDefaultParanoia:function(e){this._defaultParanoia=e},addEntropy:function(e,t,n){n=n||"user";var i,r,o,s=(new Date).valueOf(),a=this._robins[n],l=this.isReady(),u=0;switch(i=this._collectorIds[n],void 0===i&&(i=this._collectorIds[n]=this._collectorIdNext++),void 0===a&&(a=this._robins[n]=0),this._robins[n]=(this._robins[n]+1)%this._pools.length,typeof e){case"number":void 0===t&&(t=1),this._pools[a].update([i,this._eventId++,1,t,s,1,0|e]);break;case"object":var c=Object.prototype.toString.call(e);if("[object Uint32Array]"===c){for(o=[],r=0;r<e.length;r++)o.push(e[r]);e=o}else for("[object Array]"!==c&&(u=1),r=0;r<e.length&&!u;r++)"number"!=typeof e[r]&&(u=1);if(!u){if(void 0===t)for(t=0,r=0;r<e.length;r++)for(o=e[r];o>0;)t++,o>>>=1;this._pools[a].update([i,this._eventId++,2,t,s,e.length].concat(e))}break;case"string":void 0===t&&(t=e.length),this._pools[a].update([i,this._eventId++,3,t,s,e.length]),this._pools[a].update(e);break;default:u=1}if(u)throw new ct.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[a]+=t,this._poolStrength+=t,l===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(e){var t=this._PARANOIA_LEVELS[void 0!==e?e:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(e){var t=this._PARANOIA_LEVELS[e?e:this._defaultParanoia];return this._strength>=t?1:this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new ct.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0}},stopCollectors:function(){this._collectorsStarted&&(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(e,t){this._callbacks[e][this._callbackI++]=t},removeEventListener:function(e,t){var n,i,r=this._callbacks[e],o=[];for(i in r)r.hasOwnProperty(i)&&r[i]===t&&o.push(i);for(n=0;n<o.length;n++)i=o[n],delete r[i]},_pools:[new ct.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var e=0;4>e&&(this._counter[e]=this._counter[e]+1|0,!this._counter[e]);e++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new ct.cipher.aes(this._key)},_reseed:function(e){this._key=ct.hash.sha256.hash(this._key.concat(e)),this._cipher=new ct.cipher.aes(this._key);for(var t=0;4>t&&(this._counter[t]=this._counter[t]+1|0,!this._counter[t]);t++);},_reseedFromPools:function(e){var t,n=[],i=0;for(this._nextReseed=n[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED,t=0;16>t;t++)n.push(4294967296*Math.random()|0);for(t=0;t<this._pools.length&&(n=n.concat(this._pools[t].finalize()),i+=this._poolEntropy[t],this._poolEntropy[t]=0,e||!(this._reseedCount&1<<t));t++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new ct.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=i,i>this._strength&&(this._strength=i),this._reseedCount++,this._reseed(n)},_mouseCollector:function(e){var t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0;ct.random.addEntropy([t,n],2,"mouse")},_loadTimeCollector:function(){ct.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(e,t){var n,i=ct.random._callbacks[e],r=[];for(n in i)i.hasOwnProperty(n)&&r.push(i[n]);for(n=0;n<r.length;n++)r[n](t)}},function(){try{var e=new Uint32Array(32);crypto.getRandomValues(e),ct.random.addEntropy(e,1024,"crypto.getRandomValues")}catch(t){}}(),function(){for(var e in ct.beware)ct.beware.hasOwnProperty(e)&&ct.beware[e]()}();var ht={sjcl:ct,version:"1.3.10"};ht.generateAesKey=function(){return{key:ct.random.randomWords(8,0),encrypt:function(e){return this.encryptWithIv(e,ct.random.randomWords(4,0))},encryptWithIv:function(e,t){var n=new ct.cipher.aes(this.key),i=ct.codec.utf8String.toBits(e),r=ct.mode.cbc.encrypt(n,i,t),o=ct.bitArray.concat(t,r);return ct.codec.base64.fromBits(o)}}},ht.create=function(e){return new ht.EncryptionClient(e)},ht.EncryptionClient=function(e){var i=this,o=[];i.publicKey=e,i.version=ht.version;var s=function(e,t){var n,i,r;n=document.createElement(e);for(i in t)t.hasOwnProperty(i)&&(r=t[i],n.setAttribute(i,r));return n},a=function(e){return window.jQuery&&e instanceof jQuery?e[0]:e.nodeType&&1===e.nodeType?e:document.getElementById(e)},l=function(e){var t,n,i,r,o=[];if("INTEGER"===e.typeName()&&(t=e.posContent(),n=e.posEnd(),i=e.stream.hexDump(t,n).replace(/[ \n]/g,""),o.push(i)),null!==e.sub)for(r=0;r<e.sub.length;r++)o=o.concat(l(e.sub[r]));return o},u=function(e){var t,n,i=[],r=e.children;for(n=0;n<r.length;n++)t=r[n],1===t.nodeType&&t.attributes["data-encrypted-name"]?i.push(t):t.children&&t.children.length>0&&(i=i.concat(u(t)));
return i},c=function(){var n,i,o,s,a,u;try{a=r(e),n=t.decode(a)}catch(c){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(o=l(n),2!==o.length)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return s=o[0],i=o[1],u=new G,u.setPublic(s,i),u},h=function(){return{key:ct.random.randomWords(8,0),sign:function(e){var t=new ct.misc.hmac(this.key,ct.hash.sha256),n=t.encrypt(e);return ct.codec.base64.fromBits(n)}}};i.encrypt=function(e){var t=c(),r=ht.generateAesKey(),o=h(),s=r.encrypt(e),a=o.sign(ct.codec.base64.toBits(s)),l=ct.bitArray.concat(r.key,o.key),u=ct.codec.base64.fromBits(l),d=t.encrypt(u),p="$bt4|javascript_"+i.version.replace(/\./g,"_")+"$",f=null;return d&&(f=n(d)),p+f+"$"+s+"$"+a},i.encryptForm=function(e){var t,n,r,l,c,h;for(e=a(e),h=u(e);o.length>0;){try{e.removeChild(o[0])}catch(d){}o.splice(0,1)}for(c=0;c<h.length;c++)t=h[c],r=t.getAttribute("data-encrypted-name"),n=i.encrypt(t.value),t.removeAttribute("name"),l=s("input",{value:n,type:"hidden",name:r}),o.push(l),e.appendChild(l)},i.onSubmitEncryptForm=function(e,t){var n;e=a(e),n=function(n){return i.encryptForm(e),t?t(n):n},window.jQuery?window.jQuery(e).submit(n):e.addEventListener?e.addEventListener("submit",n,!1):e.attachEvent&&e.attachEvent("onsubmit",n)},i.formEncrypter={encryptForm:i.encryptForm,extractForm:a,onSubmitEncryptForm:i.onSubmitEncryptForm},ct.random.startCollectors()},window.Braintree=ht}(),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("braintree",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.braintree=e()}}(function(){var define,module,exports;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){e("./src/rpc-dispatcher")(),t.exports=e("./src/setup.js")},{"./src/rpc-dispatcher":212,"./src/setup.js":213}],2:[function(e,t){function n(e,t){return e.status>=400?[e,null]:[null,t(e)]}function i(e){var t;this.attrs={},e.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=e.sharedCustomerIdentifier),t=s(e.clientToken),this.driver=e.driver||a,this.authUrl=t.authUrl,this.analyticsUrl=t.analytics?t.analytics.url:void 0,this.clientApiUrl=t.clientApiUrl,this.customerId=e.customerId,this.challenges=t.challenges,this.integration=e.integration||"",this.braintreeLibraryVersion=o=e.version||"",this.attrs.authorizationFingerprint=t.authorizationFingerprint,this.attrs.sharedCustomerIdentifierType=e.sharedCustomerIdentifierType,this.timeoutWatchers=[],this.requestTimeout=e.hasOwnProperty("timeout")?e.timeout:6e4}function r(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}var o,s=e("./parse-client-token"),a=e("./jsonp-driver"),l=e("./util"),u=e("./sepa-mandate"),c=e("./sepa-bank-account"),h=e("./credit-card");i.prototype.requestWithTimeout=function(e,t,i,r,s){var a,l=this;t.braintreeLibraryVersion="braintree/web/"+o,t._meta={integration:this.integration},a=r(e,t,function(e,t){if(l.timeoutWatchers[t]){clearTimeout(l.timeoutWatchers[t]);var r=n(e,function(e){return i(e)});s.apply(null,r)}}),l.requestTimeout>0?this.timeoutWatchers[a]=setTimeout(function(){l.timeoutWatchers[a]=null,s.apply(null,[{errors:"Unknown error"},null])},l.requestTimeout):s.apply(null,[{errors:"Unknown error"},null])},i.prototype.post=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.post,i)},i.prototype.get=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.get,i)},i.prototype.put=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.put,i)},i.prototype.getCreditCards=function(e){this.get(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(e){var t=0,n=e.paymentMethods.length,i=[];for(t;n>t;t++)i.push(new h(e.paymentMethods[t]));return i},e)},i.prototype.tokenizeCard=function(e,t){e.options={validate:!1},this.addCreditCard(e,function(e,n){n&&n.nonce?t(e,n.nonce):t("Unable to tokenize card.",null)})},i.prototype.addSEPAMandate=function(e,t){var n=r(this.attrs,{sepaMandate:e});this.post(l.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),n,function(e){return new u(e.sepaMandates[0])},t)},i.prototype.acceptSEPAMandate=function(e,t){this.put(l.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e,"accept"]),this.attrs,function(e){return new c(e.sepaBankAccounts[0])},t)},i.prototype.getSEPAMandate=function(e,t){var n;n=e.paymentMethodToken?r(this.attrs,{paymentMethodToken:e.paymentMethodToken}):this.attrs,this.get(l.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e.mandateReferenceNumber||""]),n,function(e){return new u(e.sepaMandates[0])},t)},i.prototype.addCreditCard=function(e,t){var n=e.share;delete e.share;var i=r(this.attrs,{share:n,creditCard:e});this.post(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),i,function(e){return new h(e.creditCards[0])},t)},i.prototype.unlockCreditCard=function(e,t,n){var i=r(this.attrs,{challengeResponses:t});this.put(l.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/",e.nonce]),i,function(e){return new h(e.paymentMethods[0])},n)},i.prototype.sendAnalyticsEvents=function(e,t){var i,o,s,a=this,u=[];if(e=l.isArray(e)?e:[e],!this.analyticsUrl)return void(t&&t.apply(null,[null,{}]));for(var c in e)e.hasOwnProperty(c)&&u.push({kind:e[c]});i=this.analyticsUrl,o=r(this.attrs,{analytics:u}),s=this.driver.post(i,o,function(e,i){if(a.timeoutWatchers[i]){clearTimeout(a.timeoutWatchers[i]);var r=n(e,function(e){return e});t&&t.apply(null,r)}}),this.timeoutWatchers[s]=setTimeout(function(){a.timeoutWatchers[s]=null,t.apply(null,[{errors:"Unknown error"},null])},this.requestTimeout)},t.exports=i},{"./credit-card":3,"./jsonp-driver":4,"./parse-client-token":6,"./sepa-bank-account":8,"./sepa-mandate":9,"./util":10}],3:[function(e,t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];this[n]=e[n]}}var i=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];t.exports=n},{}],4:[function(e,t){function n(e,t,n){return o.get(e,t,n)}function i(e,t,n){return t._method="POST",o.get(e,t,n)}function r(e,t,n){return t._method="PUT",o.get(e,t,n)}var o=e("./jsonp");t.exports={get:n,post:i,put:r}},{"./jsonp":5}],5:[function(e,t){(function(n){function i(e,t){var n=document.createElement("script"),i=!1;n.src=e,n.async=!0;var r=t||h.error;"function"==typeof r&&(n.onerror=function(t){r({url:e,event:t})}),n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},a||(a=document.getElementsByTagName("head")[0]),a.appendChild(n)}function r(e,t){var n,i,o,s=[];for(var o in e)e.hasOwnProperty(o)&&(i=e[o],n=t?l.isArray(e)?t+"[]":t+"["+o+"]":o,s.push("object"==typeof i?r(i,n):encodeURIComponent(n)+"="+encodeURIComponent(i)));return s.join("&")}function o(e,t,n,o){var s=-1===(e||"").indexOf("?")?"?":"&";o=o||h.callbackName||"callback";var a=o+"_json"+ ++u;return s+=r(t),c[a]=function(e){n(e,a);try{delete c[a]}catch(t){}c[a]=null},i(e+s+"&"+o+"="+a),a}function s(e){h=e}var a,l=e("./util"),u=0,c=n,h={};t.exports={get:o,init:s,stringify:r}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":10}],6:[function(e,t){function n(e){var t;if(!e)throw new Error("Braintree API Client Misconfigured: clientToken required.");if("object"==typeof e&&null!==e)t=e;else{try{e=window.atob(e)}catch(n){}try{t=JSON.parse(e)}catch(i){throw new Error("Braintree API Client Misconfigured: clientToken is invalid.")}}if(!t.hasOwnProperty("authUrl")||!t.hasOwnProperty("clientApiUrl"))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");return t}e("./polyfill"),t.exports=n},{"./polyfill":7}],7:[function(){(function(e){e.atob=e.atob||function(e){var t=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="";if(!t.test(e))throw new Error("Braintree API Client Misconfigured: clientToken is invalid.");var r=0;do{var o=n.indexOf(e.charAt(r++)),s=n.indexOf(e.charAt(r++)),a=n.indexOf(e.charAt(r++)),l=n.indexOf(e.charAt(r++)),u=(63&o)<<2|s>>4&3,c=(15&s)<<4|a>>2&15,h=(3&a)<<6|63&l;i+=String.fromCharCode(u)+(c?String.fromCharCode(c):"")+(h?String.fromCharCode(h):"")}while(r<e.length);return i}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];this[n]=e[n]}}var i=["bic","maskedIBAN","nonce","accountHolderName"];t.exports=n},{}],9:[function(e,t){function n(e){for(var t=0;t<i.length;t++){var n=i[t];this[n]=e[n]}}var i=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];t.exports=n},{}],10:[function(e,t){function n(e){var t,n,i=[];for(n=0;n<e.length;n++)t=e[n],"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),"/"===t.charAt(0)&&(t=t.substring(1)),i.push(t);return i.join("/")}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&"[object Array]"===Object.prototype.toString.call(e)||!1}t.exports={joinUrlFragments:n,isArray:i}},{}],11:[function(e,t){function n(e){return new i(e)}var i=e("./lib/client"),r=e("./lib/jsonp"),o=e("./lib/jsonp-driver"),s=e("./lib/util"),a=e("./lib/parse-client-token");t.exports={Client:i,configure:n,util:s,JSONP:r,JSONPDriver:o,parseClientToken:a}},{"./lib/client":2,"./lib/jsonp":5,"./lib/jsonp-driver":4,"./lib/parse-client-token":6,"./lib/util":10}],12:[function(e,t){function n(e,t){if(t=t||"["+e+"] is not a valid DOM Element",e&&e.nodeType&&1===e.nodeType)return e;if(e&&window.jQuery&&(e instanceof jQuery||"jquery"in Object(e))&&0!==e.length)return e[0];if("string"==typeof e&&document.getElementById(e))return document.getElementById(e);throw new Error(t)}t.exports={normalizeElement:n}},{}],13:[function(e,t){function n(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n)}t.exports={addEventListener:n,removeEventListener:i}},{}],14:[function(e,t){function n(e){return"[object Function]"===r.call(e)}function i(e,t){return function(){e.apply(t,arguments)}}var r=Object.prototype.toString;t.exports={bind:i,isFunction:n}},{}],15:[function(e,t){function n(){return"https:"===window.location.protocol}function i(e){switch(e){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(e)}}function r(e,t){var n,o,s=[];for(o in e)if(e.hasOwnProperty(o)){var a=e[o];n=t?t+"["+o+"]":o,"object"==typeof a?s.push(r(a,n)):void 0!==a&&null!==a&&s.push(i(n)+"="+i(a))}return s.join("&")}function o(e){for(var t={},n=e.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],s=decodeURIComponent(r[1]);t[o]=s}return t}function s(e){var t=e.split("?");return 2!==t.length?{}:o(t[1])}t.exports={isBrowserHttps:n,makeQueryString:r,decodeQueryString:o,getParams:s}},{}],16:[function(e,t){var n=e("./lib/dom"),i=e("./lib/url"),r=e("./lib/fn"),o=e("./lib/events");t.exports={normalizeElement:n.normalizeElement,isBrowserHttps:i.isBrowserHttps,makeQueryString:i.makeQueryString,decodeQueryString:i.decodeQueryString,getParams:i.getParams,removeEventListener:o.removeEventListener,addEventListener:o.addEventListener,bind:r.bind,isFunction:r.isFunction}},{"./lib/dom":12,"./lib/events":13,"./lib/fn":14,"./lib/url":15}],17:[function(e,t){function n(e,t){var n=window.getComputedStyle?getComputedStyle(e):e.currentStyle;return n[t]}function i(){return{html:{height:o.style.height||"",overflow:n(o,"overflow"),position:n(o,"position")},body:{height:s.style.height||"",overflow:n(s,"overflow")}}}function r(e,t){this.assetsUrl=e,this.container=t||document.body,this.iframe=null,o=document.documentElement,s=document.body,this.merchantPageDefaultStyles=i()}var o,s,a=e("braintree-utilities"),l=e("../shared/receiver"),u="1.0.0";r.prototype.get=function(e,t){var n=this,i=this.constructAuthorizationURL(e);this.container&&a.isFunction(this.container)?this.container(i+"&no_style=1"):this.insertIframe(i),new l(function(e){a.isFunction(n.container)||n.removeIframe(),t(e)})},r.prototype.removeIframe=function(){this.container&&this.container.nodeType&&1===this.container.nodeType?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():"string"==typeof this.container&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},r.prototype.insertIframe=function(e){var t=document.createElement("iframe");if(t.src=e,this.applyStyles(t),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&1===this.container.nodeType)this.container.appendChild(t);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&0!==this.container.length)this.container.append(t);else{if("string"!=typeof this.container||!document.getElementById(this.container))throw new Error("Unable to find valid container for iframe.");document.getElementById(this.container).appendChild(t)}this.applyIE6Styles(t),this.iframe=t},r.prototype.applyStyles=function(e){e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.setAttribute("frameborder","0"),e.setAttribute("allowTransparency","true"),e.style.border="0"},r.prototype.applyIE6Styles=function(e){var t,n=document.createElement("div");n.innerHTML="<!--[if IE 6]><i></i><![endif]-->",t=1===n.getElementsByTagName("i").length,t&&(e.style.position="relative",e.style.top="-"+parseInt(e.offsetTop,10)+"px")},r.prototype.lockMerchantWindowSize=function(){o.style.overflow="hidden",s.style.overflow="hidden",s.style.height="100%"},r.prototype.unlockMerchantWindowSize=function(){var e=this.merchantPageDefaultStyles;s.style.height=e.body.height,s.style.overflow=e.body.overflow,o.style.overflow=e.html.overflow},r.prototype.constructAuthorizationURL=function(e){var t,n=window.location.href;return n.indexOf("#")>-1&&(n=n.split("#")[0]),t=a.makeQueryString({acsUrl:e.acsUrl,pareq:e.pareq,termUrl:e.termUrl+"?version="+u,md:e.threeDSecureToken,parentUrl:n}),this.assetsUrl+"/3ds/"+u+"/html/style_frame?"+t},t.exports=r},{"../shared/receiver":22,"braintree-utilities":16}],18:[function(e,t){function n(e,t){return this.clientToken=this.parseClientToken(e),this.options=t||{},this.lookupService=new s(this.clientToken),this.api=new r.Client({clientToken:e}),this.nonce=null,this}function i(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}var r=e("braintree-api"),o=e("braintree-utilities"),s=e("./lookup_service"),a=e("./authorization_service");n.prototype.startVerification=function(e,t){o.isFunction(t)&&(e.authorizationFingerprint=this.clientToken.authorizationFingerprint,this.lookupService.get(e,o.bind(this.handleLookupResponse(t),this)))},n.prototype.verify=function(e,t){var n={number:e.creditCard.number,expirationMonth:e.creditCard.expirationMonth,expirationYear:e.creditCard.expirationYear};o.isFunction(t)&&this.api.tokenizeCard(n,o.bind(function(n,i){n?t(n):(this.nonce=i,this.startVerification(e,t))},this))},n.prototype.handleLookupResponse=function(e){return function(t,n){var i;t?e(t):n.acsUrl&&n.acsUrl.length>0?(i=new a(this.clientToken.assetsUrl,this.options.container),i.get(n,o.bind(this.handleAuthenticationResponse(n,e),this))):e(null,this.prepareCbData({threeDSecureToken:n.threeDSecureToken}))}},n.prototype.handleAuthenticationResponse=function(e,t){return function(n){var i,r=o.decodeQueryString(n);r.user_closed||(i=JSON.parse(r.auth_response),i.success?t(null,this.prepareCbData({threeDSecureToken:e.threeDSecureToken})):t(i.errors))}},n.prototype.prepareCbData=function(e){return this.nonce?i(e,{nonce:this.nonce}):e},n.prototype.parseClientToken=function(e){var t;if(!e||0===e.length)throw new Error("clientToken not provided.");if(t=r.parseClientToken(e),!t.threeDSecureEnabled)throw new Error("Merchant is not 3D-Secure enabled.");return{enabled:t.threeDSecureEnabled,authorizationFingerprint:t.authorizationFingerprint,assetsUrl:t.assetsUrl,lookupURL:t.threeDSecure.lookupUrl,merchantAccountId:t.merchantAccountId}},t.exports=n},{"./authorization_service":17,"./lookup_service":20,"braintree-api":11,"braintree-utilities":16}],19:[function(e,t){var n=e("./client");e("./authorization_service"),e("./lookup_service"),e("./vendor/json2"),t.exports={create:function(e,t){var i=new n(e,t);return i}}},{"./authorization_service":17,"./client":18,"./lookup_service":20,"./vendor/json2":21}],20:[function(e,t){function n(e,t){this.options=e||{},this.context=t||window,this.running=!1}var i="1.0.0",r=e("braintree-utilities");n.prototype.get=function(e,t){this.running||(this.running=!0,e.callback=this.createCallbackName(),e.merchantAccountId=this.options.merchantAccountId,e.version=i,this.attachJSONPCallback(t,e.callback),this.makeJSONPRequest(e))},n.prototype.createCallbackName=function(){return"braintree_callback_"+this.getUniqueId().toString()},n.prototype.attachJSONPCallback=function(e,t){var n=this;this.context[t]=function(t){n.running=!1,t.errors?e(t.errors):e(null,t)}},n.prototype.makeJSONPRequest=function(e){var t=r.makeQueryString(e),n=document.createElement("script");n.src=this.options.lookupURL+"?"+t,document.getElementsByTagName("head")[0].appendChild(n)},n.prototype.getUniqueId=function(){var e;return e=Date.now?Date.now():(new Date).getTime()},t.exports=n},{"braintree-utilities":16}],21:[function(_dereq_,module,exports){"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],22:[function(e,t){function n(e){this.postMessageReceiver(e),this.hashChangeReceiver(e)}var i=e("braintree-utilities");n.prototype.postMessageReceiver=function(e){var t=this;this.wrappedCallback=function(n){e(n.data),t.stopListening()},i.addEventListener(window,"message",this.wrappedCallback)},n.prototype.hashChangeReceiver=function(e){var t,n=window.location.hash,i=this;this.poll=setInterval(function(){t=window.location.hash,t.length>0&&t!==n&&(i.stopListening(),t=t.substring(1,t.length),e(t),window.location.hash=n.length>0?n:"")},10)},n.prototype.stopListening=function(){clearTimeout(this.poll),i.removeEventListener(window,"message",this.wrappedCallback)},t.exports=n},{"braintree-utilities":16}],23:[function(e,t){(function(n){function i(e,t){return e.status>=400?[e,null]:[null,t(e)]}function r(e){var t;this.attrs={},e.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=e.sharedCustomerIdentifier),t=a(e.clientToken),this.driver=e.driver||l,this.authUrl=t.authUrl,this.analyticsUrl=t.analytics?t.analytics.url:void 0,this.clientApiUrl=t.clientApiUrl,this.customerId=e.customerId,this.challenges=t.challenges,this.integration=e.integration||"",this.attrs.authorizationFingerprint=t.authorizationFingerprint,this.attrs.sharedCustomerIdentifierType=e.sharedCustomerIdentifierType,this.timeoutWatchers=[],this.requestTimeout=e.hasOwnProperty("timeout")?e.timeout:6e4}function o(){}function s(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i}var a=e("./parse-client-token"),l=e("./jsonp-driver"),u=e("./util"),c=e("./sepa-mandate"),h=e("./sepa-bank-account"),d=e("./credit-card"),p=e("./root-data");r.prototype.requestWithTimeout=function(e,t,n,r,s){s=s||o;var a,l,u=this;p.get(function(o){l="braintree/web/"+o.sdkVersion,t.braintreeLibraryVersion=l,t.hasOwnProperty("analytics")&&t.hasOwnProperty("_meta")&&(t._meta.sdkVersion=l,t._meta.merchantAppId=o.merchantAppId),a=r(e,t,function(e,t){if(u.timeoutWatchers[t]){clearTimeout(u.timeoutWatchers[t]);var r=i(e,function(e){return n(e)});s.apply(null,r)}}),u.requestTimeout>0?this.timeoutWatchers[a]=setTimeout(function(){u.timeoutWatchers[a]=null,s.apply(null,[{errors:"Unknown error"},null])},u.requestTimeout):s.apply(null,[{errors:"Unknown error"},null])},this)},r.prototype.post=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.post,i)},r.prototype.get=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.get,i)},r.prototype.put=function(e,t,n,i){this.requestWithTimeout(e,t,n,this.driver.put,i)},r.prototype.getCreditCards=function(e){this.get(u.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(e){var t=0,n=e.paymentMethods.length,i=[];for(t;n>t;t++)i.push(new d(e.paymentMethods[t]));return i},e)},r.prototype.tokenizeCard=function(e,t){e.options={validate:!1},this.addCreditCard(e,function(e,n){n&&n.nonce?t(e,n.nonce):t("Unable to tokenize card.",null)})},r.prototype.addSEPAMandate=function(e,t){var n=s(this.attrs,{sepaMandate:e});this.post(u.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),n,function(e){return new c(e.sepaMandates[0])},t)},r.prototype.acceptSEPAMandate=function(e,t){this.put(u.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e,"accept"]),this.attrs,function(e){return new h(e.sepaBankAccounts[0])},t)},r.prototype.getSEPAMandate=function(e,t){var n;n=e.paymentMethodToken?s(this.attrs,{paymentMethodToken:e.paymentMethodToken}):this.attrs,this.get(u.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates",e.mandateReferenceNumber||""]),n,function(e){return new c(e.sepaMandates[0])},t)},r.prototype.addCreditCard=function(e,t){var n,i=e.share;delete e.share,n=s(this.attrs,{share:i,creditCard:e,_meta:{integration:this.integration||"custom",source:"form"}}),this.post(u.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),n,function(e){return new d(e.creditCards[0])},t)},r.prototype.unlockCreditCard=function(e,t,n){var i=s(this.attrs,{challengeResponses:t});this.put(u.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/",e.nonce]),i,function(e){return new d(e.paymentMethods[0])},n)},r.prototype.sendAnalyticsEvents=function(e,t){var i,r=this.analyticsUrl,o=[];if(e=u.isArray(e)?e:[e],!r)return void(t&&t.apply(null,[null,{}]));for(var a in e)e.hasOwnProperty(a)&&o.push({kind:e[a]});i=s(this.attrs,{analytics:o,_meta:{platform:"web",platformVersion:n.navigator.userAgent,integrationType:this.integration}}),this.post(r,i,function(e){return e},t)},t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./credit-card":24,"./jsonp-driver":25,"./parse-client-token":27,"./root-data":29,"./sepa-bank-account":30,"./sepa-mandate":31,"./util":32}],24:[function(e,t){t.exports=e(3)},{}],25:[function(e,t){t.exports=e(4)},{"./jsonp":26}],26:[function(e,t){t.exports=e(5)},{"./util":32}],27:[function(e,t){t.exports=e(6)},{"./polyfill":28}],28:[function(e,t){t.exports=e(7)},{}],29:[function(e,t){(function(n){function i(){var e=n.braintree;return e&&e.hasOwnProperty("VERSION")?e.VERSION:void 0}function r(e){function t(t){u||(u=!0,e(t))}l.invoke("getExternalData",[],t),setTimeout(function(){u||t()},250)}function o(e,t){u?e.call(t,c):r(function(n){for(var i in n)n.hasOwnProperty(i)&&(c[i]=n[i]||c[i]);e.call(t,c)})}var s=e("braintree-rpc"),a=new s.MessageBus(window),l=new s.RPCClient(a,window.parent),u=!1,c={sdkVersion:i(),merchantAppId:n.location.href};t.exports={get:o}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"braintree-rpc":39}],30:[function(e,t){t.exports=e(8)},{}],31:[function(e,t){t.exports=e(9)},{}],32:[function(e,t){t.exports=e(10)},{}],33:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{"./lib/client":23,"./lib/jsonp":26,"./lib/jsonp-driver":25,"./lib/parse-client-token":27,"./lib/util":32}],34:[function(e,t){function n(e){this.host=e||window,this.handlers=[],i.addEventListener(this.host,"message",i.bind(this.receive,this))}var i=e("braintree-utilities");n.prototype.receive=function(e){var t,i,r,o;try{r=JSON.parse(e.data)}catch(s){return}for(o=r.type,i=new n.Message(this,e.source,r.data),t=0;t<this.handlers.length;t++)this.handlers[t].type===o&&this.handlers[t].handler(i)},n.prototype.send=function(e,t,n){e.postMessage(JSON.stringify({type:t,data:n}),"*")},n.prototype.register=function(e,t){this.handlers.push({type:e,handler:t})},n.prototype.unregister=function(e,t){for(var n=this.handlers.length-1;n>=0;n--)if(this.handlers[n].type===e&&this.handlers[n].handler===t)return this.handlers.splice(n,1)},n.Message=function(e,t,n){this.bus=e,this.source=t,this.content=n},n.Message.prototype.reply=function(e,t){this.bus.send(this.source,e,t)},t.exports=n},{"braintree-utilities":44}],35:[function(e,t){function n(e,t){this.bus=e,this.target=t,this.handlers=[],this.bus.register("publish",i.bind(this._handleMessage,this))}var i=e("braintree-utilities");n.prototype._handleMessage=function(e){var t,n=e.content,i=this.handlers[n.channel];if("undefined"!=typeof i)for(t=0;t<i.length;t++)i[t](n.data)},n.prototype.publish=function(e,t){this.bus.send(this.target,"publish",{channel:e,data:t})},n.prototype.subscribe=function(e,t){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(t)},n.prototype.unsubscribe=function(e,t){var n,i=this.handlers[e];if("undefined"!=typeof i)for(n=0;n<i.length;n++)i[n]===t&&i.splice(n,1)},t.exports=n},{"braintree-utilities":44}],36:[function(e,t){function n(e){this.bus=e,this.frames=[],this.handlers=[]}n.prototype.subscribe=function(e,t){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(t)},n.prototype.registerFrame=function(e){this.frames.push(e)},n.prototype.unregisterFrame=function(e){for(var t=0;t<this.frames.length;t++)this.frames[t]===e&&this.frames.splice(t,1)},n.prototype.publish=function(e,t){var n,i=this.handlers[e];if("undefined"!=typeof i)for(n=0;n<i.length;n++)i[n](t);for(n=0;n<this.frames.length;n++)this.bus.send(this.frames[n],"publish",{channel:e,data:t})},n.prototype.unsubscribe=function(e,t){var n,i=this.handlers[e];if("undefined"!=typeof i)for(n=0;n<i.length;n++)i[n]===t&&i.splice(n,1)},t.exports=n},{}],37:[function(e,t){function n(e,t){this.bus=e,this.target=t||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",i.bind(this._handleResponse,this))}var i=e("braintree-utilities");n.prototype._handleResponse=function(e){var t=e.content,n=this.callbacks[t.id];"function"==typeof n&&(n.apply(null,t.response),delete this.callbacks[t.id])},n.prototype.invoke=function(e,t,n){var i=this.counter++;this.callbacks[i]=n,this.bus.send(this.target,"rpc_request",{id:i,method:e,args:t})},t.exports=n},{"braintree-utilities":44}],38:[function(e,t){function n(e){this.bus=e,this.methods={},this.bus.register("rpc_request",i.bind(this._handleRequest,this))}var i=e("braintree-utilities");n.prototype._handleRequest=function(e){var t,n=e.content,i=n.args||[],r=this.methods[n.method];"function"==typeof r&&(t=function(){e.reply("rpc_response",{id:n.id,response:Array.prototype.slice.call(arguments)})},i.push(t),r.apply(null,i))},n.prototype.define=function(e,t){this.methods[e]=t},t.exports=n},{"braintree-utilities":44}],39:[function(e,t){var n=e("./lib/message-bus"),i=e("./lib/pubsub-client"),r=e("./lib/pubsub-server"),o=e("./lib/rpc-client"),s=e("./lib/rpc-server");t.exports={MessageBus:n,PubsubClient:i,PubsubServer:r,RPCClient:o,RPCServer:s}},{"./lib/message-bus":34,"./lib/pubsub-client":35,"./lib/pubsub-server":36,"./lib/rpc-client":37,"./lib/rpc-server":38}],40:[function(e,t){function n(e,t){if(t=t||"["+e+"] is not a valid DOM Element",e&&e.nodeType&&1===e.nodeType)return e;if(e&&window.jQuery&&e instanceof jQuery&&0!==e.length)return e[0];if("string"==typeof e&&document.getElementById(e))return document.getElementById(e);throw new Error(t)}t.exports={normalizeElement:n}},{}],41:[function(e,t){function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}t.exports={removeEventListener:i,addEventListener:n}},{}],42:[function(e,t){function n(e){return"[object Function]"===Object.prototype.toString.call(e)}function i(e,t){return function(){e.apply(t,arguments)}}t.exports={bind:i,isFunction:n}},{}],43:[function(e,t){t.exports=e(15)},{}],44:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":40,"./lib/events":41,"./lib/fn":42,"./lib/url":43}],45:[function(e,t){t.exports=e(23)},{"./credit-card":46,"./jsonp-driver":47,"./parse-client-token":49,"./root-data":51,"./sepa-bank-account":52,"./sepa-mandate":53,"./util":54}],46:[function(e,t){t.exports=e(3)},{}],47:[function(e,t){t.exports=e(4)
},{"./jsonp":48}],48:[function(e,t){t.exports=e(5)},{"./util":54}],49:[function(e,t){t.exports=e(6)},{"./polyfill":50}],50:[function(e,t){t.exports=e(7)},{}],51:[function(e,t){t.exports=e(29)},{"braintree-rpc":61}],52:[function(e,t){t.exports=e(8)},{}],53:[function(e,t){t.exports=e(9)},{}],54:[function(e,t){t.exports=e(10)},{}],55:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{"./lib/client":45,"./lib/jsonp":48,"./lib/jsonp-driver":47,"./lib/parse-client-token":49,"./lib/util":54}],56:[function(e,t){t.exports=e(34)},{"braintree-utilities":66}],57:[function(e,t){t.exports=e(35)},{"braintree-utilities":66}],58:[function(e,t){t.exports=e(36)},{}],59:[function(e,t){t.exports=e(37)},{"braintree-utilities":66}],60:[function(e,t){t.exports=e(38)},{"braintree-utilities":66}],61:[function(e,t){t.exports=e(39)},{"./lib/message-bus":56,"./lib/pubsub-client":57,"./lib/pubsub-server":58,"./lib/rpc-client":59,"./lib/rpc-server":60}],62:[function(e,t){t.exports=e(40)},{}],63:[function(e,t){t.exports=e(41)},{}],64:[function(e,t){t.exports=e(42)},{}],65:[function(e,t){t.exports=e(15)},{}],66:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":62,"./lib/events":63,"./lib/fn":64,"./lib/url":65}],67:[function(e,t){t.exports=e(23)},{"./credit-card":68,"./jsonp-driver":69,"./parse-client-token":71,"./root-data":73,"./sepa-bank-account":74,"./sepa-mandate":75,"./util":76}],68:[function(e,t){t.exports=e(3)},{}],69:[function(e,t){t.exports=e(4)},{"./jsonp":70}],70:[function(e,t){t.exports=e(5)},{"./util":76}],71:[function(e,t){t.exports=e(6)},{"./polyfill":72}],72:[function(e,t){t.exports=e(7)},{}],73:[function(e,t){t.exports=e(29)},{"braintree-rpc":83}],74:[function(e,t){t.exports=e(8)},{}],75:[function(e,t){t.exports=e(9)},{}],76:[function(e,t){t.exports=e(10)},{}],77:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{"./lib/client":67,"./lib/jsonp":70,"./lib/jsonp-driver":69,"./lib/parse-client-token":71,"./lib/util":76}],78:[function(e,t){t.exports=e(34)},{"braintree-utilities":88}],79:[function(e,t){t.exports=e(35)},{"braintree-utilities":88}],80:[function(e,t){t.exports=e(36)},{}],81:[function(e,t){t.exports=e(37)},{"braintree-utilities":88}],82:[function(e,t){t.exports=e(38)},{"braintree-utilities":88}],83:[function(e,t){t.exports=e(39)},{"./lib/message-bus":78,"./lib/pubsub-client":79,"./lib/pubsub-server":80,"./lib/rpc-client":81,"./lib/rpc-server":82}],84:[function(e,t){t.exports=e(40)},{}],85:[function(e,t){t.exports=e(41)},{}],86:[function(e,t){t.exports=e(42)},{}],87:[function(e,t){t.exports=e(15)},{}],88:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":84,"./lib/events":85,"./lib/fn":86,"./lib/url":87}],89:[function(e,t){t.exports=e(34)},{"braintree-utilities":99}],90:[function(e,t){t.exports=e(35)},{"braintree-utilities":99}],91:[function(e,t){t.exports=e(36)},{}],92:[function(e,t){t.exports=e(37)},{"braintree-utilities":99}],93:[function(e,t){t.exports=e(38)},{"braintree-utilities":99}],94:[function(e,t){t.exports=e(39)},{"./lib/message-bus":89,"./lib/pubsub-client":90,"./lib/pubsub-server":91,"./lib/rpc-client":92,"./lib/rpc-server":93}],95:[function(e,t){t.exports=e(40)},{}],96:[function(e,t){t.exports=e(41)},{}],97:[function(e,t){t.exports=e(42)},{}],98:[function(e,t){t.exports=e(15)},{}],99:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":95,"./lib/events":96,"./lib/fn":97,"./lib/url":98}],100:[function(e,t){t.exports=e(40)},{}],101:[function(e,t){t.exports=e(41)},{}],102:[function(e,t){t.exports=e(42)},{}],103:[function(e,t){t.exports=e(15)},{}],104:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":100,"./lib/events":101,"./lib/fn":102,"./lib/url":103}],105:[function(e,t){function n(e){var t=window.getComputedStyle?getComputedStyle(e):e.currentStyle;return{overflow:t.overflow||"",height:e.style.height||""}}function i(){return{html:{node:document.documentElement,styles:n(document.documentElement)},body:{node:document.body,styles:n(document.body)}}}function r(e,t){if(!e)throw new Error('Parameter "clientToken" cannot be null');t=t||{},this._clientToken=o.parseClientToken(e),this._clientOptions=t,this.container=t.container,this.merchantPageDefaultStyles=null,this.paymentMethodNonceInputField=t.paymentMethodNonceInputField,this.frame=null,this.popup=null,this.insertFrameFunction=t.insertFrame,this.onSuccess=t.onSuccess,this.onCancelled=t.onCancelled,this.onUnsupported=t.onUnsupported,this.loggedInView=null,this.loggedOutView=null,this.insertUI=!0}var o=e("braintree-api"),s=e("braintree-rpc"),a=e("braintree-utilities"),l=e("./logged-in-view"),u=e("./logged-out-view"),c=e("../shared/util/browser"),h=e("../shared/util/dom"),d=e("../shared/constants");e("../shared/util/util"),r.prototype.getViewerUrl=function(){var e=this._clientToken.paypal.assetsUrl;return e+"/pwpp/"+d.VERSION+"/html/braintree-frame.html"},r.prototype.initialize=function(){return this._clientToken.paypalEnabled?this._isBrowserSecure()?(this._overrideClientTokenProperties(),this._setupDomElements(),this._setupPaymentMethodNonceInputField(),this._setupViews(),void this._createRpcServer()):void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("unsupported protocol detected"))):void("function"==typeof this.onUnsupported&&this.onUnsupported(new Error("PayPal is not enabled")))},r.prototype._isBrowserSecure=function(){return a.isBrowserHttps()||this._clientToken.paypal.allowHttp},r.prototype._overrideClientTokenProperties=function(){this._clientOptions.displayName&&(this._clientToken.paypal.displayName=this._clientOptions.displayName)},r.prototype._setupDomElements=function(){this.insertUI&&(this.container=a.normalizeElement(this.container))},r.prototype._setupPaymentMethodNonceInputField=function(){if(this.insertUI){var e=this.paymentMethodNonceInputField;a.isFunction(e)||(e=void 0!==e?a.normalizeElement(e):this._createPaymentMethodNonceInputField(),this.paymentMethodNonceInputField=e)}},r.prototype._setupViews=function(){var e=this._clientToken.paypal.assetsUrl;this.insertUI&&(this.loggedInView=new l({container:this.container,assetsUrl:e}),this.loggedOutView=new u({assetsUrl:e,container:this.container}),a.addEventListener(this.loggedOutView.buttonNode,"click",a.bind(this._handleButtonClick,this)),a.addEventListener(this.loggedInView.logoutNode,"click",a.bind(this._handleLogout,this)))},r.prototype._createRpcServer=function(){var e=new s.MessageBus(window),t=new s.RPCServer(e,window);t.define("getClientToken",a.bind(this._handleGetClientToken,this)),t.define("getClientOptions",a.bind(this._handleGetClientOptions,this)),t.define("closePayPalModal",a.bind(this._handleCloseMessage,this)),t.define("receivePayPalData",a.bind(this._handleSuccessfulAuthentication,this))},r.prototype._createPaymentMethodNonceInputField=function(){var e=document.createElement("input");return e.name="payment_method_nonce",e.type="hidden",this.container.appendChild(e)},r.prototype._createFrame=function(){var e=document.createElement("iframe");return e.src=this.getViewerUrl(),e.id=d.FRAME_NAME,e.name=d.FRAME_NAME,e.allowTransparency=!0,e.height="100%",e.width="100%",e.frameBorder=0,e.style.position=c.isMobile()?"absolute":"fixed",e.style.top=0,e.style.left=0,e.style.bottom=0,e.style.zIndex=20001,e.style.padding=0,e.style.margin=0,e.style.border=0,e.style.outline="none",e},r.prototype._removeFrame=function(e){e=e||document.body,this.frame&&e.contains(this.frame)&&(e.removeChild(this.frame),this._unlockMerchantWindowSize())},r.prototype._insertFrame=function(){this.insertFrameFunction?this.insertFrameFunction(this.getViewerUrl()):(this.frame=this._createFrame(),document.body.appendChild(this.frame)),this._lockMerchantWindowSize()},r.prototype._handleButtonClick=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,this._open()},r.prototype._setMerchantPageDefaultStyles=function(){this.merchantPageDefaultStyles=i()},r.prototype._open=function(){c.isPopupSupported()?this._openPopup():this._openModal()},r.prototype._close=function(){c.isPopupSupported()?this._closePopup():this._closeModal()},r.prototype._openModal=function(){this._removeFrame(),this._insertFrame()},r.prototype._openPopup=function(){var e=d.POPUP_NAME,t=d.POPUP_OPTIONS;return this.popup=window.open(this.getViewerUrl(),e,t),this.popup.focus(),this.popup},r.prototype._closeModal=function(){this._removeFrame()},r.prototype._closePopup=function(){this.popup&&(this.popup.close(),this.popup=null)},r.prototype._handleGetClientToken=function(e){var t={analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:void 0,authorizationFingerprint:this._clientToken.authorizationFingerprint,authUrl:this._clientToken.authUrl,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientToken.paypal.displayName,paypalBaseUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,offline:this._clientToken.paypal.environmentNoNetwork};e(t)},r.prototype._handleGetClientOptions=function(e){var t={demo:this._clientOptions.demo||!1,locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1};e(t)},r.prototype._handleSuccessfulAuthentication=function(e){this._close(),a.isFunction(this.paymentMethodNonceInputField)?this.paymentMethodNonceInputField(e.nonce):(this._showLoggedInContent(e.email),this._setNonceInputValue(e.nonce)),a.isFunction(this.onSuccess)&&this.onSuccess(e)},r.prototype._lockMerchantWindowSize=function(){this._setMerchantPageDefaultStyles(),document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},r.prototype._unlockMerchantWindowSize=function(){this.merchantPageDefaultStyles&&(document.documentElement.style.height=this.merchantPageDefaultStyles.html.styles.height,document.documentElement.style.overflow=this.merchantPageDefaultStyles.html.styles.overflow,document.body.style.height=this.merchantPageDefaultStyles.body.styles.height,document.body.style.overflow=this.merchantPageDefaultStyles.body.styles.overflow)},r.prototype._handleCloseMessage=function(){this._removeFrame()},r.prototype._showLoggedInContent=function(e){this.loggedOutView.hide(),h.setTextContent(this.loggedInView.emailNode,e),this.loggedInView.show()},r.prototype._handleLogout=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,this.loggedInView.hide(),this.loggedOutView.show(),this._setNonceInputValue(""),a.isFunction(this.onCancelled)&&this.onCancelled()},r.prototype._setNonceInputValue=function(e){this.paymentMethodNonceInputField.value=e},t.exports=r},{"../shared/constants":108,"../shared/util/browser":113,"../shared/util/dom":114,"../shared/util/util":115,"./logged-in-view":106,"./logged-out-view":107,"braintree-api":77,"braintree-rpc":94,"braintree-utilities":104}],106:[function(e,t){function n(e){this.options=e,this.container=this.createViewContainer(),this.createPayPalName(),this.emailNode=this.createEmailNode(),this.logoutNode=this.createLogoutNode()}var i=e("../shared/constants");n.prototype.createViewContainer=function(){var e=document.createElement("div");e.id="braintree-paypal-loggedin";var t=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.assetsUrl+"/pwpp/"+i.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.assetsUrl+"/pwpp/"+i.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");return e.style.cssText=t,this.options.container.appendChild(e),e},n.prototype.createPayPalName=function(){var e=document.createElement("span");e.id="bt-pp-name",e.innerHTML="PayPal";var t=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return e.style.cssText=t,this.container.appendChild(e)},n.prototype.createEmailNode=function(){var e=document.createElement("span");e.id="bt-pp-email";var t=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return e.style.cssText=t,this.container.appendChild(e)},n.prototype.createLogoutNode=function(){var e=document.createElement("button");e.id="bt-pp-cancel",e.innerHTML="Cancel";var t=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return e.style.cssText=t,this.container.appendChild(e)},n.prototype.show=function(){this.container.style.display="block"},n.prototype.hide=function(){this.container.style.display="none"},t.exports=n},{"../shared/constants":108}],107:[function(e,t){function n(e){this.options=e,this.assetsUrl=this.options.assetsUrl,this.container=this.createViewContainer(),this.buttonNode=this.createPayWithPayPalButton()}var i=e("../shared/constants");n.prototype.createViewContainer=function(){var e=document.createElement("div");return e.id="braintree-paypal-loggedout",this.options.container.appendChild(e),e},n.prototype.createPayWithPayPalButton=function(){var e=document.createElement("a");e.id="braintree-paypal-button",e.href="#";var t=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");e.style.cssText=t;var n=new Image;n.src=this.assetsUrl+"/pwpp/"+i.VERSION+"/images/pay-with-paypal.png",n.setAttribute("alt","Pay with PayPal");var r=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";");return n.style.cssText=r,e.appendChild(n),this.container.appendChild(e)},n.prototype.show=function(){this.container.style.display="block"},n.prototype.hide=function(){this.container.style.display="none"},t.exports=n},{"../shared/constants":108}],108:[function(e,t,n){var i="1.2.1";n.VERSION=i,n.POPUP_NAME="braintree_paypal_popup",n.FRAME_NAME="braintree-paypal-frame",n.POPUP_PATH="/pwpp/"+i+"/html/braintree-frame.html",n.POPUP_OPTIONS="height=470,width=410,resizable,scrollbars"},{}],109:[function(e,t){function n(){return u.matchUserAgent("Android")&&!i()}function i(){return u.matchUserAgent("Chrome")||u.matchUserAgent("CriOS")}function r(){return u.matchUserAgent("Firefox")}function o(){return u.matchUserAgent("Trident")||u.matchUserAgent("MSIE")}function s(){return u.matchUserAgent("Opera")||u.matchUserAgent("OPR")}function a(){return s()&&"[object OperaMini]"===c.call(window.operamini)}function l(){return u.matchUserAgent("Safari")&&!i()&&!n()}var u=e("./useragent"),c=Object.prototype.toString;t.exports={isAndroid:n,isChrome:i,isFirefox:r,isIE:o,isOpera:s,isOperaMini:a,isSafari:l}},{"./useragent":112}],110:[function(e,t){function n(){return!i()&&(s.isAndroid()||s.isIpod()||s.isIphone()||o.matchUserAgent("IEMobile"))}function i(){return s.isIpad()||s.isAndroid()&&!o.matchUserAgent("Mobile")}function r(){return!n()&&!i()}var o=e("./useragent"),s=e("./platform");t.exports={isMobile:n,isTablet:i,isDesktop:r}},{"./platform":111,"./useragent":112}],111:[function(e,t){function n(){return a.matchUserAgent("Android")}function i(){return a.matchUserAgent("iPad")}function r(){return a.matchUserAgent("iPod")}function o(){return a.matchUserAgent("iPhone")&&!r()}function s(){return i()||r()||o()}var a=e("./useragent");t.exports={isAndroid:n,isIpad:i,isIpod:r,isIphone:o,isIos:s}},{"./useragent":112}],112:[function(e,t,n){function i(){return o}function r(e){var t=n.getNativeUserAgent(),i=t.match(e);return i?!0:!1}var o=window.navigator.userAgent;n.getNativeUserAgent=i,n.matchUserAgent=r},{}],113:[function(e,t){function n(){return i()&&window.outerWidth<600}function i(){return d.test(h)}function r(){return!!window.postMessage}function o(){return a.isOpera()||a.isOperaMini()||u.isIos()&&a.isSafari()&&c.matchUserAgent(/Version\/8/i)?!1:u.isIos()&&a.isSafari()?!0:l.isDesktop()&&(a.isChrome()||a.isFirefox()||a.isSafari()||c.matchUserAgent(/MSIE 10\.0/)&&!s())?!0:!1}function s(){var e=null,t="";try{new ActiveXObject("")}catch(n){t=n.name}try{e=!!new ActiveXObject("htmlfile")}catch(n){e=!1}return e="ReferenceError"!==t&&e===!1?!1:!0,!e}var a=e("../useragent/browser"),l=e("../useragent/device"),u=e("../useragent/platform"),c=e("../useragent/useragent"),h=window.navigator.userAgent,d=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;t.exports={isMobile:n,isMobileDevice:i,detectedPostMessage:r,isPopupSupported:o}},{"../useragent/browser":109,"../useragent/device":110,"../useragent/platform":111,"../useragent/useragent":112}],114:[function(e,t){function n(e,t){var n="innerText";document&&document.body&&"textContent"in document.body&&(n="textContent"),e[n]=t}t.exports={setTextContent:n}},{}],115:[function(e,t){function n(){for(var e="",t=0;32>t;t++){var n=Math.floor(16*Math.random());e+=n.toString(16)}return e}function i(e){return/^(true|1)$/i.test(e)}function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}var o="function"==typeof String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/,"")},s="function"==typeof window.btoa?function(e){return window.btoa(e)}:function(e){for(var t,n,i,r,o,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)t=e.charCodeAt(c++),n=e.charCodeAt(c++),i=e.charCodeAt(c++),r=t>>2,o=(3&t)<<4|n>>4,s=(15&n)<<2|i>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),u=u+l.charAt(r)+l.charAt(o)+l.charAt(s)+l.charAt(a);return u};t.exports={trim:o,btoa:s,generateUid:n,castToBoolean:i,htmlEscape:r}},{}],116:[function(e,t){t.exports=e(34)},{"braintree-utilities":126}],117:[function(e,t){t.exports=e(35)},{"braintree-utilities":126}],118:[function(e,t){t.exports=e(36)},{}],119:[function(e,t){t.exports=e(37)},{"braintree-utilities":126}],120:[function(e,t){t.exports=e(38)},{"braintree-utilities":126}],121:[function(e,t){t.exports=e(39)},{"./lib/message-bus":116,"./lib/pubsub-client":117,"./lib/pubsub-server":118,"./lib/rpc-client":119,"./lib/rpc-server":120}],122:[function(e,t){t.exports=e(40)},{}],123:[function(e,t){t.exports=e(41)},{}],124:[function(e,t){t.exports=e(42)},{}],125:[function(e,t){t.exports=e(15)},{}],126:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":122,"./lib/events":123,"./lib/fn":124,"./lib/url":125}],127:[function(e,t){t.exports=e(12)},{}],128:[function(e,t){t.exports=e(13)},{}],129:[function(e,t){t.exports=e(14)},{}],130:[function(e,t){t.exports=e(15)},{}],131:[function(e,t){t.exports=e(16)},{"./lib/dom":127,"./lib/events":128,"./lib/fn":129,"./lib/url":130}],132:[function(e,t){function n(e){this.apiClient=e}var i=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];n.prototype.attach=function(e){function t(t){e.define(t,function(){n.apiClient[t].apply(n.apiClient,arguments)})}var n=this,r=0,o=i.length;for(r;o>r;r++)t(i[r])},t.exports=n},{}],133:[function(e,t){function n(e,t){var n=window.getComputedStyle?getComputedStyle(e):e.currentStyle;return n[t]}function i(){return{html:{height:s.style.height||"",overflow:n(s,"overflow"),position:n(s,"position")},body:{height:a.style.height||"",overflow:n(a,"overflow")}}}function r(){var e=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return e}function o(e){var t,n,i;this.encodedClientToken=e.clientToken,this.paypalOptions=e.paypal,this.container=null,this.merchantFormManager=null,this.root=e.root,this.configurationRequests=[],this.braintreeApiClient=l.configure({clientToken:e.clientToken,integration:"dropin"}),this.paymentMethodNonceReceivedCallback=e.paymentMethodNonceReceived,this.clientToken=l.parseClientToken(e.clientToken),this.bus=new u.MessageBus(this.root),this.rpcServer=new u.RPCServer(this.bus),this.apiProxyServer=new h(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),t=e.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+g+"/inline-frame.html",n=e.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+g+"/modal-frame.html",s=document.documentElement,a=document.body,this.frames={inline:this._createFrame(t),modal:this._createFrame(n)},this.container=c.normalizeElement(e.container,"Unable to find valid container."),i=c.normalizeElement(e.form||this._findClosest(this.container,"form")),this.merchantFormManager=new d({form:i,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.clientToken.paypalEnabled&&this.clientToken.paypal&&(c.isBrowserHttps()||this.clientToken.paypal.allowHttp)&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}var s,a,l=e("braintree-api"),u=e("braintree-rpc"),c=e("braintree-utilities"),h=e("./api-proxy-server"),d=e("./merchant-form-manager"),p=e("./frame-container"),f=e("../shared/paypal-service"),m=e("braintree-paypal/src/shared/util/browser"),g="1.1.9";o.prototype.initialize=function(){var e=this;this._initializeModal(),this.container.appendChild(this.frames.inline.element),a.appendChild(this.frames.modal.element),this.rpcServer.define("receiveSharedCustomerIdentifier",function(t){e.braintreeApiClient.attrs.sharedCustomerIdentifier=t,e.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store";for(var n=0;n<e.configurationRequests.length;n++)e.configurationRequests[n](e.encodedClientToken);e.configurationRequests=[]}),this.rpcServer.define("getConfiguration",function(t){t({clientToken:e.encodedClientToken,merchantHttps:c.isBrowserHttps()})}),this.rpcServer.define("getPayPalOptions",function(t){t(e.paypalOptions)}),this.rpcServer.define("selectPaymentMethod",function(t){e.frames.modal.rpcClient.invoke("selectPaymentMethod",[t]),e._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(t){e.merchantFormManager.setNoncePayload({nonce:t.nonce}),e.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[t])}),this.rpcServer.define("sendUsedPaymentMethod",function(t){e.frames.inline.rpcClient.invoke("selectPaymentMethod",[t])}),this.rpcServer.define("sendUnlockedNonce",function(t){e.merchantFormManager.setNoncePayload({nonce:t})}),this.rpcServer.define("clearNonce",function(){e.merchantFormManager.clearNoncePayload()}),this.rpcServer.define("closeDropInModal",function(){e._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(t){e.frames.inline.element.style.height=t+"px"}),this.bus.register("ready",function(t){t.source===e.frames.inline.element.contentWindow?e.frames.inline.rpcClient=new u.RPCClient(e.bus,t.source):t.source===e.frames.modal.element.contentWindow&&(e.frames.modal.rpcClient=new u.RPCClient(e.bus,t.source))})},o.prototype._createFrame=function(e){return new p(e)},o.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=r()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},o.prototype._lockMerchantWindowSize=function(){setTimeout(function(){s.style.overflow="hidden",a.style.overflow="hidden",a.style.height="100%",r()&&(s.style.position="relative",s.style.height=window.innerHeight+"px")},160)},o.prototype._unlockMerchantWindowSize=function(){var e=this.merchantPageDefaultStyles;a.style.height=e.body.height,a.style.overflow=e.body.overflow,s.style.overflow=e.html.overflow,r()&&(s.style.height=e.html.height,s.style.position=e.html.position)},o.prototype._showModal=function(){var e=this,t=this.frames.modal.element;this.merchantPageDefaultStyles=i(),t.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){e._lockMerchantWindowSize(),t.contentWindow.focus()},200)})},o.prototype._hideModal=function(){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none"},o.prototype._configurePayPal=function(){m.isPopupSupported()||(this.ppClient=new f({clientToken:this.clientToken,paypal:this.paypalOptions}),this.rpcServer.define("openPayPalModal",c.bind(this.ppClient._openModal,this.ppClient))),this.rpcServer.define("receivePayPalData",c.bind(this._handlePayPalData,this))},o.prototype._handlePayPalData=function(e){this.merchantFormManager.setNoncePayload(e),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[e]),this.frames.modal.rpcClient.invoke("paypalViewClose")},o.prototype._findClosest=function(e,t){t=t.toUpperCase();do if(e.nodeName===t)return e;while(e=e.parentNode);throw"Unable to find a valid "+t},t.exports=o},{"../shared/paypal-service":137,"./api-proxy-server":132,"./frame-container":135,"./merchant-form-manager":136,"braintree-api":55,"braintree-paypal/src/shared/util/browser":113,"braintree-rpc":121,"braintree-utilities":131}],134:[function(e,t){function n(e,t){t.clientToken=e;var n=new i(t);return n.initialize(),n}var i=e("./client"),r="1.1.9";t.exports={create:n,VERSION:r}},{"./client":133}],135:[function(e,t){function n(e){this.element=document.createElement("iframe"),this.element.setAttribute("allowtransparency","true"),this.element.setAttribute("width","100%"),this.element.setAttribute("height","68"),this.element.setAttribute("style","-webkit-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -moz-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -ms-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); -o-transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000); transition: height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000);"),this.element.src=e,this.element.setAttribute("frameborder","0"),this.element.setAttribute("allowtransparency","true"),this.element.style.border="0",this.element.style.zIndex="9999"}t.exports=n},{}],136:[function(e,t){function n(e){this.form=e.form,this.frames=e.frames,this.onSubmit=e.onSubmit,this.apiClient=e.apiClient}var i=e("braintree-utilities");n.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},n.prototype.setNoncePayload=function(e){this.noncePayload=e},n.prototype.clearNoncePayload=function(){this.noncePayload=null},n.prototype._isSubmitBased=function(){return!this.onSubmit},n.prototype._isCallbackBased=function(){return!!this.onSubmit},n.prototype._setElements=function(){if(!this.form.payment_method_nonce){var e=document.createElement("input");e.type="hidden",e.name="payment_method_nonce",this.form.appendChild(e)}this.nonceField=this.form.payment_method_nonce},n.prototype._setEvents=function(){var e=this;i.addEventListener(this.form,"submit",function(){e._handleFormSubmit.apply(e,arguments)})},n.prototype._handleFormSubmit=function(e){this._shouldSubmit()||(e&&e.preventDefault?e.preventDefault():e.returnValue=!1,this.noncePayload&&this.noncePayload.nonce?this._handleNonceReply(e):this.frames.inline.rpcClient.invoke("requestNonce",[],i.bind(function(t){this.setNoncePayload({nonce:t}),this._handleNonceReply(e)},this)))},n.prototype._shouldSubmit=function(){return this._isCallbackBased()?!1:this.nonceField.value.length>0},n.prototype._handleNonceReply=function(e){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",i.bind(function(){var t=this.noncePayload;t.originalEvent=e,this.onSubmit(t),setTimeout(i.bind(function(){this.frames.inline.rpcClient.invoke("clearLoadingState")},this),200)},this)):this._triggerFormSubmission()},n.prototype._triggerFormSubmission=function(){this.nonceField.value=this.noncePayload.nonce,this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",i.bind(function(){"function"==typeof this.form.submit?this.form.submit():this.form.querySelector('[type="submit"]').click()},this))},t.exports=n},{"braintree-utilities":131}],137:[function(e,t){function n(e){var t=e.clientToken,n=e.paypal||{},r=new i(t,{container:document.createElement("div"),displayName:n.displayName,locale:n.locale,singleUse:n.singleUse,onSuccess:n.onSuccess,enableShippingAddress:n.enableShippingAddress});return r.initialize(),r}var i=e("braintree-paypal/src/external/client");t.exports=n},{"braintree-paypal/src/external/client":105}],138:[function(e,t){function n(e){if("object"==typeof e)return e;var t="payment_method_nonce";"string"==typeof e&&(t=e);var n=document.createElement("input");return n.name=t,n.type="hidden",n}function i(e){for(var t=e.getElementsByTagName("*"),n={},i=0;i<t.length;i++){var r=t[i].getAttribute("data-braintree-name");n[r]=!0}if(!n.number)throw'Unable to find an input with data-braintree-name="number" in your form. Please add one.';if(n.expiration_date){if(n.expiration_month||n.expiration_year)throw'You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".'}else{if(!n.expiration_month&&!n.expiration_year)throw'Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.';if(!n.expiration_month)throw'Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.';if(!n.expiration_year)throw'Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.'}}function r(e,t,n){this.client=e,this.htmlForm=t,this.paymentMethodNonce=n}r.setup=function(e,t){var o=document.getElementById(t.id);if(!o)throw'Unable to find form with id: "'+t.id+'"';i(o);var s=n(t.paymentMethodNonceInputField);o.appendChild(s);var a=new r(e,o,s);return a.hijackForm(),a},r.prototype.registerAsyncTaskOnSubmit=function(e,t){function n(n){n.preventDefault?n.preventDefault():n.returnValue=!1,t(function(){r(),e.submit&&("function"==typeof e.submit||e.submit.call)?e.submit():setTimeout(function(){e.querySelector('[type="submit"]').click()},1)})}function i(){e.addEventListener?e.addEventListener("submit",n):e.attachEvent&&e.attachEvent("onsubmit",n)}function r(){e.removeEventListener?e.removeEventListener("submit",n):e.detachEvent&&e.detachEvent("onsubmit",n)}i()},r.prototype.hijackForm=function(){var e=this;this.registerAsyncTaskOnSubmit(this.htmlForm,function(t){return e.paymentMethodNonce.value&&""!==e.paymentMethodNonce.value?void t():void e.client.tokenizeCard(e.extractValues(e.htmlForm),function(n,i){if(n)throw"Unable to process payments at this time.";e.paymentMethodNonce.value=i,t()})})},r.prototype.extractValues=function(e,t){t=t||{};var n,i,r=e.children;for(i=0;i<r.length;i++)if(n=r[i],1===n.nodeType&&n.attributes["data-braintree-name"]){var o=n.getAttribute("data-braintree-name");"postal_code"===o?t.billingAddress={postalCode:n.value}:t[o]=n.value,this.scrubAttributes(n)}else n.children&&n.children.length>0&&this.extractValues(n,t);return t},r.prototype.scrubAttributes=function(e){try{e.attributes.removeNamedItem("name")}catch(t){}},t.exports=r},{}],139:[function(e,t){t.exports=e(23)},{"./credit-card":140,"./jsonp-driver":141,"./parse-client-token":143,"./root-data":145,"./sepa-bank-account":146,"./sepa-mandate":147,"./util":148}],140:[function(e,t){t.exports=e(3)},{}],141:[function(e,t){t.exports=e(4)},{"./jsonp":142}],142:[function(e,t){t.exports=e(5)},{"./util":148}],143:[function(e,t){t.exports=e(6)},{"./polyfill":144}],144:[function(e,t){t.exports=e(7)
},{}],145:[function(e,t){t.exports=e(29)},{"braintree-rpc":155}],146:[function(e,t){t.exports=e(8)},{}],147:[function(e,t){t.exports=e(9)},{}],148:[function(e,t){t.exports=e(10)},{}],149:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{"./lib/client":139,"./lib/jsonp":142,"./lib/jsonp-driver":141,"./lib/parse-client-token":143,"./lib/util":148}],150:[function(e,t){t.exports=e(34)},{"braintree-utilities":160}],151:[function(e,t){t.exports=e(35)},{"braintree-utilities":160}],152:[function(e,t){t.exports=e(36)},{}],153:[function(e,t){t.exports=e(37)},{"braintree-utilities":160}],154:[function(e,t){t.exports=e(38)},{"braintree-utilities":160}],155:[function(e,t){t.exports=e(39)},{"./lib/message-bus":150,"./lib/pubsub-client":151,"./lib/pubsub-server":152,"./lib/rpc-client":153,"./lib/rpc-server":154}],156:[function(e,t){t.exports=e(40)},{}],157:[function(e,t){t.exports=e(41)},{}],158:[function(e,t){t.exports=e(42)},{}],159:[function(e,t){t.exports=e(15)},{}],160:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":156,"./lib/events":157,"./lib/fn":158,"./lib/url":159}],161:[function(e,t){t.exports=e(34)},{"braintree-utilities":171}],162:[function(e,t){t.exports=e(35)},{"braintree-utilities":171}],163:[function(e,t){t.exports=e(36)},{}],164:[function(e,t){t.exports=e(37)},{"braintree-utilities":171}],165:[function(e,t){t.exports=e(38)},{"braintree-utilities":171}],166:[function(e,t){t.exports=e(39)},{"./lib/message-bus":161,"./lib/pubsub-client":162,"./lib/pubsub-server":163,"./lib/rpc-client":164,"./lib/rpc-server":165}],167:[function(e,t){t.exports=e(40)},{}],168:[function(e,t){t.exports=e(41)},{}],169:[function(e,t){t.exports=e(42)},{}],170:[function(e,t){t.exports=e(15)},{}],171:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":167,"./lib/events":168,"./lib/fn":169,"./lib/url":170}],172:[function(e,t){t.exports=e(40)},{}],173:[function(e,t){t.exports=e(41)},{}],174:[function(e,t){t.exports=e(42)},{}],175:[function(e,t){t.exports=e(15)},{}],176:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":172,"./lib/events":173,"./lib/fn":174,"./lib/url":175}],177:[function(e,t){t.exports=e(105)},{"../shared/constants":181,"../shared/util/browser":186,"../shared/util/dom":187,"../shared/util/util":188,"./logged-in-view":179,"./logged-out-view":180,"braintree-api":149,"braintree-rpc":166,"braintree-utilities":176}],178:[function(e,t){function n(e,t){if(!r.detectedPostMessage())return void("function"==typeof t.onUnsupported&&t.onUnsupported(new Error("unsupported browser detected")));var n=new i(e,t);return n.initialize(),n}var i=e("./client"),r=e("../shared/util/browser"),o="1.2.1";t.exports={create:n,_browser:r,VERSION:o}},{"../shared/util/browser":186,"./client":177}],179:[function(e,t){t.exports=e(106)},{"../shared/constants":181}],180:[function(e,t){t.exports=e(107)},{"../shared/constants":181}],181:[function(e,t){t.exports=e(108)},{}],182:[function(e,t){t.exports=e(109)},{"./useragent":185}],183:[function(e,t){t.exports=e(110)},{"./platform":184,"./useragent":185}],184:[function(e,t){t.exports=e(111)},{"./useragent":185}],185:[function(e,t){t.exports=e(112)},{}],186:[function(e,t){t.exports=e(113)},{"../useragent/browser":182,"../useragent/device":183,"../useragent/platform":184,"../useragent/useragent":185}],187:[function(e,t){t.exports=e(114)},{}],188:[function(e,t){t.exports=e(115)},{}],189:[function(e,t){t.exports=e(34)},{"braintree-utilities":199}],190:[function(e,t){t.exports=e(35)},{"braintree-utilities":199}],191:[function(e,t){t.exports=e(36)},{}],192:[function(e,t){t.exports=e(37)},{"braintree-utilities":199}],193:[function(e,t){t.exports=e(38)},{"braintree-utilities":199}],194:[function(e,t){t.exports=e(39)},{"./lib/message-bus":189,"./lib/pubsub-client":190,"./lib/pubsub-server":191,"./lib/rpc-client":192,"./lib/rpc-server":193}],195:[function(e,t){t.exports=e(40)},{}],196:[function(e,t){t.exports=e(41)},{}],197:[function(e,t){t.exports=e(42)},{}],198:[function(e,t){t.exports=e(15)},{}],199:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./lib/dom":195,"./lib/events":196,"./lib/fn":197,"./lib/url":198}],200:[function(e,t){t.exports=e(12)},{}],201:[function(e,t){t.exports=e(13)},{}],202:[function(e,t){t.exports=e(14)},{}],203:[function(e,t){t.exports=e(15)},{}],204:[function(e,t){t.exports=e(16)},{"./lib/dom":200,"./lib/events":201,"./lib/fn":202,"./lib/url":203}],205:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),l=1;r>l;l++)a[l-1]=arguments[l];for(u=n.slice(),r=u.length,l=0;r>l;l++)u[l].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],206:[function(e,t){t.exports={NONCE_RECEIVED:"NONCE_RECEIVED",ROOT_CALLBACK:"onPaymentMethodReceived"}},{}],207:[function(e,t){var n=e("events").EventEmitter;t.exports=new n},{events:205}],208:[function(e,t){function n(e){return"paypal"in e&&a.isFunction(e.paypal.onSuccess)?e.paypal.onSuccess:null}function i(e,t){var i,a=n(t),l=new r.Client({clientToken:e,integration:"custom"});return i=o.setup(l,t),t.paypal&&(t.paypal.paymentMethodNonceInputField||(t.paypal.paymentMethodNonceInputField=i.paymentMethodNonce),a&&(t.paypal.onSuccess=function(e){a.apply(null,[e.nonce,e.email,e.shippingAddress])}),s.create(e,t.paypal)),i}var r=e("braintree-api"),o=e("braintree-form"),s=e("braintree-paypal"),a=e("braintree-utilities");t.exports={initialize:i}},{"braintree-api":33,"braintree-form":138,"braintree-paypal":178,"braintree-utilities":204}],209:[function(e,t){function n(e){return s.isFunction(e.paymentMethodNonceReceived)?e.paymentMethodNonceReceived:null}function i(e){return s.isFunction(e[l.ROOT_CALLBACK])}function r(e,t){var r=n(t),s=i(t);return(r||s)&&(t.paymentMethodNonceReceived=function(e){r&&r.apply(null,[e.originalEvent,e.nonce]),a.emit(l.NONCE_RECEIVED,null,e)}),o.create(e,t)}var o=e("braintree-dropin"),s=e("braintree-utilities"),a=e("../event-bus"),l=e("../constants");t.exports={initialize:r}},{"../constants":206,"../event-bus":207,"braintree-dropin":134,"braintree-utilities":204}],210:[function(e,t){t.exports={custom:e("./custom"),dropin:e("./dropin"),paypal:e("./paypal")}},{"./custom":208,"./dropin":209,"./paypal":211}],211:[function(e,t){function n(e){return"onSuccess"in e&&s.isFunction(e.onSuccess)?e.onSuccess:"paypal"in e&&s.isFunction(e.paypal.onSuccess)?e.paypal.onSuccess:null}function i(e){return s.isFunction(e[l.ROOT_CALLBACK])}function r(e,t){var r=n(t),s=i(t);return(r||s)&&(t.onSuccess=function(e){r&&r.apply(null,[e.nonce,e.email,e.shippingAddress]),a.emit(l.NONCE_RECEIVED,null,e)}),o.create(e,t)}var o=e("braintree-paypal"),s=e("braintree-utilities"),a=e("../event-bus"),l=e("../constants");t.exports={initialize:r}},{"../constants":206,"../event-bus":207,"braintree-paypal":178,"braintree-utilities":204}],212:[function(e,t){(function(n){var i="2.3.3",r=e("braintree-rpc"),o=new r.MessageBus(n),s=new r.RPCServer(o);t.exports=function(){s.define("getExternalData",function(e){e({sdkVersion:i,merchantAppId:n.location.href})})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"braintree-rpc":194}],213:[function(e,t){function n(e,t,n){if(t in c)return u.isFunction(n[d.ROOT_CALLBACK])&&h.on(d.NONCE_RECEIVED,function(){n[d.ROOT_CALLBACK].apply(null,arguments)}),c[t].initialize(e,n);throw new Error(t+" is an unsupported integration")}var i="2.3.3",r=e("braintree-api"),o=e("braintree-paypal"),s=e("braintree-dropin"),a=e("braintree-form"),l=e("braintree-3d-secure"),u=e("braintree-utilities"),c=e("./integrations"),h=e("./event-bus"),d=e("./constants");t.exports={api:r,cse:Braintree,paypal:o,dropin:s,Form:a,tds:l,setup:n,VERSION:i}},{"./constants":206,"./event-bus":207,"./integrations":210,"braintree-3d-secure":19,"braintree-api":33,"braintree-dropin":134,"braintree-form":138,"braintree-paypal":178,"braintree-utilities":204}]},{},[1])(1)}),define("util/payment-gateway",["require","./server-gateway","braintree","../config"],function(e){var t=e("./server-gateway"),n=e("braintree"),i=e("../config"),r={};return r.initialize=function(){return t.get("/payment/token").then(function(e){i.mock||(r.client=new n.api.Client({clientToken:e.token}))})},r.tokenizeCard=function(e,t,n,o,s,a){return new RSVP.Promise(function(l,u){i.mock&&l("dummy-braintree-nonce."+Date.now()),r.client.tokenizeCard({number:e,expirationMonth:t,expirationYear:n,cvv:o,billingAddress:{postalCode:s,region:a}},function(e,t){e?u(e):l(t)})})},r}),define("view/add-card",["require","marionette","hbs!../html/add-card","../util/vent","../util/validator","mobiscroll","../util/server-gateway","../util/payment-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/add-card"),i=e("../util/vent"),r=e("../util/validator"),o=(e("mobiscroll"),e("../util/server-gateway")),s=e("../util/payment-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=e("../context"),c=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .save-card":"saveCard","click .cancel":"cancel"},onDomRefresh:function(){this.initializeTypePicker(),this.initializeMMYYPicker(),l.trackView("Add Card")},initializeTypePicker:function(){$(".type").mobiscroll().select({display:"modal",theme:"epsilon",placeholder:"Select Type",minWidth:200})},initializeMMYYPicker:function(){var e=new Date,t=new Date;t.setFullYear(e.getFullYear()+10),$(".mmyy").mobiscroll().date({display:"modal",dateOrder:"mmyyyy",mode:"scroller",dateFormat:"mm / yyyy",theme:"epsilon",minDate:e,maxDate:t})},showMenu:function(){i.trigger("menu:show","payments")},saveCard:function(){this.validateForm()&&this.submit()},validateForm:function(){return r.validateFields($(".form").find(".field"))},submit:function(){s.tokenizeCard(this.getElementValue(".cardnumber"),this.getExpirationMonth(),this.getExpirationYear(),this.getElementValue(".cvv"),this.getElementValue(".postcode"),this.getElementValue(".type")).then(function(e){return o.put("/payment/user/"+u.user.id+"/card",{nonce:e}).then(function(){a.showShortBottom("Card Successfully Added"),i.trigger("navigate","payments")})}).catch(function(e){l.trackError(JSON.stringify(e)),a.showLongBottom("Something unexpected happened. Please try again.")})},cancel:function(){i.trigger("navigate","payments")},showSelectCardTypeModal:function(e){var t=$(e.currentTarget).closest(".input-select");i.trigger("modal:show:select",t)},getElementValue:function(e){return $(e).val()},getExpirationMonth:function(){return $(".mmyy").val().substr(0,1)},getExpirationYear:function(){return $(".mmyy").val().substr(3,6)}});return c}),define("hbs!html/edit-card",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="menu-icon-container">\n    <i class="touch-color icon-menu"></i>\n</div>\n<div class="content">\n    <i class="context-icon icon-credit-card"></i>\n    <div class="context-title bold">Edit Card</div>\n    <div class="form">\n        <div class="input-container single">\n            <input type="text" disabled="disabled" class="field cardnumber disabled" value=""/>\n            <div class="input-underline"></div>\n        </div>\n        <div class="input-container single">\n            <div class="input-container double left">\n                <input type="text" readonly data-validationrules="mandatory mmyy" class="field mmyy" value="" placeholder="MM / YYYY"/>\n                <span class="error-reason">\n                    <span class="error-text"></span>\n                    <i class="icon-cancel-circled"></i>\n                </span>\n                <div class="input-underline"></div>\n            </div>\n            <div class="input-container triple right">\n                <input type="number" step="1" maxlength="3" data-validationrules="mandatory cvv" class="field cvv" placeholder="CVV"/>\n                <span class="error-reason">\n                    <span class="error-text"></span>\n                    <i class="icon-cancel-circled"></i>\n                </span>\n                <div class="input-underline"></div>\n            </div>\n        </div>\n        <div class="input-container single">\n            <input type="text" maxlength="8" data-validationrules="mandatory postcode" class="field postcode" value="" placeholder="Postcode"/>\n            <span class="error-reason">\n                <span class="error-text"></span>\n                <i class="icon-cancel-circled"></i>\n            </span>\n            <div class="input-underline"></div>\n        </div>\n        <div class="input-container single">\n            <select class="type" id="type">\n                <option value="personal">Personal</option>\n                <option value="business">Business</option>\n            </select>\n            <span class="error-reason">\n                <span class="error-text"></span>\n                <i class="icon-cancel-circled"></i>\n            </span>\n            <div class="select-underline"></div>\n        </div>\n    </div>\n    <div class="right">\n        <div class="text-and-icon-button delete-card touch-color">\n            <span class="text">Delete Card</span>\n            <i class="icon-trash"></i>\n        </div>\n    </div>\n</div>\n<div class="buttons double">\n    <div class="button bold touch-color dark-button cancel">Cancel</div>\n    <div class="button bold touch-color light-button save-card">Save Card</div>\n</div>'},useData:!0})}),define("view/edit-card",["require","marionette","hbs!../html/edit-card","../util/vent","../context","../util/validator","../util/server-gateway","../util/analytics","../util/toast"],function(e){var t=e("marionette"),n=e("hbs!../html/edit-card"),i=e("../util/vent"),r=e("../context"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/analytics"),l=e("../util/toast"),u=t.LayoutView.extend({tagName:"div",template:n,events:{"click .icon-menu":"showMenu","click .save-card":"saveCard","click .cancel":"cancel","click .delete-card":"deleteCard"},onDomRefresh:function(){var e=r.getPaymentMethodById(this.options.cardId);this.prepopulate(e),this.initializeTypePicker(e.type),this.initializeMMYYPicker(new Date("20"+e.expiryYear,parseInt(e.expiryMonth)-1)),a.trackView("Edit Card")},prepopulate:function(e){$(".cardnumber").val("•••• •••• •••• "+e.last4Digits),$(".mmyy").val(e.expiryMonth+" / 20"+e.expiryYear),$(".postcode").val(e.postcode),$(".type").val(e.type)},initializeTypePicker:function(e){$(".type").mobiscroll().select({display:"modal",theme:"epsilon",placeholder:"Select Type",minWidth:200,defaultValue:e})},initializeMMYYPicker:function(e){var t=new Date,n=new Date;n.setFullYear(t.getFullYear()+10),$(".mmyy").mobiscroll().date({display:"modal",dateOrder:"mmyyyy",mode:"scroller",dateFormat:"mm / yyyy",theme:"epsilon",minDate:t,maxDate:n,defaultValue:e})},showMenu:function(){i.trigger("menu:show","payments")},saveCard:function(){this.validateForm()&&this.submit()},validateForm:function(){return o.validateFields($(".form").find(".field"))},submit:function(){l.showShortBottom("Card Successfully Updated"),i.trigger("navigate","payments")},cancel:function(){i.trigger("navigate","payments")},deleteCard:function(){var e=this;i.trigger("modal:confirm",{title:"Delete Card",yesCallback:function(){e.confirmDeleteCard()}})},confirmDeleteCard:function(){s.delete("/payment/user/"+r.user.id+"/payment-method/"+this.options.cardId).then(function(){i.trigger("navigate","payments"),i.trigger("modal:hide"),l.showShortBottom("Card Successfully Deleted")}).catch(function(e){a.trackError(JSON.stringify(e)),l.showLongBottom("Something unexpected happened. Please try again.")})}});return u}),define("hbs!html/forgotten-password",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="form">\n    <div class="input-container single">\n        <input type="text" data-validationrules="mandatory emailaddress" class="field" placeholder="Email Address"/>\n        <span class="error-reason">\n            <span class="error-text"></span>\n            <i class="icon-cancel-circled"></i>\n        </span>\n        <div class="input-underline"></div>\n    </div>\n    <div class="right">\n        <div class="text-and-icon-button sign-in touch-color">\n            <span class="text">Sign In</span>\n        </div>\n    </div>\n</div>\n<div class="buttons single">\n    <div class="button bold touch-color dark-button request-reset">Request Password Reset</div>\n</div>'},useData:!0})}),define("view/forgotten-password",["require","marionette","hbs!../html/forgotten-password","../util/click","../util/vent","../util/validator","../util/server-gateway","../util/toast","../util/analytics","../context"],function(e){var t=e("marionette"),n=e("hbs!../html/forgotten-password"),i=e("../util/click"),r=e("../util/vent"),o=e("../util/validator"),s=e("../util/server-gateway"),a=e("../util/toast"),l=e("../util/analytics"),u=(e("../context"),t.LayoutView.extend({tagName:"div",template:n,events:{"click .request-reset":"requestPasswordReset","blur input.password":"validateField","click .sign-in":"signIn"},ui:{emailAddressInput:"input.emailaddress"},onDomRefresh:function(){l.trackView("Forgotten Password")},requestPasswordReset:i.single(function(){this.validateForm()&&this.submit()}),validateForm:function(){return o.validateFields($(".form").find(".field"))},validateField:function(e){o.validateFields($(e.currentTarget))},submit:function(){return s.post("/account/password/forgotten",{emailAddress:this.ui.emailAddressInput.val()}).then(function(){a.showLongBottom("An email has been sent to your registered email address.")}).catch(function(e){l.trackError(JSON.stringify(e)),a.showLongBottom("Something unexpected happened. Please try again.")})},signIn:function(){r.trigger("navigate","sign-in")}}));return u}),define("util/touch",["require","jquery"],function(e){var t=e("jquery"),n={};return n.initializeTouchFeedback=function(){t(".touch-color").on("touchstart",function(){t(this).addClass("js-touch-color")}),t(".touch-color").on("touchend",function(){t(this).removeClass("js-touch-color")}),t(".touch-color").on("touchcancel",function(){t(this).removeClass("js-touch-color")}),t(".touch-color").on("touchleave",function(){t(this).removeClass("js-touch-color")})},n}),define("router",["require","./view/landing","./view/sign-in","./view/register","./view/verify-mobile","./view/home","./view/reset-password","./view/about","./view/payments","./view/profile","./view/promotions","./view/share","./view/support","./view/add-card","./view/edit-card","./view/forgotten-password","./util/touch"],function(e){var t=e("./view/landing"),n=e("./view/sign-in"),i=e("./view/register"),r=e("./view/verify-mobile"),o=e("./view/home"),s=e("./view/reset-password"),a=e("./view/about"),l=e("./view/payments"),u=e("./view/profile"),c=e("./view/promotions"),h=e("./view/share"),d=e("./view/support"),p=e("./view/add-card"),f=e("./view/edit-card"),m=e("./view/forgotten-password"),g=e("./util/touch"),v={initialize:function(e){var v=Backbone.Router.extend({routes:{landing:"landing","sign-in":"signIn",register:"register","verify-mobile":"verifyMobile",home:"home",about:"about",payments:"payments",profile:"profile",promotions:"promotions",share:"share",support:"support","add-card":"addCard","forgotten-password":"forgottenPassword","edit-card/:cardid":"editCard","user/:userid/forgottenpassword/token/:token":"resetPassword"}}),y=new v,b=function(t,n){e.main.show(t,n),g.initializeTouchFeedback()};y.on("route:landing",function(){b(new t)}),y.on("route:signIn",function(){b(new n)}),y.on("route:register",function(){b(new i)}),y.on("route:verifyMobile",function(){b(new r)}),y.on("route:home",function(){b(new o)}),y.on("route:about",function(){b(new a)}),y.on("route:payments",function(){b(new l)}),y.on("route:profile",function(){b(new u)}),y.on("route:promotions",function(){b(new c)}),y.on("route:share",function(){b(new h)}),y.on("route:support",function(){b(new d)}),y.on("route:addCard",function(){b(new p)}),y.on("route:editCard",function(e){b(new f({cardId:e}))}),y.on("route:forgottenPassword",function(){b(new m)}),y.on("route:resetPassword",function(e,t){b(new s,{userId:e,token:t})})}};return v}),define("mock-cordova",["require"],function(){var e={mock:function(){t()}},t=function(){PushNotification.registerDevice=function(e,t,n){n()},PushNotification.getDeviceId=function(e){e("ABC123")}};return e}),define("hbs!html/menu",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<nav class="menu slide-menu">\n    <ul>\n        <li id="home" class="touch-color menu-item"><i class="menu-item-icon icon-home"></i>Home</li>\n        <li id="profile" class="touch-color menu-item"><i class="menu-item-icon icon-user"></i>Profile</li>\n        <li id="payments" class="touch-color menu-item"><i class="menu-item-icon icon-credit-card"></i>Payments</li>\n        <li id="promotions" class="touch-color menu-item"><i class="menu-item-icon icon-star"></i>Promotions</li>\n        <li id="share" class="touch-color menu-item"><i class="menu-item-icon icon-share"></i>Share</li>\n        <li id="support" class="touch-color menu-item"><i class="menu-item-icon icon-help"></i>Support</li>\n        <li id="about" class="touch-color menu-item"><i class="menu-item-icon icon-info"></i>About</li>\n    </ul>\n</nav>\n<div class="menu-close"></div>'},useData:!0})}),define("view/menu",["require","marionette","hbs!../html/menu","../util/click","../util/vent"],function(e){var t=e("marionette"),n=e("hbs!../html/menu"),i=(e("../util/click"),e("../util/vent")),r=t.LayoutView.extend({tagName:"div",template:n,events:{"click .active":"hideMenu","click .menu-close":"hideMenu","click .menu-item:not(.active)":"showMenuItem"},setActiveItem:function(e){$("li.active").removeClass("active"),$("li#"+e).addClass("active")},showMenuItem:function(e){var t=$(e.currentTarget).closest("li").attr("id");this.setActiveItem(t),i.trigger("navigate",t),this.hideMenu()},hideMenu:function(){$("body").removeClass("menu-open")}});return r}),define("hbs!html/modal-confirm",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="buttons double confirm">\n    <div class="title"></div>\n    <div class="text">Are you sure?</div>\n    <div class="button bold touch-color dark-button no">No</div>\n    <div class="button bold touch-color light-button yes">Yes</div>\n</div>'},useData:!0})}),define("view/modal-confirm",["require","marionette","hbs!../html/modal-confirm","../util/vent"],function(e){var t=e("marionette"),n=e("hbs!../html/modal-confirm"),i=e("../util/vent"),r=t.LayoutView.extend({tagName:"div",template:n,events:{"click .yes":"onYes","click .no":"onNo"},onDomRefresh:function(){this.options.title&&$(".confirm .title").html(this.options.title)},onYes:function(){this.options.yesCallback()},onNo:function(){this.options.noCallback?this.options.noCallback():i.trigger("modal:hide")}});return r}),define("hbs!html/modal-rateme",["handlebars"],function(e){return e=e||this.Handlebars,e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="buttons single rateme">\n    <div class="title">Rate Us</div>\n    <div class="text">Enjoy the app? Tell the world! It won\'t take a minute, and it\'ll help us make things even better!</div>\n    <div class="button bold touch-color dark-button not-now">Not Now</div>\n    <div class="button bold touch-color gray-button never">No Thanks</div>\n    <div class="button bold touch-color blue-button rate">Rate</div>\n</div>'},useData:!0})}),define("view/modal-rateme",["require","marionette","hbs!../html/modal-rateme","../util/vent","../util/analytics","../util/rateme"],function(e){var t=e("marionette"),n=e("hbs!../html/modal-rateme"),i=e("../util/vent"),r=e("../util/analytics"),o=e("../util/rateme"),s=t.LayoutView.extend({tagName:"div",template:n,events:{"click .not-now":"onNotNow","click .never":"onNever","click .rate":"onRate"},onDomRefresh:function(){r.trackView("Rate Me")},onNotNow:function(){o.reset(),i.trigger("modal:hide")},onNever:function(){o.incrementAppViewCount(),i.trigger("modal:hide")},onRate:function(){o.incrementAppViewCount(),o.openAppStore(),i.trigger("modal:hide")}});return s}),define("app",["require","./util/push-notification","./config","./router","marionette","backbone","./util/vent","./util/touch","./util/rateme","./util/server-gateway","./util/payment-gateway","./mock-cordova","./view/menu","./view/modal-confirm","./view/modal-rateme","./util/toast","./util/analytics","./context"],function(e){var t=e("./util/push-notification"),n=(e("./config"),e("./router")),i=e("marionette"),r=e("backbone"),o=e("./util/vent"),s=e("./util/touch"),a=e("./util/rateme"),l=e("./util/server-gateway"),u=e("./util/payment-gateway"),c=e("./mock-cordova"),h=e("./view/menu"),d=e("./view/modal-confirm"),p=e("./view/modal-rateme"),f=e("./util/toast"),m=e("./util/analytics"),g=e("./context"),v=new i.Application;v.addInitializer(function(){x().then(m.initialize).then(t.register).then(u.initialize).then(C).then(b).then(y).then(w).then(k).then(_).catch(E)}),v.addRegions({loading:"#loading",main:"#main",menu:"#menu",modal:"#modal"});var y=function(){v.menu.show(new h),o.on("menu:show",function(e){v.menu.currentView.setActiveItem(e),$("body").addClass("menu-open"),s.initializeTouchFeedback()}),o.on("menu:hide",function(){$("body").removeClass("menu-open")})},b=function(){o.on("modal:confirm",function(e){$("body").addClass("modal"),v.modal.show(new d(e)),s.initializeTouchFeedback()}),o.on("modal:rateme",function(){$("body").addClass("modal"),v.modal.show(new p),s.initializeTouchFeedback()}),o.on("modal:hide",function(){v.modal.empty(),$("body").removeClass("modal")})},w=function(){a.showRateMeDialog()},x=function(){return"browser"===device.platform&&c.mock(),$("body").addClass(device.platform.toLowerCase()),new RSVP.Promise(function(e){e()})},_=function(e){$(v.loading.el).hide(),setTimeout(function(){o.trigger("navigate",e)},500)},k=function(){if(v.customUrl)return new RSVP.Promise(function(e){e(v.customUrl)});var e=localStorage.getItem("sessionid");return e?l.get("/account/session",null,{sessionid:e}).then(function(e){return g.user=e.user,g.session=e.session,m.setUserId(e.user.id),e.user.verified?"home":"verify-mobile"}).catch(function(){return localStorage.removeItem("sessionid"),"sign-in"}):new RSVP.Promise(function(e){e("landing")})},C=function(){n.initialize(v),r.history.start(),o.on("navigate",function(e){r.history.navigate(e,{trigger:!0})}),document.addEventListener("backbutton",S,!1)},S=function(){v.main.currentView.onBack?v.main.currentView.onBack():r.history.history.back()},E=function(e){console.log(e),f.showLongBottom("Something unexpected happened. Please try again.")};return v}),require.config({baseUrl:"js",paths:{backbone:"./components/backbone/backbone",handlebars:"./components/handlebars/handlebars.min","hbs-builder":"./components/requirejs-hbs/hbs-builder","handlebars-compiler":"./components/requirejs-hbs/example/assets/lib/handlebars-runtime",hbs:"./components/requirejs-hbs/hbs",jquery:"./components/jquery/dist/jquery.min",marionette:"./components/marionette/lib/backbone.marionette.min",text:"./components/requirejs-text/text",underscore:"./components/underscore/underscore","event-bus":"./components/vent/app/scripts/services/event-bus/event-bus",mobiscroll:"./components/mobiscroll/mobiscroll.custom-2.14.4.min",braintree:"./components/braintree-web/dist/braintree"},shim:{jquery:{exports:"jquery"},mobiscroll:{deps:["jquery"],exports:"mobiscroll"}}}),document.addEventListener("deviceready",onDeviceReady,!1),window.onerror=function(e){console.log("error:"+e),require(["./util/analytics"],function(t){t.trackError(JSON.stringify(e))})},define("index",function(){});